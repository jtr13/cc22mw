<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 36 Chord diagrams using circlize | Community Contributions for EDAV Fall 2022 Mon/Wed</title>
<meta name="description" content="Pia-Kelsey O’Neill  36.1 Overview Chord Diagrams are circular visualizations that depict inter-relationships between categorical data. They can be used to depict the flow of migration between...">
<meta name="generator" content="bookdown 0.30 with bs4_book()">
<meta property="og:title" content="Chapter 36 Chord diagrams using circlize | Community Contributions for EDAV Fall 2022 Mon/Wed">
<meta property="og:type" content="book">
<meta property="og:description" content="Pia-Kelsey O’Neill  36.1 Overview Chord Diagrams are circular visualizations that depict inter-relationships between categorical data. They can be used to depict the flow of migration between...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 36 Chord diagrams using circlize | Community Contributions for EDAV Fall 2022 Mon/Wed">
<meta name="twitter:description" content="Pia-Kelsey O’Neill  36.1 Overview Chord Diagrams are circular visualizations that depict inter-relationships between categorical data. They can be used to depict the flow of migration between...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.1/transition.js"></script><script src="libs/bs3compat-0.4.1/tabs.js"></script><script src="libs/bs3compat-0.4.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="libs/proj4js-2.3.15/proj4.js"></script><link href="libs/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="libs/highcharts-9.3.1/highcharts.js"></script><script src="libs/highcharts-9.3.1/highcharts-3d.js"></script><script src="libs/highcharts-9.3.1/highcharts-more.js"></script><script src="libs/highcharts-9.3.1/modules/stock.js"></script><script src="libs/highcharts-9.3.1/modules/map.js"></script><script src="libs/highcharts-9.3.1/modules/data.js"></script><script src="libs/highcharts-9.3.1/modules/exporting.js"></script><script src="libs/highcharts-9.3.1/modules/offline-exporting.js"></script><script src="libs/highcharts-9.3.1/modules/drilldown.js"></script><script src="libs/highcharts-9.3.1/modules/item-series.js"></script><script src="libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script><script src="libs/highcharts-9.3.1/modules/annotations.js"></script><script src="libs/highcharts-9.3.1/modules/export-data.js"></script><script src="libs/highcharts-9.3.1/modules/funnel.js"></script><script src="libs/highcharts-9.3.1/modules/heatmap.js"></script><script src="libs/highcharts-9.3.1/modules/treemap.js"></script><script src="libs/highcharts-9.3.1/modules/sankey.js"></script><script src="libs/highcharts-9.3.1/modules/dependency-wheel.js"></script><script src="libs/highcharts-9.3.1/modules/organization.js"></script><script src="libs/highcharts-9.3.1/modules/solid-gauge.js"></script><script src="libs/highcharts-9.3.1/modules/streamgraph.js"></script><script src="libs/highcharts-9.3.1/modules/sunburst.js"></script><script src="libs/highcharts-9.3.1/modules/vector.js"></script><script src="libs/highcharts-9.3.1/modules/wordcloud.js"></script><script src="libs/highcharts-9.3.1/modules/xrange.js"></script><script src="libs/highcharts-9.3.1/modules/tilemap.js"></script><script src="libs/highcharts-9.3.1/modules/venn.js"></script><script src="libs/highcharts-9.3.1/modules/gantt.js"></script><script src="libs/highcharts-9.3.1/modules/timeline.js"></script><script src="libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script><script src="libs/highcharts-9.3.1/modules/bullet.js"></script><script src="libs/highcharts-9.3.1/modules/coloraxis.js"></script><script src="libs/highcharts-9.3.1/modules/dumbbell.js"></script><script src="libs/highcharts-9.3.1/modules/lollipop.js"></script><script src="libs/highcharts-9.3.1/modules/series-label.js"></script><script src="libs/highcharts-9.3.1/plugins/motion.js"></script><script src="libs/highcharts-9.3.1/custom/reset.js"></script><script src="libs/highcharts-9.3.1/modules/boost.js"></script><script src="libs/highchart-binding-0.9.4/highchart.js"></script><script src="libs/plotly-binding-4.10.1/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script><link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet">
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script><script src="libs/dygraphs-1.1.1/shapes.js"></script><script src="libs/moment-2.8.4/moment.js"></script><script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script><script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script><script src="libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script><script src="libs/Dygraph.Plotters.CandlestickPlotter-1.0/candlestick.js"></script><script src="libs/d3-4.13.0/d3.min.js"></script><link href="libs/profvis-0.3.6.9000/profvis.css" rel="stylesheet">
<script src="libs/profvis-0.3.6.9000/profvis.js"></script><script src="libs/profvis-0.3.6.9000/scroll.js"></script><link href="libs/highlight-6.2.0/textmate.css" rel="stylesheet">
<script src="libs/highlight-6.2.0/highlight.js"></script><script src="libs/profvis-binding-0.3.7/profvis.js"></script><link href="libs/collapsibleTree-0.1.6/collapsibleTree.css" rel="stylesheet">
<script src="libs/collapsibleTree-binding-0.1.7/collapsibleTree.js"></script><script src="libs/forceNetwork-binding-0.4/forceNetwork.js"></script><script src="libs/d3v3-3.5.3/./d3v3.min.js"></script><link href="libs/d3heatmapcore-0.0.0/heatmapcore.css" rel="stylesheet">
<script src="libs/d3heatmapcore-0.0.0/heatmapcore.js"></script><script src="libs/d3v3-tip-0.6.6/index.js"></script><script src="libs/d3heatmap-binding-0.9.0/d3heatmap.js"></script><script src="libs/d3-tip-0.8.1/index.js"></script><link href="libs/chorddiag-0.1.2.9000/chorddiag.css" rel="stylesheet">
<script src="libs/chorddiag-0.1.2.9000/chorddiag.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Community Contributions for EDAV Fall 2022 Mon/Wed</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Welcome!</a></li>
<li><a class="" href="community-contribution.html"><span class="header-section-number">2</span> Community Contribution</a></li>
<li><a class="" href="github-submission-instructions.html"><span class="header-section-number">3</span> GitHub submission instructions</a></li>
<li><a class="" href="sample-project.html"><span class="header-section-number">4</span> Sample project</a></li>
<li class="book-part">Cheatsheets</li>
<li><a class="" href="geographic-visualization-by-ggmap.html"><span class="header-section-number">5</span> Geographic visualization by ggmap</a></li>
<li><a class="" href="googlevis.html"><span class="header-section-number">6</span> googleVis</a></li>
<li><a class="" href="text-data-visualization-by-tidytext.html"><span class="header-section-number">7</span> Text data visualization by tidytext</a></li>
<li><a class="" href="cheatsheet-of-ggally-including-ggcoef_model-and-ggpairs.html"><span class="header-section-number">8</span> Cheatsheet of GGally (including ggcoef_model and ggpairs)</a></li>
<li><a class="" href="cheatsheet-for-data-science.html"><span class="header-section-number">9</span> Cheatsheet for data science</a></li>
<li><a class="" href="cheatsheet-for-plotly.html"><span class="header-section-number">10</span> Cheatsheet for Plotly</a></li>
<li><a class="" href="dataexplorer-cheatsheet-eda-made-easier.html"><span class="header-section-number">11</span> DataExplorer Cheatsheet, EDA made easier</a></li>
<li><a class="" href="data-visualization-with-ggplot2-r-and-matplotlib-python-cheat-sheet.html"><span class="header-section-number">12</span> Data Visualization with GGPlot2 (R) and MatPlotLib (Python) Cheat Sheet</a></li>
<li class="book-part">Tutorials</li>
<li><a class="" href="map-plots-with-highcharts.html"><span class="header-section-number">13</span> Map Plots with Highcharts</a></li>
<li><a class="" href="introduction-of-machine-learning-in-r.html"><span class="header-section-number">14</span> Introduction of machine learning in R</a></li>
<li><a class="" href="quantmod-tidyquant-tutorials-and-comparison.html"><span class="header-section-number">15</span> Quantmod &amp; Tidyquant Tutorials and Comparison</a></li>
<li><a class="" href="learning-echarts4r-with-shiny.html"><span class="header-section-number">16</span> Learning echarts4r with shiny</a></li>
<li><a class="" href="picturing-inflation-an-exercise-in-web-scraping-plotly-and-timeseries.html"><span class="header-section-number">17</span> Picturing Inflation: An Exercise in Web Scraping, Plotly and Timeseries</a></li>
<li><a class="" href="introcuction-to-dygraph-for-financial-analysis.html"><span class="header-section-number">18</span> Introcuction to Dygraph for Financial Analysis</a></li>
<li><a class="" href="two-interesting-r-packages.html"><span class="header-section-number">19</span> Two Interesting R packages</a></li>
<li><a class="" href="tutorial-for-wordcloud2-package.html"><span class="header-section-number">20</span> Tutorial for wordcloud2 package</a></li>
<li><a class="" href="effcient-r.html"><span class="header-section-number">21</span> Effcient R</a></li>
<li><a class="" href="color-vision-deficiency.html"><span class="header-section-number">22</span> Color vision deficiency</a></li>
<li><a class="" href="tutorials-for-ggfortify-and-autoplotly.html"><span class="header-section-number">23</span> Tutorials for ggfortify and autoplotly</a></li>
<li><a class="" href="becoming-a-better-business-analyst.html"><span class="header-section-number">24</span> Becoming a better business analyst</a></li>
<li><a class="" href="cheatsheet-of-ggstatsplot-in-r.html"><span class="header-section-number">25</span> Cheatsheet of ggstatsplot in R</a></li>
<li><a class="" href="best-parallel-coordinates-r-package.html"><span class="header-section-number">26</span> Best Parallel Coordinates R Package</a></li>
<li><a class="" href="hypothesis-testing-guide-in-r.html"><span class="header-section-number">27</span> Hypothesis Testing Guide in R</a></li>
<li><a class="" href="python-tutorial-gather-data-through-api-and-web-scraping.html"><span class="header-section-number">28</span> Python tutorial: gather data through API and web scraping</a></li>
<li><a class="" href="an-interactive-dashboard-covid-19-visualization-with-shiny-and-plotly.html"><span class="header-section-number">29</span> An Interactive Dashboard: COVID-19 Visualization with Shiny and Plotly</a></li>
<li><a class="" href="interactive-plots-for-different-types-of-graphs-in-r.html"><span class="header-section-number">30</span> Interactive plots for different types of graphs in R</a></li>
<li><a class="" href="introduction-to-plotly-in-r.html"><span class="header-section-number">31</span> Introduction to Plotly in R</a></li>
<li><a class="" href="machine-learning-interview-mindmap-and-commonly-asked-questions.html"><span class="header-section-number">32</span> Machine Learning Interview mindmap and commonly asked questions</a></li>
<li><a class="" href="data-visualization-with-seaborn.html"><span class="header-section-number">33</span> Data Visualization with Seaborn</a></li>
<li><a class="" href="tutorial-of-making-different-types-of-charts-interactive.html"><span class="header-section-number">34</span> Tutorial of making different types of charts interactive</a></li>
<li><a class="" href="cheatsheet-of-ggplot2-ggplot2-alluvial-heatmap.html"><span class="header-section-number">35</span> Cheatsheet of ggplot2 (ggplot2 &amp; alluvial &amp; heatmap)</a></li>
<li><a class="active" href="chord-diagrams-using-circlize.html"><span class="header-section-number">36</span> Chord diagrams using circlize</a></li>
<li><a class="" href="video-guide-to-reigniting-your-creavite-spark-for-visualizations.html"><span class="header-section-number">37</span> Video guide to reigniting your creavite spark for visualizations</a></li>
<li><a class="" href="tutorial-on-machine-learning-in-r.html"><span class="header-section-number">38</span> Tutorial on Machine Learning in R</a></li>
<li><a class="" href="data-importance-visualization.html"><span class="header-section-number">39</span> Data importance &amp; visualization</a></li>
<li><a class="" href="time-series-visualization---r-tutorial.html"><span class="header-section-number">40</span> Time Series Visualization - R tutorial</a></li>
<li><a class="" href="introduction-6.html"><span class="header-section-number">41</span> Introduction</a></li>
<li><a class="" href="S3.html"><span class="header-section-number">42</span> Section 3.Time series visualization with ggplot and ggplot2</a></li>
<li><a class="" href="autocorrelation-plot.html"><span class="header-section-number">43</span> AutoCorrelation plot</a></li>
<li><a class="" href="S4.html"><span class="header-section-number">44</span> Section 4. Time series visualization with TSstudio: ts_plot</a></li>
<li><a class="" href="S5.html"><span class="header-section-number">45</span> Section 5. Time series visualization with Plotly</a></li>
<li><a class="" href="bubble-chart-gpas-of-course-at-columbia-university.html"><span class="header-section-number">46</span> Bubble chart — GPAs of Course at Columbia University</a></li>
<li><a class="" href="history-of-charts.html"><span class="header-section-number">47</span> History of Charts</a></li>
<li><a class="" href="cheetsheet-of-rna-seq-workflow-in-bioconductor.html"><span class="header-section-number">48</span> Cheetsheet of RNA-seq workflow in bioconductor</a></li>
<li><a class="" href="playful-r-packages-for-kids.html"><span class="header-section-number">49</span> Playful R Packages for Kids</a></li>
<li><a class="" href="edav-survey-and-analysis.html"><span class="header-section-number">50</span> EDAV Survey and Analysis</a></li>
<li><a class="" href="visualizing-graphs-and-networks.html"><span class="header-section-number">51</span> Visualizing graphs and networks</a></li>
<li><a class="" href="is-the-data-visualization-misleading-or-not---survey.html"><span class="header-section-number">52</span> Is the data visualization misleading or not - Survey</a></li>
<li class="book-part">Appendices</li>
<li><a class="" href="github-initial-setup.html"><span class="header-section-number">53</span> Github initial setup</a></li>
<li><a class="" href="tutorial-for-pull-request-mergers.html"><span class="header-section-number">54</span> Tutorial for pull request mergers</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/jtr13/cc22mw">View book source <i class="fa-solid fa-chart-scatter"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="chord-diagrams-using-circlize" class="section level1" number="36">
<h1>
<span class="header-section-number">36</span> Chord diagrams using circlize<a class="anchor" aria-label="anchor" href="#chord-diagrams-using-circlize"><i class="fas fa-link"></i></a>
</h1>
<p>Pia-Kelsey O’Neill</p>
<div id="overview-1" class="section level2" number="36.1">
<h2>
<span class="header-section-number">36.1</span> Overview<a class="anchor" aria-label="anchor" href="#overview-1"><i class="fas fa-link"></i></a>
</h2>
<p>Chord Diagrams are circular visualizations that depict inter-relationships between categorical data. They can be used to depict the flow of migration between countries, interactions within a set of people and (relevant to my research as a neuroscientist) the transitions between behaviors in animals. In this tutorial, we will begin by presenting the anatomy of a chord diagram. Next, we’ll review some considerations for deciding whether chord diagrams are appropriate for your dataset. We will then become familiar with the chordDiagram function in R using two data sets to demonstrate simple (interactions between main characters in the sitcom Friends) and more complex (migration between Canadian provinces) uses for this beautiful visualization tool.</p>
</div>
<div id="introduction-4" class="section level2" number="36.2">
<h2>
<span class="header-section-number">36.2</span> Introduction<a class="anchor" aria-label="anchor" href="#introduction-4"><i class="fas fa-link"></i></a>
</h2>
<div id="anatomy-of-a-chord-diagram" class="section level3" number="36.2.1">
<h3>
<span class="header-section-number">36.2.1</span> Anatomy of a chord diagram<a class="anchor" aria-label="anchor" href="#anatomy-of-a-chord-diagram"><i class="fas fa-link"></i></a>
</h3>
<p>A chord diagram shows the connections between different categories of data. Data is separated into groups that are organized as <strong>tracks</strong> or <strong>sectors</strong> around a circle. The size of the track is proportional to the number of data points in that category. <strong>Arcs</strong> or <strong>chords</strong> then form connections between the tracks running across the expanse of the circle. The number of chords that extend from a track depends on the number of target categories. There are two important features of the arc:</p>
<ol style="list-style-type: decimal">
<li><p>Color. If there is a direction of data flow between the categories (migrants from one country to another) the color of an arc can be used to depict this directionality. Thus, an arc’s color should match the color of the parent track it comes from. Note that not all data has a directionality and thus color is less important (see Friends example below).</p></li>
<li><p>Thickness. The thickness of the arc represents the size of the flow between two categories so a wider arc represents more data flow and a thinner arc less data flow.</p></li>
</ol>
</div>
<div id="considerations-for-making-a-chord-diagram" class="section level3" number="36.2.2">
<h3>
<span class="header-section-number">36.2.2</span> Considerations for making a Chord Diagram<a class="anchor" aria-label="anchor" href="#considerations-for-making-a-chord-diagram"><i class="fas fa-link"></i></a>
</h3>
<p>Chord diagrams have high aesthetic appeal, but they may not always be the most appropriate method to show relationships between entities of data even if that data is categorical. Here, we’ll discuss a few questions you might ask about your data to determine if a chord diagram might be appropriate for you.</p>
<ul>
<li><p><em>Are the relationships many-to-many?</em> Chord diagrams work best for data in which each category has a relationship with multiple other categories (including itself). In other words, they are useful for displaying data in which the relationships are many-to-many. Datasets with one-to-many relationships might be better visualizing using alluvial or sankey diagrams.</p></li>
<li><p><em>How many categories?</em> There are no limits on the number of groups that can be technically depicted on a chord diagram. But chord diagrams can become difficult to read and interpret when the number of groups is high. This is because many chords will be thinner and more difficult to disentangle. Adding interactivity can help by highlighting one sector at a time (see Interactivity using chorddiag below) but ideally, chord diagrams should contain about 10 or fewer categories. Adjustments might be made to the data beforehand to reduce the number of categories. For example, if you want to depict migration flow, instead of displaying migration between all countries in the dataset, you could group them into continents or regions or instead, display a subset of the countries.</p></li>
<li><p><em>What is the directionality of flow?</em> Chord diagrams can be directional or non-directional. Directional data will have two chords for each sector, a chord going from a given category out to a target and the other coming from that target. Non-directional or symmetric data on the other hand only have one value per chord (the same value for each direction). Adjustments in color can be made to the chord diagram depending on the directionality of the data.</p></li>
</ul>
</div>
</div>
<div id="the-chorddiagram-function" class="section level2" number="36.3">
<h2>
<span class="header-section-number">36.3</span> The chordDiagram function<a class="anchor" aria-label="anchor" href="#the-chorddiagram-function"><i class="fas fa-link"></i></a>
</h2>
<p>To create chord diagrams we will use the chordDiagram function from the <strong>circlize</strong> package in R. The circlize package itself contains methods from the circos tool used for graphing circular representations, especially used in the field of Genomics. The chordDiagram help documentation describes how data should be arranged. We will summarize this briefly here:</p>
<p>chordDiagram takes a datafame of three columns:</p>
<ul>
<li>rn: The first column is the “from” column in an adjacency list where each row is a sector/track/category name.</li>
<li>cn: The second column is the “to” column in an adjacency list where each row is a sector/track/category name.<br>
</li>
<li>value: the values for the interaction or relation between columns 1 and 2, the number of counts between the two categories.</li>
</ul>
</div>
<div id="basic-chord-diagrams-friends" class="section level2" number="36.4">
<h2>
<span class="header-section-number">36.4</span> Basic Chord diagrams: Friends<a class="anchor" aria-label="anchor" href="#basic-chord-diagrams-friends"><i class="fas fa-link"></i></a>
</h2>
<p>In this example, we will use chord diagrams to make a simple visualization of the relationships between six main characters from the popular TV show Friends. We will visualize dyadic (pairwise) storylines between characters in the show across all episodes. Note that only dyads will be considered so for example, in Season 1 Ep.1, a plotline involving Chandler Joey and Ross will not be included in our chord diagram. The relationships here are non-directional (or symmetrical) meaning if for example, Joey is in a plot line with Rachel then Rachel is in a plotline with Joey.</p>
<div class="sourceCode" id="cb326"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/apalbright/Friends/master/raw_data/friendsdata.csv"</span><span class="op">)</span></span>
<span><span class="co">#The six friends are defined as follows: Chandler=1 Joey=2 Monica=3 Phoebe=4 Rachel=5 Ross=6</span></span>
<span><span class="va">friends</span><span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/combn.html">combn</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Chandler"</span>, <span class="st">"Joey"</span>, <span class="st">"Monica"</span>, <span class="st">"Phoebe"</span>, <span class="st">"Rachel"</span>, <span class="st">"Ross"</span><span class="op">)</span>,<span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">relations</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>from<span class="op">=</span><span class="va">friends</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span>,to<span class="op">=</span><span class="va">friends</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span><span class="op">)</span></span>
<span><span class="va">dyads</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"12"</span>,<span class="st">"13"</span>,<span class="st">"14"</span>,<span class="st">"15"</span>,<span class="st">"16"</span>,<span class="st">"23"</span>,<span class="st">"24"</span>,<span class="st">"25"</span>,<span class="st">"26"</span>,<span class="st">"34"</span>,<span class="st">"35"</span>,<span class="st">"36"</span>,<span class="st">"45"</span>,<span class="st">"46"</span>,<span class="st">"56"</span><span class="op">)</span></span>
<span><span class="va">total</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">x</span> <span class="kw">in</span> <span class="va">dyads</span><span class="op">)</span><span class="op">{</span></span>
<span><span class="va">total</span><span class="op">[</span><span class="va">x</span><span class="op">]</span> <span class="op">=</span> <span class="va">df</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">dynamics</span><span class="op">==</span><span class="va">x</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">relations</span><span class="op">[</span><span class="st">"Total"</span><span class="op">]</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="va">total</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb327"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">chordDiagram</span><span class="op">(</span><span class="va">relations</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="chord_diagrams_files/figure-html/unnamed-chunk-3-1.png" width="80%" style="display: block; margin: auto;"></div>
<div id="customizing-color" class="section level3" number="36.4.1">
<h3>
<span class="header-section-number">36.4.1</span> Customizing color<a class="anchor" aria-label="anchor" href="#customizing-color"><i class="fas fa-link"></i></a>
</h3>
<p>The color schemes in chordDiagram are by default random. You’ll notice that if you run the above code again the colors will change, and will appear different every time the function is called. Sometimes the random colors are very close in the spectrum. In order to better distinguish between different arcs, you can specify colors as well as adjust the transparency and border features of the arcs.</p>
<div class="sourceCode" id="cb328"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">chordDiagram</span><span class="op">(</span><span class="va">relations</span>,</span>
<span>             grid.col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"#cc99c9"</span>, <span class="st">"#9ec1cf"</span>, <span class="st">"#9ee09e"</span>, <span class="st">"#fdfd97"</span>, <span class="st">"#feb144"</span>, <span class="st">"#ff6663"</span><span class="op">)</span>,</span>
<span>             transparency <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>             link.lwd <span class="op">=</span> <span class="fl">1</span>,    <span class="co"># Set arc line width</span></span>
<span>             link.border <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="co"># Set arc border color to black</span></span></code></pre></div>
<div class="inline-figure"><img src="chord_diagrams_files/figure-html/unnamed-chunk-4-1.png" width="80%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb329"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">circos.clear</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="adding-interactivity-using-the-chorddiag-package" class="section level3" number="36.4.2">
<h3>
<span class="header-section-number">36.4.2</span> Adding Interactivity using the chorddiag package<a class="anchor" aria-label="anchor" href="#adding-interactivity-using-the-chorddiag-package"><i class="fas fa-link"></i></a>
</h3>
<p>Highlighting specific relationships one-by-one can make the chord diagram easier to read and understand. Here we’ll add interactivity to our chord diagram using a second R package, <strong>chorddiag</strong>.</p>
<div class="sourceCode" id="cb330"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mat_friends</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">36</span>,<span class="fl">63</span>,<span class="fl">6</span>,<span class="fl">7</span>,<span class="fl">12</span>,</span>
<span>              <span class="fl">36</span>,<span class="fl">0</span>,<span class="fl">7</span>,<span class="fl">20</span>,<span class="fl">26</span>,<span class="fl">14</span>,</span>
<span>              <span class="fl">63</span>,<span class="fl">7</span>,<span class="fl">0</span>,<span class="fl">18</span>,<span class="fl">12</span>,<span class="fl">4</span>,</span>
<span>              <span class="fl">6</span>,<span class="fl">20</span>,<span class="fl">18</span>,<span class="fl">0</span>,<span class="fl">17</span>,<span class="fl">14</span>,</span>
<span>              <span class="fl">7</span>,<span class="fl">26</span>,<span class="fl">12</span>,<span class="fl">17</span>,<span class="fl">0</span>,<span class="fl">70</span>,</span>
<span>              <span class="fl">12</span>,<span class="fl">14</span>,<span class="fl">4</span>,<span class="fl">14</span>,<span class="fl">70</span>,<span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">relations2</span><span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="va">mat_friends</span>,nrow<span class="op">=</span><span class="fl">6</span>,ncol<span class="op">=</span><span class="fl">6</span>,byrow<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">friends</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Chandler"</span>, <span class="st">"Joey"</span>, <span class="st">"Monica"</span>, <span class="st">"Phoebe"</span>, <span class="st">"Rachel"</span>, <span class="st">"Ross"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dimnames.html">dimnames</a></span><span class="op">(</span><span class="va">relations2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>from <span class="op">=</span> <span class="va">friends</span>,</span>
<span>                    to <span class="op">=</span> <span class="va">friends</span><span class="op">)</span></span>
<span><span class="va">groupColors</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"#cc99c9"</span>, <span class="st">"#9ec1cf"</span>, <span class="st">"#9ee09e"</span>, <span class="st">"#fdfd97"</span>, <span class="st">"#feb144"</span>, <span class="st">"#ff6663"</span><span class="op">)</span></span>
<span><span class="fu">chorddiag</span><span class="op">(</span><span class="va">relations2</span>, groupColors<span class="op">=</span><span class="va">groupColors</span>, showTicks <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-4f7116046dc3e5351b43" style="width:80%;height:480px;" class="chorddiag html-widget"></div>
<script type="application/json" data-for="htmlwidget-4f7116046dc3e5351b43">{"x":{"matrix":[[0,36,63,6,7,12],[36,0,7,20,26,14],[63,7,0,18,12,4],[6,20,18,0,17,14],[7,26,12,17,0,70],[12,14,4,14,70,0]],"options":{"type":"directional","width":null,"height":null,"margin":100,"showGroupnames":true,"groupNames":["Chandler","Joey","Monica","Phoebe","Rachel","Ross"],"groupColors":["#cc99c9","#9ec1cf","#9ee09e","#fdfd97","#feb144","#ff6663"],"groupThickness":0.1,"groupPadding":0.0349065850398866,"groupnamePadding":[30,30,30,30,30,30],"groupnameFontsize":18,"groupedgeColor":null,"chordedgeColor":"#808080","categoryNames":null,"categorynamePadding":100,"categorynameFontsize":28,"showTicks":0,"tickInterval":1,"ticklabelFontsize":10,"fadeLevel":0.1,"showTooltips":true,"showZeroTooltips":true,"tooltipNames":["Chandler","Joey","Monica","Phoebe","Rachel","Ross"],"tooltipFontsize":12,"tooltipUnit":"","tooltipGroupConnector":" &#x25B6; ","precision":"null","clickAction":null,"clickGroupAction":null}},"evals":[],"jsHooks":[]}</script><p>Now, mousing over a chord highlights that particular relationship. We also simplified the visual by removing the tick marks on the outer edge of the circle. This data is instead displayed in the tag that pops up tag when you mouse over the chord.</p>
<p>Further improvements: Since we know that this dataset is non-directional, the color patterns above are not necessary. Mousing over a chord shows equal number of relations between Friends in a pair (i.e. Ross–&gt;Rachel and Rachel–&gt;Ross are both 70 storylines). With directional data, the color of a chord matches that of the parent track. Here, it would make more sense to use a gradient of color that changes from one Friend to the other. This is described in more detail in this <a href="https://www.visualcinnamon.com/2016/06/orientation-gradient-d3-chord-diagram/">blog post</a> by Nadieh Bremer.</p>
</div>
</div>
<div id="complex-chord-diagrams-canada-migration" class="section level2" number="36.5">
<h2>
<span class="header-section-number">36.5</span> Complex Chord Diagrams: Canada Migration<a class="anchor" aria-label="anchor" href="#complex-chord-diagrams-canada-migration"><i class="fas fa-link"></i></a>
</h2>
<p>We will now look at a more complex dataset that has more categories and is directional. We’ll use the Migration dataset from the carData package in R which shows the number of migrants that travel between 10 provinces in Canada within a period between 1966-1971.</p>
<div class="sourceCode" id="cb331"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">canada</span> <span class="op">=</span> <span class="va">Migration</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">source</span>, <span class="va">destination</span>, <span class="va">migrants</span><span class="op">)</span></span>
<span><span class="fu">chordDiagram</span><span class="op">(</span><span class="va">canada</span>,</span>
<span>             grid.col <span class="op">=</span> <span class="fu">brewer.pal</span><span class="op">(</span><span class="fl">10</span>, <span class="st">'Set3'</span><span class="op">)</span>,</span>
<span>             transparency <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>             link.lwd <span class="op">=</span> <span class="fl">.2</span>,    <span class="co"># Set arc line width</span></span>
<span>             link.border <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="co"># Set arc border color to black)</span></span></code></pre></div>
<div class="inline-figure"><img src="chord_diagrams_files/figure-html/unnamed-chunk-6-1.png" width="80%" style="display: block; margin: auto;"></div>
<div id="simplifying-data" class="section level3" number="36.5.1">
<h3>
<span class="header-section-number">36.5.1</span> Simplifying data<a class="anchor" aria-label="anchor" href="#simplifying-data"><i class="fas fa-link"></i></a>
</h3>
<p>We can simplify the data we’re visualizing by taking out some of the thinner chords. Perhaps we’re interested in the larger groups of migrants. We’ll select a threshold of groups greater than 12,000.</p>
<div class="sourceCode" id="cb332"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">canada_subset</span><span class="op">=</span><span class="va">canada</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">migrants</span><span class="op">&gt;</span><span class="fl">12000</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">source</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">chordDiagram</span><span class="op">(</span><span class="va">canada_subset</span>,</span>
<span>             grid.col <span class="op">=</span> <span class="fu">brewer.pal</span><span class="op">(</span><span class="fl">9</span>, <span class="st">'Set3'</span><span class="op">)</span>,</span>
<span>             transparency <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>             link.lwd <span class="op">=</span> <span class="fl">.2</span>,    <span class="co"># Set arc line width</span></span>
<span>             link.border <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="co"># Set arc border color to black)</span></span></code></pre></div>
<div class="inline-figure"><img src="chord_diagrams_files/figure-html/unnamed-chunk-7-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Doing this greatly simplifies our chord diagram and makes the individual chords a bit easier to distinguish. However, we do lose some data. For example, our thresholding cut out all migration data to and fron Prince Edward Island.</p>
</div>
</div>
<div id="summary" class="section level2" number="36.6">
<h2>
<span class="header-section-number">36.6</span> Summary<a class="anchor" aria-label="anchor" href="#summary"><i class="fas fa-link"></i></a>
</h2>
<p>Chord diagrams make attractive visualization tools for depicting the relationships between data categories. They are a great way to communicate information for the right data. However, they can fall prey to over-cluttering which can make the diagram difficult to interpret. Caution should be taken when deciding whether to use the chord diagram for your data. If it is reasonable to minimize the number of categories and connections you will display then the chord diagram might be helpful. Otherwise, using a different type of diagram such as alluvial, sankey, or arc diagrams may be more appropriate.</p>
</div>
<div id="sources-3" class="section level2" number="36.7">
<h2>
<span class="header-section-number">36.7</span> Sources<a class="anchor" aria-label="anchor" href="#sources-3"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li>
<a href="https://jokergoo.github.io/circlize_book/book/the-chorddiagram-function.html">Chapter 14</a> of the circlize package book which details the chordDiagram function.</li>
<li>
<a href="https://github.com/apalbright/Friends">Friends dataset</a> from researcher Alex Albright.</li>
<li>
<a href="https://github.com/mattflor/chorddiag">chorddiag</a> package from Matthias Flor.</li>
<li>Blog post on <a href="https://www.visualcinnamon.com/2016/06/orientation-gradient-d3-chord-diagram/">adding a color gradient to symmetric data</a> by Nadieh Bremer.</li>
<li>Storytelling using <a href="https://www.visualcinnamon.com/2014/12/using-data-storytelling-with-chord/">animated chord diagrams</a> by Nadieh Bremer.</li>
<li>Five <a href="https://www.streetlightdata.com/chord-diagrams-visualization-data/?type=blog/">example uses</a> of chord diagrams.</li>
</ol>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="cheatsheet-of-ggplot2-ggplot2-alluvial-heatmap.html"><span class="header-section-number">35</span> Cheatsheet of ggplot2 (ggplot2 &amp; alluvial &amp; heatmap)</a></div>
<div class="next"><a href="video-guide-to-reigniting-your-creavite-spark-for-visualizations.html"><span class="header-section-number">37</span> Video guide to reigniting your creavite spark for visualizations</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#chord-diagrams-using-circlize"><span class="header-section-number">36</span> Chord diagrams using circlize</a></li>
<li><a class="nav-link" href="#overview-1"><span class="header-section-number">36.1</span> Overview</a></li>
<li>
<a class="nav-link" href="#introduction-4"><span class="header-section-number">36.2</span> Introduction</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#anatomy-of-a-chord-diagram"><span class="header-section-number">36.2.1</span> Anatomy of a chord diagram</a></li>
<li><a class="nav-link" href="#considerations-for-making-a-chord-diagram"><span class="header-section-number">36.2.2</span> Considerations for making a Chord Diagram</a></li>
</ul>
</li>
<li><a class="nav-link" href="#the-chorddiagram-function"><span class="header-section-number">36.3</span> The chordDiagram function</a></li>
<li>
<a class="nav-link" href="#basic-chord-diagrams-friends"><span class="header-section-number">36.4</span> Basic Chord diagrams: Friends</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#customizing-color"><span class="header-section-number">36.4.1</span> Customizing color</a></li>
<li><a class="nav-link" href="#adding-interactivity-using-the-chorddiag-package"><span class="header-section-number">36.4.2</span> Adding Interactivity using the chorddiag package</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#complex-chord-diagrams-canada-migration"><span class="header-section-number">36.5</span> Complex Chord Diagrams: Canada Migration</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#simplifying-data"><span class="header-section-number">36.5.1</span> Simplifying data</a></li></ul>
</li>
<li><a class="nav-link" href="#summary"><span class="header-section-number">36.6</span> Summary</a></li>
<li><a class="nav-link" href="#sources-3"><span class="header-section-number">36.7</span> Sources</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/jtr13/cc22mw/blob/main/chord_diagrams.Rmd">View source <i class="fa-solid fa-chart-scatter"></i></a></li>
          <li><a id="book-edit" href="https://github.com/jtr13/cc22mw/edit/main/chord_diagrams.Rmd">Edit this page <i class="fa-solid fa-chart-scatter"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Community Contributions for EDAV Fall 2022 Mon/Wed</strong>" was written by . It was last built on 2022-11-19.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
