<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 15 Quantmod &amp; Tidyquant Tutorials and Comparison | Community Contributions for EDAV Fall 2022 Mon/Wed</title>
<meta name="description" content='Mildred Ouyang and Peishan Lyu #install.packages(“quantmod”) #install.packages("tidyverse") #install.packages("tidyquant") library("quantmod") library("tidyverse") library("tidyquant")  15.1...'>
<meta name="generator" content="bookdown 0.30 with bs4_book()">
<meta property="og:title" content="Chapter 15 Quantmod &amp; Tidyquant Tutorials and Comparison | Community Contributions for EDAV Fall 2022 Mon/Wed">
<meta property="og:type" content="book">
<meta property="og:description" content='Mildred Ouyang and Peishan Lyu #install.packages(“quantmod”) #install.packages("tidyverse") #install.packages("tidyquant") library("quantmod") library("tidyverse") library("tidyquant")  15.1...'>
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 15 Quantmod &amp; Tidyquant Tutorials and Comparison | Community Contributions for EDAV Fall 2022 Mon/Wed">
<meta name="twitter:description" content='Mildred Ouyang and Peishan Lyu #install.packages(“quantmod”) #install.packages("tidyverse") #install.packages("tidyquant") library("quantmod") library("tidyverse") library("tidyquant")  15.1...'>
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.1/transition.js"></script><script src="libs/bs3compat-0.4.1/tabs.js"></script><script src="libs/bs3compat-0.4.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="libs/proj4js-2.3.15/proj4.js"></script><link href="libs/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="libs/highcharts-9.3.1/highcharts.js"></script><script src="libs/highcharts-9.3.1/highcharts-3d.js"></script><script src="libs/highcharts-9.3.1/highcharts-more.js"></script><script src="libs/highcharts-9.3.1/modules/stock.js"></script><script src="libs/highcharts-9.3.1/modules/map.js"></script><script src="libs/highcharts-9.3.1/modules/data.js"></script><script src="libs/highcharts-9.3.1/modules/exporting.js"></script><script src="libs/highcharts-9.3.1/modules/offline-exporting.js"></script><script src="libs/highcharts-9.3.1/modules/drilldown.js"></script><script src="libs/highcharts-9.3.1/modules/item-series.js"></script><script src="libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script><script src="libs/highcharts-9.3.1/modules/annotations.js"></script><script src="libs/highcharts-9.3.1/modules/export-data.js"></script><script src="libs/highcharts-9.3.1/modules/funnel.js"></script><script src="libs/highcharts-9.3.1/modules/heatmap.js"></script><script src="libs/highcharts-9.3.1/modules/treemap.js"></script><script src="libs/highcharts-9.3.1/modules/sankey.js"></script><script src="libs/highcharts-9.3.1/modules/dependency-wheel.js"></script><script src="libs/highcharts-9.3.1/modules/organization.js"></script><script src="libs/highcharts-9.3.1/modules/solid-gauge.js"></script><script src="libs/highcharts-9.3.1/modules/streamgraph.js"></script><script src="libs/highcharts-9.3.1/modules/sunburst.js"></script><script src="libs/highcharts-9.3.1/modules/vector.js"></script><script src="libs/highcharts-9.3.1/modules/wordcloud.js"></script><script src="libs/highcharts-9.3.1/modules/xrange.js"></script><script src="libs/highcharts-9.3.1/modules/tilemap.js"></script><script src="libs/highcharts-9.3.1/modules/venn.js"></script><script src="libs/highcharts-9.3.1/modules/gantt.js"></script><script src="libs/highcharts-9.3.1/modules/timeline.js"></script><script src="libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script><script src="libs/highcharts-9.3.1/modules/bullet.js"></script><script src="libs/highcharts-9.3.1/modules/coloraxis.js"></script><script src="libs/highcharts-9.3.1/modules/dumbbell.js"></script><script src="libs/highcharts-9.3.1/modules/lollipop.js"></script><script src="libs/highcharts-9.3.1/modules/series-label.js"></script><script src="libs/highcharts-9.3.1/plugins/motion.js"></script><script src="libs/highcharts-9.3.1/custom/reset.js"></script><script src="libs/highcharts-9.3.1/modules/boost.js"></script><script src="libs/highchart-binding-0.9.4/highchart.js"></script><script src="libs/plotly-binding-4.10.1/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script><link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet">
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script><script src="libs/dygraphs-1.1.1/shapes.js"></script><script src="libs/moment-2.8.4/moment.js"></script><script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script><script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script><script src="libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script><script src="libs/Dygraph.Plotters.CandlestickPlotter-1.0/candlestick.js"></script><script src="libs/d3-4.13.0/d3.min.js"></script><link href="libs/profvis-0.3.6.9000/profvis.css" rel="stylesheet">
<script src="libs/profvis-0.3.6.9000/profvis.js"></script><script src="libs/profvis-0.3.6.9000/scroll.js"></script><link href="libs/highlight-6.2.0/textmate.css" rel="stylesheet">
<script src="libs/highlight-6.2.0/highlight.js"></script><script src="libs/profvis-binding-0.3.7/profvis.js"></script><link href="libs/collapsibleTree-0.1.6/collapsibleTree.css" rel="stylesheet">
<script src="libs/collapsibleTree-binding-0.1.7/collapsibleTree.js"></script><script src="libs/forceNetwork-binding-0.4/forceNetwork.js"></script><script src="libs/d3v3-3.5.3/./d3v3.min.js"></script><link href="libs/d3heatmapcore-0.0.0/heatmapcore.css" rel="stylesheet">
<script src="libs/d3heatmapcore-0.0.0/heatmapcore.js"></script><script src="libs/d3v3-tip-0.6.6/index.js"></script><script src="libs/d3heatmap-binding-0.9.0/d3heatmap.js"></script><script src="libs/d3-tip-0.8.1/index.js"></script><link href="libs/chorddiag-0.1.2.9000/chorddiag.css" rel="stylesheet">
<script src="libs/chorddiag-0.1.2.9000/chorddiag.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Community Contributions for EDAV Fall 2022 Mon/Wed</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Welcome!</a></li>
<li><a class="" href="community-contribution.html"><span class="header-section-number">2</span> Community Contribution</a></li>
<li><a class="" href="github-submission-instructions.html"><span class="header-section-number">3</span> GitHub submission instructions</a></li>
<li><a class="" href="sample-project.html"><span class="header-section-number">4</span> Sample project</a></li>
<li class="book-part">Cheatsheets</li>
<li><a class="" href="geographic-visualization-by-ggmap.html"><span class="header-section-number">5</span> Geographic visualization by ggmap</a></li>
<li><a class="" href="googlevis.html"><span class="header-section-number">6</span> googleVis</a></li>
<li><a class="" href="text-data-visualization-by-tidytext.html"><span class="header-section-number">7</span> Text data visualization by tidytext</a></li>
<li><a class="" href="cheatsheet-of-ggally-including-ggcoef_model-and-ggpairs.html"><span class="header-section-number">8</span> Cheatsheet of GGally (including ggcoef_model and ggpairs)</a></li>
<li><a class="" href="cheatsheet-for-data-science.html"><span class="header-section-number">9</span> Cheatsheet for data science</a></li>
<li><a class="" href="cheatsheet-for-plotly.html"><span class="header-section-number">10</span> Cheatsheet for Plotly</a></li>
<li><a class="" href="dataexplorer-cheatsheet-eda-made-easier.html"><span class="header-section-number">11</span> DataExplorer Cheatsheet, EDA made easier</a></li>
<li><a class="" href="data-visualization-with-ggplot2-r-and-matplotlib-python-cheat-sheet.html"><span class="header-section-number">12</span> Data Visualization with GGPlot2 (R) and MatPlotLib (Python) Cheat Sheet</a></li>
<li class="book-part">Tutorials</li>
<li><a class="" href="map-plots-with-highcharts.html"><span class="header-section-number">13</span> Map Plots with Highcharts</a></li>
<li><a class="" href="introduction-of-machine-learning-in-r.html"><span class="header-section-number">14</span> Introduction of machine learning in R</a></li>
<li><a class="active" href="quantmod-tidyquant-tutorials-and-comparison.html"><span class="header-section-number">15</span> Quantmod &amp; Tidyquant Tutorials and Comparison</a></li>
<li><a class="" href="learning-echarts4r-with-shiny.html"><span class="header-section-number">16</span> Learning echarts4r with shiny</a></li>
<li><a class="" href="picturing-inflation-an-exercise-in-web-scraping-plotly-and-timeseries.html"><span class="header-section-number">17</span> Picturing Inflation: An Exercise in Web Scraping, Plotly and Timeseries</a></li>
<li><a class="" href="introcuction-to-dygraph-for-financial-analysis.html"><span class="header-section-number">18</span> Introcuction to Dygraph for Financial Analysis</a></li>
<li><a class="" href="two-interesting-r-packages.html"><span class="header-section-number">19</span> Two Interesting R packages</a></li>
<li><a class="" href="tutorial-for-wordcloud2-package.html"><span class="header-section-number">20</span> Tutorial for wordcloud2 package</a></li>
<li><a class="" href="effcient-r.html"><span class="header-section-number">21</span> Effcient R</a></li>
<li><a class="" href="color-vision-deficiency.html"><span class="header-section-number">22</span> Color vision deficiency</a></li>
<li><a class="" href="tutorials-for-ggfortify-and-autoplotly.html"><span class="header-section-number">23</span> Tutorials for ggfortify and autoplotly</a></li>
<li><a class="" href="becoming-a-better-business-analyst.html"><span class="header-section-number">24</span> Becoming a better business analyst</a></li>
<li><a class="" href="cheatsheet-of-ggstatsplot-in-r.html"><span class="header-section-number">25</span> Cheatsheet of ggstatsplot in R</a></li>
<li><a class="" href="best-parallel-coordinates-r-package.html"><span class="header-section-number">26</span> Best Parallel Coordinates R Package</a></li>
<li><a class="" href="hypothesis-testing-guide-in-r.html"><span class="header-section-number">27</span> Hypothesis Testing Guide in R</a></li>
<li><a class="" href="python-tutorial-gather-data-through-api-and-web-scraping.html"><span class="header-section-number">28</span> Python tutorial: gather data through API and web scraping</a></li>
<li><a class="" href="an-interactive-dashboard-covid-19-visualization-with-shiny-and-plotly.html"><span class="header-section-number">29</span> An Interactive Dashboard: COVID-19 Visualization with Shiny and Plotly</a></li>
<li><a class="" href="interactive-plots-for-different-types-of-graphs-in-r.html"><span class="header-section-number">30</span> Interactive plots for different types of graphs in R</a></li>
<li><a class="" href="introduction-to-plotly-in-r.html"><span class="header-section-number">31</span> Introduction to Plotly in R</a></li>
<li><a class="" href="machine-learning-interview-mindmap-and-commonly-asked-questions.html"><span class="header-section-number">32</span> Machine Learning Interview mindmap and commonly asked questions</a></li>
<li><a class="" href="data-visualization-with-seaborn.html"><span class="header-section-number">33</span> Data Visualization with Seaborn</a></li>
<li><a class="" href="tutorial-of-making-different-types-of-charts-interactive.html"><span class="header-section-number">34</span> Tutorial of making different types of charts interactive</a></li>
<li><a class="" href="cheatsheet-of-ggplot2-ggplot2-alluvial-heatmap.html"><span class="header-section-number">35</span> Cheatsheet of ggplot2 (ggplot2 &amp; alluvial &amp; heatmap)</a></li>
<li><a class="" href="chord-diagrams-using-circlize.html"><span class="header-section-number">36</span> Chord diagrams using circlize</a></li>
<li><a class="" href="video-guide-to-reigniting-your-creavite-spark-for-visualizations.html"><span class="header-section-number">37</span> Video guide to reigniting your creavite spark for visualizations</a></li>
<li><a class="" href="tutorial-on-machine-learning-in-r.html"><span class="header-section-number">38</span> Tutorial on Machine Learning in R</a></li>
<li><a class="" href="data-importance-visualization.html"><span class="header-section-number">39</span> Data importance &amp; visualization</a></li>
<li><a class="" href="time-series-visualization---r-tutorial.html"><span class="header-section-number">40</span> Time Series Visualization - R tutorial</a></li>
<li><a class="" href="introduction-6.html"><span class="header-section-number">41</span> Introduction</a></li>
<li><a class="" href="S3.html"><span class="header-section-number">42</span> Section 3.Time series visualization with ggplot and ggplot2</a></li>
<li><a class="" href="autocorrelation-plot.html"><span class="header-section-number">43</span> AutoCorrelation plot</a></li>
<li><a class="" href="S4.html"><span class="header-section-number">44</span> Section 4. Time series visualization with TSstudio: ts_plot</a></li>
<li><a class="" href="S5.html"><span class="header-section-number">45</span> Section 5. Time series visualization with Plotly</a></li>
<li><a class="" href="edav-survey-and-analysis.html"><span class="header-section-number">46</span> EDAV Survey and Analysis</a></li>
<li><a class="" href="visualizing-graphs-and-networks.html"><span class="header-section-number">47</span> Visualizing graphs and networks</a></li>
<li class="book-part">Appendices</li>
<li><a class="" href="github-initial-setup.html"><span class="header-section-number">48</span> Github initial setup</a></li>
<li><a class="" href="tutorial-for-pull-request-mergers.html"><span class="header-section-number">49</span> Tutorial for pull request mergers</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/jtr13/cc22mw">View book source <i class="fa-solid fa-chart-scatter"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="quantmod-tidyquant-tutorials-and-comparison" class="section level1" number="15">
<h1>
<span class="header-section-number">15</span> Quantmod &amp; Tidyquant Tutorials and Comparison<a class="anchor" aria-label="anchor" href="#quantmod-tidyquant-tutorials-and-comparison"><i class="fas fa-link"></i></a>
</h1>
<p>Mildred Ouyang and Peishan Lyu</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#install.packages(“quantmod”) </span></span>
<span><span class="co">#install.packages("tidyverse")</span></span>
<span><span class="co">#install.packages("tidyquant")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="http://www.quantmod.com">"quantmod"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://tidyverse.tidyverse.org">"tidyverse"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/business-science/tidyquant">"tidyquant"</a></span><span class="op">)</span></span></code></pre></div>
<div id="motivation-1" class="section level2" number="15.1">
<h2>
<span class="header-section-number">15.1</span> Motivation:<a class="anchor" aria-label="anchor" href="#motivation-1"><i class="fas fa-link"></i></a>
</h2>
<p>All the Quantmod tutorials and documentations we have found did not provide a quick starter guide to beginners of R or people new to using Quantmod. The goal of our tutorial for Quantmod is to teach starters how to use the most essential exploratory data analysis tools and the most commonly used functions in Quantmod. We also hope that our tutorial can serve as a bridge for users to explore more advanced features of Quantmod in the future.</p>
<p>We feel that our tutorial does a nice job in telling the users the tasks can be completed by some cores functions in Quantmod and Tidyquant. To make improvements, we might create an additional cheatsheet to illustrate the required arguments of each function so that users can conveniently make flexible and more advanced adjustments based on their needs.</p>
</div>
<div id="quantmod" class="section level2" number="15.2">
<h2>
<span class="header-section-number">15.2</span> Quantmod<a class="anchor" aria-label="anchor" href="#quantmod"><i class="fas fa-link"></i></a>
</h2>
<div id="getting-data" class="section level3" number="15.2.1">
<h3>
<span class="header-section-number">15.2.1</span> Getting Data:<a class="anchor" aria-label="anchor" href="#getting-data"><i class="fas fa-link"></i></a>
</h3>
<p>The function used to load the data is : getSymbols(). This will return an object which stores the data.</p>
<p>If not specifying the source (src=“source_name”) in getSymbols(), Quantmod will use the default source which is Yahoo Finance. Some common data sources to download data from are:Yahoo, the Federal Reserve Economic Data (FRED), local database source using MySQL, csv files, and so on.(Note: Google Finance is no longer a data source. It stopped providing data in March, 2018.)</p>
<p>If getting data from local database using MySQL, username and password to access the database can be stored using the wrapper function: setDefaults(getSymbols.MySQL, user=‘____’, password=‘____’, dbname=‘_____’). After setting up, the user can get data using getSymbols() and change src=‘MySQL’.</p>
<p>Data range can be specified by passing in range start and end dates, but end date is optional. If no end date, the latest available data will be shown.</p>
<p>Example:</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/quantmod/man/getSymbols.html">getSymbols</a></span><span class="op">(</span><span class="st">"META"</span>, src<span class="op">=</span><span class="st">"yahoo"</span>, from<span class="op">=</span><span class="st">"2022-01-01"</span>, to<span class="op">=</span><span class="st">"2022-6-30"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "META"</code></pre>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/quantmod/man/getSymbols.html">getSymbols</a></span><span class="op">(</span><span class="st">"TSLA;AAPL;UBER"</span>, src<span class="op">=</span><span class="st">"yahoo"</span>, from<span class="op">=</span><span class="st">"2022-01-01"</span>, to<span class="op">=</span><span class="st">"2022-6-30"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "TSLA" "AAPL" "UBER"</code></pre>
</div>
<div id="data-visualization" class="section level3" number="15.2.2">
<h3>
<span class="header-section-number">15.2.2</span> Data Visualization:<a class="anchor" aria-label="anchor" href="#data-visualization"><i class="fas fa-link"></i></a>
</h3>
<p>There are three primary chart types in Quantmod: bar chart, candle chart, and line chart.<br>
Primary function to create charts: chartSeries() - by default, the open-high-low-close chart and the volume data will be shown.</p>
<p>Wrapper functions: barChart(), candleChart(), lineChart()</p>
<p>Modify the original chart: reChart() - can dynamically change the chart by only specifying the changing argument(s). This can be used to can the log-scale the y-axis, subset the data to show a specific time period, and set the ticks, range of y-axis, chart title, colors, and so on.</p>
<p>Examples:</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/quantmod/man/chartSeries.html">chartSeries</a></span><span class="op">(</span><span class="va">META</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-4-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>The above shows the open-high-low-close chart and the volume data. The orange color signifies that the closing price was lower than the opening price of the same day. The green color signifies the opposite.</p>
<p>Users can also add stock indicators to the chart for analysis. There are 26 indicators available in Quantmod. Some commonly used stock indicators are: Bollinger Bands - addBBands(), Moving Average Convergence Divergence - addMACD(), Commodity Channel Index - addCCI(), Volume - addVo(), Williams %R - addWPR(), Simple Moving Average - addSMA(), Rate of Change - addROC(), Momentum - addMomentum(), Parabolic Stop and Reverse - addSAR(), and so on.</p>
<p>Example:<br>
The below example adds the Moving Average Convergence Divergence (MACD) indicator to the original graph. The below method will output two graphs, one original and one with the MACD. Later, we will introduce a way to only output one graph. The MACD has the following arguments: fast, slow, signal, type, histogram, and col. The fast and slow address the length of fast and slow periods. The signal addresses the length of the signal period. The type indicates which type of moving average to use. The histogram takes in boolean values to either or not output a histogram. Lastly, the col is optional. It changes the color for the lines. The second graph below is drawn with the default values of MACD (fast = 12, slow = 26, signal = 9, type = “EMA”, histogram = TRUE).</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/quantmod/man/chartSeries.html">chartSeries</a></span><span class="op">(</span><span class="va">META</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-5-1.png" width="80%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/quantmod/man/addMACD.html">addMACD</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-5-2.png" width="80%" style="display: block; margin: auto;"></div>
<p>The indicator can also be passed directly as an argument into the chartSeries function. In this way, only one graph will be drawn.</p>
<p>Example:<br>
The below chart shows the Bollinger Bands drawn with default argument values. The default sets the moving average period (n) to 20, the standard deviation (sd) to 2, moving average type (maType) to simple moving average (can also be changed to weighted moving avarage and so on), and also the indicator to draw (draw) to ‘bands’ (can also be changed to percent or width).</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/quantmod/man/chartSeries.html">chartSeries</a></span><span class="op">(</span><span class="va">META</span>, TA <span class="op">=</span> <span class="st">"addBBands(n=20, sd=2, maType = 'SMA', draw = 'bands')"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-6-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>The below chart shows the moving average over a period of 20 days.</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/quantmod/man/chartSeries.html">chartSeries</a></span><span class="op">(</span><span class="va">META</span>, TA <span class="op">=</span> <span class="st">"addSMA(n=20)"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-7-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>The below chart shows the moving average over a period of 40 days.</p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/quantmod/man/chartSeries.html">chartSeries</a></span><span class="op">(</span><span class="va">META</span>, TA <span class="op">=</span> <span class="st">"addSMA(n=40)"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-8-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Multiple indicators can be passed in together and reflect on the same graph.<br>
The below graph shows both the Bollinger Bands and the Moving Average Convergence Divergence indicator (with default argument values).</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/quantmod/man/chartSeries.html">chartSeries</a></span><span class="op">(</span><span class="va">META</span>, TA <span class="op">=</span> <span class="st">"addBBands();addMACD()"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-9-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>The below line chart plots the opening data for the stock.</p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/quantmod/man/chartSeries.html">lineChart</a></span><span class="op">(</span><span class="va">META</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-10-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>The below bar chart plots the highest, lowest, opening(the right horizontal line), and closing (the left horizontal line) prices of the stock.</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/quantmod/man/chartSeries.html">barChart</a></span><span class="op">(</span><span class="va">META</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-11-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>If only want to show the highest, lowest, and closing price of one day, the user can do the following:</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/quantmod/man/chartSeries.html">barChart</a></span><span class="op">(</span><span class="va">META</span>, bar.type<span class="op">=</span><span class="st">'hlc'</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-12-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>The candle chart below graphs the OHLC data.</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/quantmod/man/chartSeries.html">candleChart</a></span><span class="op">(</span><span class="va">META</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-13-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Customization of the chart’s color can be done by passing the arguments multi.col and theme.</p>
<p>multi.col - changes the color of the bars<br>
theme - changes the color of the background</p>
<p>Examples:</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/quantmod/man/chartSeries.html">chartSeries</a></span><span class="op">(</span><span class="va">META</span>, multi.col <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-14-1.png" width="80%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/quantmod/man/chartSeries.html">chartSeries</a></span><span class="op">(</span><span class="va">META</span>, theme <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-15-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Moreover, Quantmod also allows only graphing a portion of the data. The subset argument can be used to select a specific range of data to graph.</p>
<p>Example:
The below graph only plots the first two months of data.</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/quantmod/man/chartSeries.html">chartSeries</a></span><span class="op">(</span><span class="va">META</span>, multi.col <span class="op">=</span> <span class="cn">TRUE</span>, theme <span class="op">=</span> <span class="st">"white"</span>, subset <span class="op">=</span> <span class="st">"2022-1::2022-2"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-16-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Subset can also take in value like “first 3 months” and “last 6 weeks”.</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/quantmod/man/chartSeries.html">chartSeries</a></span><span class="op">(</span><span class="va">META</span>, subset <span class="op">=</span> <span class="st">"last 6 weeks"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-17-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Furthermore, Qauntmod allows modifications of the original graph without restating all the original arguments again.</p>
<p>Example:</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/quantmod/man/chartSeries.html">chartSeries</a></span><span class="op">(</span><span class="va">META</span>, multi.col <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-18-1.png" width="80%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/quantmod/man/chartSeries.html">reChart</a></span><span class="op">(</span>major.ticks <span class="op">=</span> <span class="st">"months"</span><span class="op">)</span> <span class="co"># change the tick mark to months</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-18-2.png" width="80%" style="display: block; margin: auto;"></div>
</div>
</div>
<div id="tidyquant" class="section level2" number="15.3">
<h2>
<span class="header-section-number">15.3</span> Tidyquant<a class="anchor" aria-label="anchor" href="#tidyquant"><i class="fas fa-link"></i></a>
</h2>
<p>Tidyquant integrates quantmod, xts, zoo, TTR, and PerformanceAnalytics packages, and we can use it to generate tidier graphs than using Quantmod only. In general, we can use Tidyquant to compare stock prices, evaluate stock performance, and evaluate portfolio performance. We can easily perform financial analysis using some core tidyquant functions to get stock indexes/exchange, get quantitative data from various web-sources, transmute and mutate quantitative data, and analyze the performance of assets and portfolios.</p>
<p>The major functions introduced below are originally adapted from the documentation:</p>
<p><a href="https://cran.r-project.org/web/packages/tidyquant/" class="uri">https://cran.r-project.org/web/packages/tidyquant/</a></p>
<p>which contains Vignettes introducing core functions and charting with Tidyquant.</p>
<p>We feel that the original documentation with core functions is very tidy and useful, but the authors derive different datasets using different tools, which makes it a little hard to compare similarities and differences among tools for deriving data. We attempted to use different tools to achieve data of the same four companies and included some details and new tips. This tutorial provides some basic ideas in how to get data, clean data, and chart with Tidyquant.</p>
<div id="before-getting-data" class="section level3" number="15.3.1">
<h3>
<span class="header-section-number">15.3.1</span> Before Getting Data<a class="anchor" aria-label="anchor" href="#before-getting-data"><i class="fas fa-link"></i></a>
</h3>
<p>Before getting quantitative data, we want to check the list of stock index we could possibly retrieve. There are eighteen available (only 5 are shown here). They measure the performance of assets from different perspectives.</p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/tq_index.html">tq_index_options</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "DOW"       "DOWGLOBAL" "SP400"     "SP500"     "SP600"</code></pre>
<p>There are three stock exchanges (where exhange of securities happen) available.</p>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/tq_index.html">tq_exchange_options</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "AMEX"   "NASDAQ" "NYSE"</code></pre>
<p>After browsing the specific data sources accessible from tq_get, we can get daily stock data from Yahoo Finance, economic data from FRED and Quandl, as well as financial data from Quandl, Tiingo, Alpha Vantage, and Bloomberg’s Financial API (though paid account is required for Bloomberg).</p>
<ul>
<li><p>“stock.prices” - Yahoo Finance</p></li>
<li><p>“economic.data” - FRED</p></li>
<li><p>“quandl” and “quandl.datatable” - Nasdaq API</p></li>
<li><p>“tiingo”, “tiingo.iex”, “tiingo.crypto” - Tiingo API</p></li>
<li><p>“alphavantager”, “alphavantage” - Alpha Vantage API</p></li>
<li><p>“rblpapi” - Bloomberg</p></li>
</ul>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/tq_get.html">tq_get_options</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  [1] "stock.prices"       "stock.prices.japan" "dividends"         
##  [4] "splits"             "economic.data"      "quandl"            
##  [7] "quandl.datatable"   "tiingo"             "tiingo.iex"        
## [10] "tiingo.crypto"      "alphavantager"      "alphavantage"      
## [13] "rblpapi"</code></pre>
</div>
<div id="getting-data-1" class="section level3" number="15.3.2">
<h3>
<span class="header-section-number">15.3.2</span> Getting Data<a class="anchor" aria-label="anchor" href="#getting-data-1"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Example for calling tq_index(“INDEXNAME”) function</strong></p>
<p>SP500 provides a dataset with 8 columns with a capitalization-weighted index such that companies with a higher market cap receives a higher weighting in the index.</p>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/tq_index.html">tq_index</a></span><span class="op">(</span><span class="st">"SP500"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 503 × 8
##    symbol company                    ident…¹ sedol weight sector share…² local…³
##    &lt;chr&gt;  &lt;chr&gt;                      &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;  
##  1 AAPL   Apple Inc.                 037833… 2046… 0.0667 Infor…  1.69e8 USD    
##  2 MSFT   Microsoft Corporation      594918… 2588… 0.0545 Infor…  8.33e7 USD    
##  3 AMZN   Amazon.com Inc.            023135… 2000… 0.0258 Consu…  9.90e7 USD    
##  4 GOOGL  Alphabet Inc. Class A      02079K… BYVY… 0.0169 Commu…  6.70e7 USD    
##  5 BRK-B  Berkshire Hathaway Inc. C… 084670… 2073… 0.0165 Finan…  2.02e7 USD    
##  6 UNH    UnitedHealth Group Incorp… 91324P… 2917… 0.0153 Healt…  1.05e7 USD    
##  7 TSLA   Tesla Inc                  88160R… B616… 0.0153 Consu…  2.98e7 USD    
##  8 GOOG   Alphabet Inc. Class C      02079K… BYY8… 0.0152 Commu…  5.99e7 USD    
##  9 XOM    Exxon Mobil Corporation    30231G… 2326… 0.0139 Energy  4.66e7 USD    
## 10 JNJ    Johnson &amp; Johnson          478160… 2475… 0.0138 Healt…  2.94e7 USD    
## # … with 493 more rows, and abbreviated variable names ¹​identifier,
## #   ²​shares_held, ³​local_currency</code></pre>
<p><strong>Examples for calling tq_get() function</strong></p>
<p>(1). Getting data from Yahoo!Finance - set tq_get(…get = “stock.prices”…)</p>
<p>If we want to get stock prices of companies, Yahoo!Finance is a great choice.</p>
<p>Assume we want stock prices of Apple, Meta, Tesla, and Uber:</p>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">aapl_price_yahoo</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/tq_get.html">tq_get</a></span><span class="op">(</span><span class="st">"AAPL"</span>, get <span class="op">=</span> <span class="st">"stock.prices"</span>, from <span class="op">=</span> <span class="st">"2022-01-01"</span>, to <span class="op">=</span> <span class="st">"2022-06-30"</span><span class="op">)</span></span>
<span><span class="va">aapl_price_yahoo</span></span></code></pre></div>
<pre><code>## # A tibble: 123 × 8
##    symbol date        open  high   low close    volume adjusted
##    &lt;chr&gt;  &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
##  1 AAPL   2022-01-03  178.  183.  178.  182. 104487900     181.
##  2 AAPL   2022-01-04  183.  183.  179.  180.  99310400     179.
##  3 AAPL   2022-01-05  180.  180.  175.  175.  94537600     174.
##  4 AAPL   2022-01-06  173.  175.  172.  172   96904000     171.
##  5 AAPL   2022-01-07  173.  174.  171.  172.  86709100     171.
##  6 AAPL   2022-01-10  169.  172.  168.  172. 106765600     171.
##  7 AAPL   2022-01-11  172.  175.  171.  175.  76138300     174.
##  8 AAPL   2022-01-12  176.  177.  175.  176.  74805200     175.
##  9 AAPL   2022-01-13  176.  177.  172.  172.  84505800     171.
## 10 AAPL   2022-01-14  171.  174.  171.  173.  80440800     172.
## # … with 113 more rows</code></pre>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_price_yahoo</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/tq_get.html">tq_get</a></span><span class="op">(</span><span class="st">"META"</span>, get <span class="op">=</span> <span class="st">"stock.prices"</span>, from <span class="op">=</span> <span class="st">"2022-01-01"</span>, to <span class="op">=</span> <span class="st">"2022-06-30"</span><span class="op">)</span></span>
<span><span class="va">meta_price_yahoo</span> </span></code></pre></div>
<pre><code>## # A tibble: 123 × 8
##    symbol date        open  high   low close   volume adjusted
##    &lt;chr&gt;  &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1 META   2022-01-03  338.  341.  337.  339. 14537900     339.
##  2 META   2022-01-04  340.  343.  332.  337. 15998000     337.
##  3 META   2022-01-05  333.  336.  324.  324. 20564500     324.
##  4 META   2022-01-06  323.  339.  323.  332. 27962800     332.
##  5 META   2022-01-07  333.  337   329.  332. 14722000     332.
##  6 META   2022-01-10  325.  328.  315.  328. 24942400     328.
##  7 META   2022-01-11  327.  335.  325.  334. 16226800     334.
##  8 META   2022-01-12  335.  336.  330.  333. 14104900     333.
##  9 META   2022-01-13  335.  336.  326.  326. 14797100     326.
## 10 META   2022-01-14  322.  333.  321.  332. 16868500     332.
## # … with 113 more rows</code></pre>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tsla_price_yahoo</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/tq_get.html">tq_get</a></span><span class="op">(</span><span class="st">"TSLA"</span>, get <span class="op">=</span> <span class="st">"stock.prices"</span>, from <span class="op">=</span> <span class="st">"2022-01-01"</span>, to <span class="op">=</span> <span class="st">"2022-06-30"</span><span class="op">)</span></span>
<span><span class="va">tsla_price_yahoo</span></span></code></pre></div>
<pre><code>## # A tibble: 123 × 8
##    symbol date        open  high   low close    volume adjusted
##    &lt;chr&gt;  &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
##  1 TSLA   2022-01-03  383.  400.  379.  400. 103931400     400.
##  2 TSLA   2022-01-04  397.  403.  374.  383. 100248300     383.
##  3 TSLA   2022-01-05  382.  390.  360.  363.  80119800     363.
##  4 TSLA   2022-01-06  359   363.  340.  355.  90336600     355.
##  5 TSLA   2022-01-07  360.  360.  337.  342.  84164700     342.
##  6 TSLA   2022-01-10  333.  353.  327.  353.  91815000     353.
##  7 TSLA   2022-01-11  351.  359.  346.  355.  66063300     355.
##  8 TSLA   2022-01-12  360.  372.  358.  369.  83739000     369.
##  9 TSLA   2022-01-13  370.  372.  342.  344.  97209900     344.
## 10 TSLA   2022-01-14  340.  351.  338.  350.  72924300     350.
## # … with 113 more rows</code></pre>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">uber_price_yahoo</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/tq_get.html">tq_get</a></span><span class="op">(</span><span class="st">"UBER"</span>, get <span class="op">=</span> <span class="st">"stock.prices"</span>, from <span class="op">=</span> <span class="st">"2022-01-01"</span>, to <span class="op">=</span> <span class="st">"2022-06-30"</span><span class="op">)</span></span>
<span><span class="va">uber_price_yahoo</span></span></code></pre></div>
<pre><code>## # A tibble: 123 × 8
##    symbol date        open  high   low close   volume adjusted
##    &lt;chr&gt;  &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1 UBER   2022-01-03  42.5  44.4  41.9  44.0 26089000     44.0
##  2 UBER   2022-01-04  44.2  44.8  42.6  44.4 30845300     44.4
##  3 UBER   2022-01-05  44.3  45.9  42.9  43.2 28498700     43.2
##  4 UBER   2022-01-06  43.1  44.1  41.0  42.0 32434300     42.0
##  5 UBER   2022-01-07  42    42.7  41.2  41.5 24875800     41.5
##  6 UBER   2022-01-10  41.5  42.8  40.2  42.6 29783800     42.6
##  7 UBER   2022-01-11  42.4  44.2  42.2  43.6 22161000     43.6
##  8 UBER   2022-01-12  44.0  44.1  42.5  43.0 18993900     43.0
##  9 UBER   2022-01-13  43.3  43.9  42.7  42.9 17190100     42.9
## 10 UBER   2022-01-14  42.4  42.7  40.4  41.5 25817800     41.5
## # … with 113 more rows</code></pre>
<p>(2). Getting data from FRED Economic data - tq_get() function - set tq_get(…get = “economic.data”…)</p>
<p>When considering if we want to retrieve data from FRED, we consider it covers major areas of macroeconoc analysis, including some major indicators:</p>
<ul>
<li><p>Growth: GDP, real GDP, real potential GDP</p></li>
<li><p>Prices and inflation: CPI for all urban consumers for all items/all items less food &amp; energy, GDP: implicit price deflater</p></li>
<li><p>Money Supply: St.Louise adjusted monetary, M1 money stock, M2 money stock, velocity of M1 money stock, velocity of M2 money stock</p></li>
<li><p>Interest rates: effective federal funds rate, 3-month treasury bill, 5/10/30 year treasury constant maturity rate, 5/10 year breakeven inflation rate, 5 year forward inflation expectation rate, TED Spread, bank prime loan rate</p></li>
<li><p>Employment: Civilian Unemployment Rate, Natural Long-Term/Short-Term Rate of Unemployment, Civilian Labor Force Participation Rate, Civilian Employment-Population Ratio, Unemployed, All Employees: Total nonfarm, All Employees: Manufacturing, Initial Claims, 4-Week Moving Average of Initial Claims</p></li>
<li><p>Income and expenditure: Real Median Household Income in the United States, Real Disposable Personal Income, Personal Consumption Expenditures, Personal Consumption Expenditures: Durable Goods, Personal Saving Rate, Real Retail and Food Services Sales, Disposable personal income.<br></p></li>
<li><p>Other economic indicators: Industrial Production Index, Capacity Utilization: Total Industry, Housing Starts: Total: New Privately Owned Housing Units Started, Gross Private Domestic Investment, Corporate Profits After Tax (without IVA and CCAdj), St. Louis Fed Financial Stress Index, Crude Oil Prices: West Texas Intermediate (WTI) - Cushing, Oklahoma, Leading Index for the United States, Trade Weighted U.S. Dollar Index: Major Currencies, Trade Weighted U.S. Dollar Index: Broad.<br></p></li>
<li><p>Debt: Federal Debt: Total Public Debt, Federal Debt: Total Public Debt as Percent of Gross Domestic Product, Excess Reserves of Depository Institutions, Commercial and Industrial Loans, All Commercial Banks</p></li>
</ul>
<p>(The code for these indicators can be accessed from the website:
<a href="https://data.nasdaq.com/data/FRED-federal-reserve-economic-data/documentation" class="uri">https://data.nasdaq.com/data/FRED-federal-reserve-economic-data/documentation</a>)</p>
<p>Assume we want to inspect the GDP within a given tiem window, we found only period data is available.</p>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gdp_fred</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/tq_get.html">tq_get</a></span><span class="op">(</span><span class="st">"GDP"</span>, get <span class="op">=</span> <span class="st">"economic.data"</span>, from <span class="op">=</span> <span class="st">"2010-01-01"</span>, to <span class="op">=</span> <span class="st">"2022-01-01"</span><span class="op">)</span></span>
<span><span class="va">gdp_fred</span> </span></code></pre></div>
<pre><code>## # A tibble: 49 × 3
##    symbol date        price
##    &lt;chr&gt;  &lt;date&gt;      &lt;dbl&gt;
##  1 GDP    2010-01-01 14765.
##  2 GDP    2010-04-01 14980.
##  3 GDP    2010-07-01 15142.
##  4 GDP    2010-10-01 15309.
##  5 GDP    2011-01-01 15351.
##  6 GDP    2011-04-01 15558.
##  7 GDP    2011-07-01 15648.
##  8 GDP    2011-10-01 15842.
##  9 GDP    2012-01-01 16069.
## 10 GDP    2012-04-01 16207.
## # … with 39 more rows</code></pre>
<p>(3). Getting data from Nasdaq Data Link (Quandl) API - set tq_get(…get = “quandl”…)</p>
<ol style="list-style-type: lower-alpha">
<li>quandl_search(… query = “KEY IN THE DATASET”…)<br>
This is useful for deciding which dataset we want to use. We can get info about the newest and oldest available date as well as the frequency of data. If we want to look for all datasets with “GDP” as part of the name, we set query = “GDP”.<br>
We can also set database_code = “CODENAME” if already we know the code of the dataset. We can also set the number of returns per page.</li>
</ol>
<p>Datasets are available here: <a href="https://data.nasdaq.com/search" class="uri">https://data.nasdaq.com/search</a></p>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/quandl_search.html">quandl_search</a></span><span class="op">(</span>query <span class="op">=</span> <span class="st">"GDP"</span>, page <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Gross Domestic Product
## Code: FRED/GDP
## Desc: Units: Billions of Dollars
## Seasonal Adjustment: Seasonally Adjusted Annual Rate
## Notes: A Guide to the National Income and Product Accounts of the United States (NIPA) - (http://www.bea.gov/national/pdf/nipaguid.pdf)
## Freq: quarterly
## Cols: Date | Value
## 
## (GDPS) Adjusted Stock Prices
## Code: OTCB/GDPS
## Desc:  &lt;b&gt;Ticker&lt;/b&gt;: GDPS &lt;br&gt; &lt;br&gt; &lt;b&gt;Exchange&lt;/b&gt;: OTCB &lt;br&gt; &lt;br&gt; Columns: &lt;br&gt; &lt;br&gt; Open,High,Low,Close,Volume are adjusted and shown in USD currency. &lt;br&gt; &lt;br&gt; Adjustment Factor shows the factor by which prices are adjusted on days which adjustments take place &lt;br&gt; &lt;br&gt; Adjustment Type is a number representing the type of adjustment. Refer to documentation for more information on these codes.
## Freq: daily
## Cols: Date | Open | High | Low | Close | Volume | Adjustment Factor | Adjustment Type
## 
## Goldplat Plc (GDP) Adjusted Stock Prices
## Code: XLON/GDP
## Desc:  &lt;b&gt;Ticker&lt;/b&gt;: GDP &lt;br&gt; &lt;br&gt; &lt;b&gt;Exchange&lt;/b&gt;: XLON &lt;br&gt; &lt;br&gt; Columns: &lt;br&gt; &lt;br&gt; Open,High,Low,Close,Volume are adjusted and shown in GBX currency. &lt;br&gt; &lt;br&gt; Adjustment Factor shows the factor by which prices are adjusted on days which adjustments take place &lt;br&gt; &lt;br&gt; Adjustment Type is a number representing the type of adjustment. Refer to documentation for more information on these codes.
## Freq: daily
## Cols: Date | Open | High | Low | Close | Volume | Adjustment Factor | Adjustment Type
## 
## GDP Volatility &amp; Option Implied Surface
## Code: OPT/GDP
## Desc: &lt;p&gt;&lt;p&gt;Implied volatility surface for GDP.&lt;/p&gt;&lt;p&gt;For more information please view &lt;a href='https://www.quandl.com/data/OPT/documentation'&gt;OPT Documentation&lt;/a&gt;.&lt;/p&gt;
## Freq: daily
## Cols: date | stockpx | iv30 | iv60 | iv90 | m1atmiv | m1dtex | m2atmiv | m2dtex | m3atmiv | m3dtex | m4atmiv | m4dtex | slope | deriv | slope_inf | deriv_inf | 10dclsHV | 20dclsHV | 60dclsHV | 120dclsHV | 252dclsHV | 10dORHV | 20dORHV | 60dORHV | 120dORHV | 252dORHV
## 
## Goodrich Petroleum Corp. (GDP) Adjusted Stock Prices
## Code: XNAS/GDP
## Desc:  &lt;b&gt;Ticker&lt;/b&gt;: GDP &lt;br&gt; &lt;br&gt; &lt;b&gt;Exchange&lt;/b&gt;: XNAS &lt;br&gt; &lt;br&gt; Columns: &lt;br&gt; &lt;br&gt; Open,High,Low,Close,Volume are adjusted and shown in USD currency. &lt;br&gt; &lt;br&gt; Adjustment Factor shows the factor by which prices are adjusted on days which adjustments take place &lt;br&gt; &lt;br&gt; Adjustment Type is a number representing the type of adjustment. Refer to documentation for more information on these codes.
## Freq: daily
## Cols: Date | Open | High | Low | Close | Volume | Adjustment Factor | Adjustment Type
## 
## Goodrich Petroleum Corp. (GDP) Adjusted Stock Prices
## Code: XNYS/GDP
## Desc:  &lt;b&gt;Ticker&lt;/b&gt;: GDP &lt;br&gt; &lt;br&gt; &lt;b&gt;Exchange&lt;/b&gt;: XNYS &lt;br&gt; &lt;br&gt; Columns: &lt;br&gt; &lt;br&gt; Open,High,Low,Close,Volume are adjusted and shown in USD currency. &lt;br&gt; &lt;br&gt; Adjustment Factor shows the factor by which prices are adjusted on days which adjustments take place &lt;br&gt; &lt;br&gt; Adjustment Type is a number representing the type of adjustment. Refer to documentation for more information on these codes.
## Freq: daily
## Cols: Date | Open | High | Low | Close | Volume | Adjustment Factor | Adjustment Type
## 
## Goodrich Petroleum Corp. (GDP) Adjusted Stock Prices
## Code: XASE/GDP
## Desc:  &lt;b&gt;Ticker&lt;/b&gt;: GDP &lt;br&gt; &lt;br&gt; &lt;b&gt;Exchange&lt;/b&gt;: XASE &lt;br&gt; &lt;br&gt; Columns: &lt;br&gt; &lt;br&gt; Open,High,Low,Close,Volume are adjusted and shown in USD currency. &lt;br&gt; &lt;br&gt; Adjustment Factor shows the factor by which prices are adjusted on days which adjustments take place &lt;br&gt; &lt;br&gt; Adjustment Type is a number representing the type of adjustment. Refer to documentation for more information on these codes.
## Freq: daily
## Cols: Date | Open | High | Low | Close | Volume | Adjustment Factor | Adjustment Type
## 
## Goodrich Petroleum Corporation (GDP) Market Betas, Correlations, and Risks
## Code: QRM/GDP
## Desc: Market Betas, Correlations, and Systematic and Unsystematic Risks for Goodrich Petroleum Corporation (GDP). All time periods are measured in calendar days. See documentation for methodology.
## Freq: daily
## Cols: Date | Beta30 | Cor30 | Srisk30 | Urisk30 | Beta60 | Cor60 | Srisk60 | Urisk60 | Beta90 | Cor90 | Srisk90 | Urisk90 | Beta360 | Cor360 | Srisk360 | Urisk360
## 
## Golden Pursuit Resources Ltd. (GDP) Adjusted Stock Prices
## Code: XTSX/GDP
## Desc:  &lt;b&gt;Ticker&lt;/b&gt;: GDP &lt;br&gt; &lt;br&gt; &lt;b&gt;Exchange&lt;/b&gt;: XTSX &lt;br&gt; &lt;br&gt; Columns: &lt;br&gt; &lt;br&gt; Open,High,Low,Close,Volume are adjusted and shown in CAD currency. &lt;br&gt; &lt;br&gt; Adjustment Factor shows the factor by which prices are adjusted on days which adjustments take place &lt;br&gt; &lt;br&gt; Adjustment Type is a number representing the type of adjustment. Refer to documentation for more information on these codes.
## Freq: daily
## Cols: Date | Open | High | Low | Close | Volume | Adjustment Factor | Adjustment Type
## 
## Daily Active Analyst Ratings for GDP — Goodrich Petroleum Corp.
## Code: CBARH/GDP
## Desc: &lt;p&gt;Daily active analyst ratings for GDP — Goodrich Petroleum Corp.&lt;/p&gt;
## Freq: daily
## Cols: Date | Total | Average Rating | Rating Count Strong Sell | Rating Count Moderate Sell | Rating Count Hold | Rating Count Moderate Buy | Rating Count Strong Buy | Action Count Initiated | Action Count Upgraded | Action Count Downgraded | Action Count Reiterated | Action Ratio Upgraded | Action Ratio Downgraded</code></pre>
<pre><code>## # A tibble: 10 × 13
##         id datas…¹ datab…² name  descr…³ refre…⁴ newes…⁵ oldes…⁶ colum…⁷ frequ…⁸
##      &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;list&gt;  &lt;chr&gt;  
##  1  1.20e5 GDP     FRED    Gros… "Units… 2022-0… 2021-1… 1947-0… &lt;chr&gt;   quarte…
##  2  3.79e7 GDPS    OTCB    (GDP… " &lt;b&gt;T… 2017-0… 2006-1… 2006-1… &lt;chr&gt;   daily  
##  3  3.78e7 GDP     XLON    Gold… " &lt;b&gt;T… 2022-1… 2022-1… 2007-0… &lt;chr&gt;   daily  
##  4  2.35e7 GDP     OPT     GDP … "&lt;p&gt;&lt;p… 2021-1… 2021-1… 2010-0… &lt;chr&gt;   daily  
##  5  3.79e7 GDP     XNAS    Good… " &lt;b&gt;T… 2022-0… 2021-1… 2017-0… &lt;chr&gt;   daily  
##  6  4.35e7 GDP     XNYS    Good… " &lt;b&gt;T… 2022-0… 2021-1… 2018-0… &lt;chr&gt;   daily  
##  7  3.76e7 GDP     XASE    Good… " &lt;b&gt;T… 2022-0… 2021-1… 2017-0… &lt;chr&gt;   daily  
##  8  3.39e7 GDP     QRM     Good… "Marke… 2022-0… 2021-1… 2006-0… &lt;chr&gt;   daily  
##  9  3.78e7 GDP     XTSX    Gold… " &lt;b&gt;T… 2022-1… 2022-1… 2006-0… &lt;chr&gt;   daily  
## 10  2.60e7 GDP     CBARH   Dail… "&lt;p&gt;Da… 2021-0… 2021-0… 2012-0… &lt;chr&gt;   daily  
## # … with 3 more variables: type &lt;chr&gt;, premium &lt;lgl&gt;, database_id &lt;int&gt;, and
## #   abbreviated variable names ¹​dataset_code, ²​database_code, ³​description,
## #   ⁴​refreshed_at, ⁵​newest_available_date, ⁶​oldest_available_date,
## #   ⁷​column_names, ⁸​frequency</code></pre>
<ol start="2" style="list-style-type: lower-alpha">
<li>tq_get(…get = “quandl”…) - get Quandl time series free data using the API key.</li>
</ol>
<p>The code can run successfully if users uncomment the code and insert their api key into the “my_api_key” argument.</p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#my_quandl_api &lt;- quandl_api_key("my_api_key")</span></span></code></pre></div>
<p>Types of free datasets in Quandl:</p>
<ul>
<li><p>Wiki Continuous Futures, which is curated by the Quandl community and built on top of raw data from ICE, CME, LIFFE, etc.</p></li>
<li><p>Zillow Real Estate Data, which provides real estate and rental marketplace information.</p></li>
<li><p>FRED Economic Data, including indicators for macroeconomic analysis mentioned above in section.<br>
It provides additional info about dividends and split ratio as well as some adjusted measures than Yahoo!Finance, but data is not available for Meta and Uber, and for apple and tesla, and we can get 4 years from each call. No new data is available after 2018-03-27.</p></li>
</ul>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#tq_get("WIKI/META", get = "quandl")</span></span>
<span><span class="co">#tq_get("WIKI/AAPL", get = "quandl", from = "2017-01-01", to = "2020-12-31")</span></span>
<span><span class="co">#tq_get("WIKI/TSLA", get = "quandl", from = "2017-01-01", to = "2020-12-31")</span></span>
<span><span class="co">#tq_get("WIKI/UBER", get = "quandl")</span></span></code></pre></div>
<ol start="3" style="list-style-type: lower-alpha">
<li>tq_get(…get = “quandl.datatable”, datatable_code = “CODENAME”…) to get some larger datasets not in time series, and note that the argument “datatable_code” is required to filled in before getting data.</li>
</ol>
<p>(4). Getting data from Tiingo API - tq_get() - set tq_get(…get = “tiingo”/“tiingo.iex”…)<br>
The first step is to get tiingo api key.</p>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#my_tiingo_api &lt;- tiingo_api_key("my_api_key")</span></span></code></pre></div>
<p>It kind of combined the benefits of Yahoo!Finance and Quandl API in the way that we have info about some adjusted measures while data is available for all four companies from the desired time window from a single call.</p>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#tq_get(c("AAPL", "META","TSLA","UBER"), get = "tiingo", from = "2022-01-01", to = "2022-06-30")</span></span></code></pre></div>
<p>We can continue to look at data each hour within a specific day/multiple days.</p>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#tq_get(c("AAPL", "META","TSLA","UBER"), get = "tiingo.iex", from = "2022-11-01", to = "2022-11-01", resample_frequency = "60min")</span></span></code></pre></div>
<p>(5). Getting data from Alpha Vantage - set tq_get(…get = “alphavantage”…)</p>
<p>Also, The first step is to get tiingo api key.</p>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#my_vantage_key &lt;- av_api_key("my_api_key")</span></span></code></pre></div>
<p>Like we did in former tools, we can get daily stock prices and adjusted info. The downside is it allows setting intervals only instead of the “from and to” date.</p>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#c("AAPL","META","TSLA", "UBER") %&gt;%</span></span>
<span>    <span class="co">#tq_get(get = "alphavantage", av_fun = "TIME_SERIES_DAILY_ADJUSTED", interval = "daily")</span></span></code></pre></div>
<p>Like we did using Tiingo api, we can also easily inspect data for each hour by setting the interval, but also setting the start and end time is a concern.</p>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#c("AAPL","META","TSLA", "UBER") %&gt;%</span></span>
<span>    <span class="co">#tq_get(get = "alphavantage", av_fun = "TIME_SERIES_INTRADAY", interval = "60min")</span></span></code></pre></div>
<p>(6). Bloomberg</p>
<p>Bloomberg charges, so it might not be the best choice for the beginners. If we still want to use it, there are some steps to take:</p>
<ul>
<li><p>create a Bloomberg Terminal account.</p></li>
<li><p>run blpConnect()</p></li>
<li><p>set tq_get(…get = “Rblpapi”…)</p></li>
</ul>
<p>More details could be found in the original Tidyquant documentation.</p>
</div>
<div id="data-handling" class="section level3" number="15.3.3">
<h3>
<span class="header-section-number">15.3.3</span> Data Handling<a class="anchor" aria-label="anchor" href="#data-handling"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Transmute</strong></p>
<p>We typically transmute when we want to change periodicity of data, and tq_transmute() will return a new data frame with new periodicity.</p>
<p>Before transmuting, we might explore compatible functions such that we could set tq_transmute(…mutate_fun = “CODEFROMPACKAGES”…). CODEFROMPACKAGES are returned from the call below.</p>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/tq_mutate.html">tq_transmute_fun_options</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>## $zoo
##  [1] "rollapply"          "rollapplyr"         "rollmax"           
##  [4] "rollmax.default"    "rollmaxr"           "rollmean"          
##  [7] "rollmean.default"   "rollmeanr"          "rollmedian"        
## [10] "rollmedian.default" "rollmedianr"        "rollsum"           
## [13] "rollsum.default"    "rollsumr"          
## 
## $xts
##  [1] "apply.daily"     "apply.monthly"   "apply.quarterly" "apply.weekly"   
##  [5] "apply.yearly"    "diff.xts"        "lag.xts"         "period.apply"   
##  [9] "period.max"      "period.min"      "period.prod"     "period.sum"     
## [13] "periodicity"     "to_period"       "to.daily"        "to.hourly"      
## [17] "to.minutes"      "to.minutes10"    "to.minutes15"    "to.minutes3"    
## [21] "to.minutes30"    "to.minutes5"     "to.monthly"      "to.period"      
## [25] "to.quarterly"    "to.weekly"       "to.yearly"      
## 
## $quantmod
##  [1] "allReturns"      "annualReturn"    "ClCl"            "dailyReturn"    
##  [5] "Delt"            "HiCl"            "Lag"             "LoCl"           
##  [9] "LoHi"            "monthlyReturn"   "Next"            "OpCl"           
## [13] "OpHi"            "OpLo"            "OpOp"            "periodReturn"   
## [17] "quarterlyReturn" "seriesAccel"     "seriesDecel"     "seriesDecr"     
## [21] "seriesHi"        "seriesIncr"      "seriesLo"        "weeklyReturn"   
## [25] "yearlyReturn"   
## 
## $TTR
##  [1] "adjRatios"          "ADX"                "ALMA"              
##  [4] "aroon"              "ATR"                "BBands"            
##  [7] "CCI"                "chaikinAD"          "chaikinVolatility" 
## [10] "CLV"                "CMF"                "CMO"               
## [13] "CTI"                "DEMA"               "DonchianChannel"   
## [16] "DPO"                "DVI"                "EMA"               
## [19] "EMV"                "EVWMA"              "GMMA"              
## [22] "growth"             "HMA"                "keltnerChannels"   
## [25] "KST"                "lags"               "MACD"              
## [28] "MFI"                "momentum"           "OBV"               
## [31] "PBands"             "ROC"                "rollSFM"           
## [34] "RSI"                "runCor"             "runCov"            
## [37] "runMAD"             "runMax"             "runMean"           
## [40] "runMedian"          "runMin"             "runPercentRank"    
## [43] "runSD"              "runSum"             "runVar"            
## [46] "SAR"                "SMA"                "SMI"               
## [49] "SNR"                "stoch"              "TDI"               
## [52] "TRIX"               "ultimateOscillator" "VHF"               
## [55] "VMA"                "volatility"         "VWAP"              
## [58] "VWMA"               "wilderSum"          "williamsAD"        
## [61] "WMA"                "WPR"                "ZigZag"            
## [64] "ZLEMA"             
## 
## $PerformanceAnalytics
## [1] "Return.annualized"        "Return.annualized.excess"
## [3] "Return.clean"             "Return.cumulative"       
## [5] "Return.excess"            "Return.Geltner"          
## [7] "zerofill"</code></pre>
<p>For convenience, we only work with data retrieved for Meta from Yahoo!Finance as an example.<br>
We transmute daily stock prices for Meta to weekly data.</p>
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_price_yahoo_weekly</span> <span class="op">&lt;-</span> <span class="va">meta_price_yahoo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># No need to group at this point, but it allows the "META" name to show. can be deleted. </span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">symbol</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># set indexAt allow the date to be the last day of each week. </span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/tq_mutate.html">tq_transmute</a></span><span class="op">(</span>select <span class="op">=</span> <span class="va">adjusted</span>, mutate_fun <span class="op">=</span> <span class="va">to.weekly</span>, indexAt <span class="op">=</span> <span class="st">"lastof"</span><span class="op">)</span></span>
<span><span class="va">meta_price_yahoo_weekly</span></span></code></pre></div>
<pre><code>## # A tibble: 26 × 3
## # Groups:   symbol [1]
##    symbol date       adjusted
##    &lt;chr&gt;  &lt;date&gt;        &lt;dbl&gt;
##  1 META   2022-01-07     332.
##  2 META   2022-01-14     332.
##  3 META   2022-01-21     303.
##  4 META   2022-01-28     302.
##  5 META   2022-02-04     237.
##  6 META   2022-02-11     220.
##  7 META   2022-02-18     206.
##  8 META   2022-02-25     210.
##  9 META   2022-03-04     200.
## 10 META   2022-03-11     188.
## # … with 16 more rows</code></pre>
<p>Tesla data is converted for regression in the next steps.</p>
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tsla_price_yahoo_weekly</span> <span class="op">&lt;-</span> <span class="va">tsla_price_yahoo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># No need to group at this point, but it allows the "TSLA" name to show. can be deleted. </span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">symbol</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># set indexAt allow the date to be the last day of each week. </span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/tq_mutate.html">tq_transmute</a></span><span class="op">(</span>select <span class="op">=</span> <span class="va">adjusted</span>, mutate_fun <span class="op">=</span> <span class="va">to.weekly</span>, indexAt <span class="op">=</span> <span class="st">"lastof"</span><span class="op">)</span></span>
<span><span class="va">tsla_price_yahoo_weekly</span></span></code></pre></div>
<pre><code>## # A tibble: 26 × 3
## # Groups:   symbol [1]
##    symbol date       adjusted
##    &lt;chr&gt;  &lt;date&gt;        &lt;dbl&gt;
##  1 TSLA   2022-01-07     342.
##  2 TSLA   2022-01-14     350.
##  3 TSLA   2022-01-21     315.
##  4 TSLA   2022-01-28     282.
##  5 TSLA   2022-02-04     308.
##  6 TSLA   2022-02-11     287.
##  7 TSLA   2022-02-18     286.
##  8 TSLA   2022-02-25     270.
##  9 TSLA   2022-03-04     279.
## 10 TSLA   2022-03-11     265.
## # … with 16 more rows</code></pre>
<p><strong>Mutate</strong></p>
<p>We mutate weekly return data with the original dataset to show how tq_mutate() works.
tq_mutate(mutate_fun = periodReturn, period = “weekly”) gives a weekly return.</p>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_price_yahoo_weekly_returns</span> <span class="op">&lt;-</span> <span class="va">meta_price_yahoo_weekly</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">symbol</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/tq_mutate.html">tq_mutate</a></span><span class="op">(</span>mutate_fun <span class="op">=</span> <span class="va">periodReturn</span>, period <span class="op">=</span> <span class="st">"weekly"</span>, type <span class="op">=</span> <span class="st">"log"</span><span class="op">)</span></span>
<span><span class="va">meta_price_yahoo_weekly_returns</span></span></code></pre></div>
<pre><code>## # A tibble: 26 × 4
## # Groups:   symbol [1]
##    symbol date       adjusted weekly.returns
##    &lt;chr&gt;  &lt;date&gt;        &lt;dbl&gt;          &lt;dbl&gt;
##  1 META   2022-01-07     332.       0       
##  2 META   2022-01-14     332.       0.000331
##  3 META   2022-01-21     303.      -0.0905  
##  4 META   2022-01-28     302.      -0.00483 
##  5 META   2022-02-04     237.      -0.241   
##  6 META   2022-02-11     220.      -0.0769  
##  7 META   2022-02-18     206.      -0.0629  
##  8 META   2022-02-25     210.       0.0207  
##  9 META   2022-03-04     200.      -0.0508  
## 10 META   2022-03-11     188.      -0.0643  
## # … with 16 more rows</code></pre>
<p>We might also want to show how to mutate info from computations across the columns in the original dataset. The original documentation takes rollapply from the zoo package as an example. Rollapply enables applying custom function across a rolling window. We may follow the documentation and use it to compute a rolling regression. We adapt the code from the original documentation and run the rolling regression on our Meta and Tesla dataset.</p>
<p>To prepare for showing how to mutate rolling regressions on the returns of Meta and Tesla, we mutate the weekly returns of Tesla with the original Tesla dataset from Yahoo!Finance as well.</p>
<div class="sourceCode" id="cb105"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tsla_price_yahoo_weekly_returns</span> <span class="op">&lt;-</span> <span class="va">tsla_price_yahoo_weekly</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">symbol</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/tq_mutate.html">tq_mutate</a></span><span class="op">(</span> mutate_fun <span class="op">=</span> <span class="va">periodReturn</span>, period <span class="op">=</span> <span class="st">"weekly"</span>, type <span class="op">=</span> <span class="st">"log"</span><span class="op">)</span></span>
<span><span class="va">tsla_price_yahoo_weekly_returns</span></span></code></pre></div>
<pre><code>## # A tibble: 26 × 4
## # Groups:   symbol [1]
##    symbol date       adjusted weekly.returns
##    &lt;chr&gt;  &lt;date&gt;        &lt;dbl&gt;          &lt;dbl&gt;
##  1 TSLA   2022-01-07     342.        0      
##  2 TSLA   2022-01-14     350.        0.0218 
##  3 TSLA   2022-01-21     315.       -0.106  
##  4 TSLA   2022-01-28     282.       -0.109  
##  5 TSLA   2022-02-04     308.        0.0870 
##  6 TSLA   2022-02-11     287.       -0.0710 
##  7 TSLA   2022-02-18     286.       -0.00352
##  8 TSLA   2022-02-25     270.       -0.0565 
##  9 TSLA   2022-03-04     279.        0.0345 
## 10 TSLA   2022-03-11     265.       -0.0526 
## # … with 16 more rows</code></pre>
<p>Again, to prepare for running rolling regressions, we select the weekly returns columns from each dataset and join them by date as shown below.</p>
<div class="sourceCode" id="cb107"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_price_yahoo_weekly_returns_only</span> <span class="op">&lt;-</span> <span class="va">meta_price_yahoo_weekly_returns</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">weekly.returns</span>, <span class="va">date</span><span class="op">)</span></span>
<span><span class="va">tsla_price_yahoo_weekly_returns_only</span> <span class="op">&lt;-</span> <span class="va">tsla_price_yahoo_weekly_returns</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">weekly.returns</span>, <span class="va">date</span><span class="op">)</span></span>
<span></span>
<span><span class="va">joined_returns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">meta_price_yahoo_weekly_returns_only</span>, <span class="va">tsla_price_yahoo_weekly_returns_only</span>, </span>
<span>                            by <span class="op">=</span><span class="st">"date"</span><span class="op">)</span></span>
<span><span class="va">joined_returns</span></span></code></pre></div>
<pre><code>## # A tibble: 26 × 5
##    symbol.x weekly.returns.x date       symbol.y weekly.returns.y
##    &lt;chr&gt;               &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt;               &lt;dbl&gt;
##  1 META             0        2022-01-07 TSLA              0      
##  2 META             0.000331 2022-01-14 TSLA              0.0218 
##  3 META            -0.0905   2022-01-21 TSLA             -0.106  
##  4 META            -0.00483  2022-01-28 TSLA             -0.109  
##  5 META            -0.241    2022-02-04 TSLA              0.0870 
##  6 META            -0.0769   2022-02-11 TSLA             -0.0710 
##  7 META            -0.0629   2022-02-18 TSLA             -0.00352
##  8 META             0.0207   2022-02-25 TSLA             -0.0565 
##  9 META            -0.0508   2022-03-04 TSLA              0.0345 
## 10 META            -0.0643   2022-03-11 TSLA             -0.0526 
## # … with 16 more rows</code></pre>
<p>Here our joined_returns dataset will be passed into regr_fun as an xts object.
The timetk::tk_tbl function converts our data into the dataframe.</p>
<div class="sourceCode" id="cb109"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">regr_fun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/coef.html">coef</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">weekly.returns.x</span> <span class="op">~</span> <span class="va">weekly.returns.y</span>, data <span class="op">=</span> <span class="fu">timetk</span><span class="fu">::</span><span class="fu"><a href="https://business-science.github.io/timetk/reference/tk_tbl.html">tk_tbl</a></span><span class="op">(</span><span class="va">data</span>, silent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Notice that we make computations within the tq_mutate() function. The new dataframe is created with the coefficients with regressions attached.</p>
<div class="sourceCode" id="cb110"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">joined_returns</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/tq_mutate.html">tq_mutate</a></span><span class="op">(</span>mutate_fun <span class="op">=</span> <span class="va">rollapply</span>,</span>
<span>              <span class="co"># 2-week window. </span></span>
<span>              width <span class="op">=</span> <span class="fl">2</span>,</span>
<span>              FUN        <span class="op">=</span> <span class="va">regr_fun</span>,</span>
<span>              <span class="co"># We need to specify by.column since we don't want the regression to run on each                 column in the dataset.</span></span>
<span>              by.column  <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 26 × 7
##    symbol.x weekly.returns.x date       symbol.y weekly.retur…¹ X.Int…² weekly…³
##    &lt;chr&gt;               &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt;             &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;
##  1 META             0        2022-01-07 TSLA            0       NA       NA     
##  2 META             0.000331 2022-01-14 TSLA            0.0218   0        0.0152
##  3 META            -0.0905   2022-01-21 TSLA           -0.106   -0.0152   0.710 
##  4 META            -0.00483  2022-01-28 TSLA           -0.109   -3.19   -29.2   
##  5 META            -0.241    2022-02-04 TSLA            0.0870  -0.136   -1.20  
##  6 META            -0.0769   2022-02-11 TSLA           -0.0710  -0.151   -1.04  
##  7 META            -0.0629   2022-02-18 TSLA           -0.00352 -0.0622   0.206 
##  8 META             0.0207   2022-02-25 TSLA           -0.0565  -0.0685  -1.58  
##  9 META            -0.0508   2022-03-04 TSLA            0.0345  -0.0237  -0.786 
## 10 META            -0.0643   2022-03-11 TSLA           -0.0526  -0.0561   0.155 
## # … with 16 more rows, and abbreviated variable names ¹​weekly.returns.y,
## #   ²​X.Intercept., ³​weekly.returns.y..1</code></pre>
<p>Also, mutate_fun may require two different inputs. In this case, we want to use tq_mutate_xy() instead of tq_mutate() only. For example, If we want to mutate some indicator with the original dataset calculated from two columns of data from the original dataset, we want to set mutate_fun = CODENAME of the new indicator, and input the name of the two columns of x and y. Example is shown in the original documentation.</p>
</div>
<div id="charting-with-tidyquant" class="section level3" number="15.3.4">
<h3>
<span class="header-section-number">15.3.4</span> Charting with Tidyquant<a class="anchor" aria-label="anchor" href="#charting-with-tidyquant"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Line Chart</strong></p>
<p>Plotting opening price vs.time.</p>
<div class="sourceCode" id="cb112"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_price_yahoo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">open</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"META Line Chart"</span>, y <span class="op">=</span> <span class="st">"Opening Price"</span>, x <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/theme_tq.html">theme_tq</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-45-1.png" width="80%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb113"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_price_yahoo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">volume</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"META Line Chart"</span>, y <span class="op">=</span> <span class="st">"Volume"</span>, x <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/theme_tq.html">theme_tq</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-46-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Changing color of the theme, using the first plot as an example.</p>
<div class="sourceCode" id="cb114"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_price_yahoo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">open</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"META Line Chart"</span>, y <span class="op">=</span> <span class="st">"Opening Price"</span>, x <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/theme_tq.html">theme_tq_green</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-47-1.png" width="80%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb115"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_price_yahoo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">open</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"META Line Chart"</span>, y <span class="op">=</span> <span class="st">"Opening Price"</span>, x <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/theme_tq.html">theme_tq_dark</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-48-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Additionally, scale_color_tq(theme = “green”/“dark”) and scale_fill_tq(theme = “green”/“dark”) may be used when color and fill are specified as aes().</p>
<p>The change of themes applies for all other types of plots as well.</p>
<p><strong>Bar Chart</strong></p>
<div class="sourceCode" id="cb116"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_price_yahoo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># We can also set y = close, which is equivalent to setting y = close. </span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">open</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_chart.html">geom_barchart</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>open <span class="op">=</span> <span class="va">open</span>, high <span class="op">=</span> <span class="va">high</span>, low <span class="op">=</span> <span class="va">low</span>, close <span class="op">=</span> <span class="va">close</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"META Bar Chart"</span>, y <span class="op">=</span> <span class="st">"Price"</span>, x <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/theme_tq.html">theme_tq</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-49-1.png" width="80%" style="display: block; margin: auto;"></div>
<p><strong>Candlestick Chart</strong></p>
<div class="sourceCode" id="cb117"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_price_yahoo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="co"># We can also set y = close, which is equivalent to setting y = close.</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">open</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_chart.html">geom_candlestick</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>open <span class="op">=</span> <span class="va">open</span>, high <span class="op">=</span> <span class="va">high</span>, low <span class="op">=</span> <span class="va">low</span>, close <span class="op">=</span> <span class="va">close</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"META Candlestick Chart"</span>, y <span class="op">=</span> <span class="st">"Price"</span>, x <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/theme_tq.html">theme_tq</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-50-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>We can further modify the candlestick chart by</p>
<ul>
<li><p>color, “color_up” and “color_down” modifies the color of lines, while fill_up and fill_down modifies the color of rectangle fills.</p></li>
<li><p>range of graph, we may use coord_x_date(xlim = …) to zoom into specific sections of data.
We may also set ylim = … if zooming in causes a great change in the range of y values.</p></li>
</ul>
<p>Preparing for only charting a portion of data. We set the range of x.</p>
<div class="sourceCode" id="cb118"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">start</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/as_date.html">as_date</a></span><span class="op">(</span><span class="st">"2022-04-30"</span><span class="op">)</span></span>
<span><span class="va">end</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/as_date.html">as_date</a></span><span class="op">(</span><span class="st">"2022-06-30"</span><span class="op">)</span></span></code></pre></div>
<p>Reseting the range of y if we adjust plotting the range of x.</p>
<div class="sourceCode" id="cb119"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reset_y_range</span> <span class="op">&lt;-</span> <span class="va">meta_price_yahoo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># the last 60 lines of data. </span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="fl">60</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    <span class="co"># max value within the selected range</span></span>
<span>    max_high <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">high</span><span class="op">)</span>,</span>
<span>    <span class="co"># min value within the selected range</span></span>
<span>    min_low <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">low</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">reset_y_range</span></span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   max_high min_low
##      &lt;dbl&gt;   &lt;dbl&gt;
## 1     237.    154.</code></pre>
<div class="sourceCode" id="cb121"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_price_yahoo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">open</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_chart.html">geom_candlestick</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>open <span class="op">=</span> <span class="va">open</span>, high <span class="op">=</span> <span class="va">high</span>, low <span class="op">=</span> <span class="va">low</span>, close <span class="op">=</span> <span class="va">close</span><span class="op">)</span>,                        colour_up <span class="op">=</span> <span class="st">"darkgreen"</span>, colour_down <span class="op">=</span> <span class="st">"darkred"</span>, </span>
<span>                        fill_up  <span class="op">=</span> <span class="st">"darkgreen"</span>, fill_down  <span class="op">=</span> <span class="st">"darkred"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"META Candlestick Chart"</span>, subtitle <span class="op">=</span> <span class="st">"Zoomed in Version"</span>, y <span class="op">=</span> <span class="st">"Price"</span>, x <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/coord_x_date.html">coord_x_date</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">start</span>, <span class="va">end</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">reset_y_range</span><span class="op">$</span><span class="va">min_low</span>, <span class="va">reset_y_range</span><span class="op">$</span><span class="va">max_high</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/theme_tq.html">theme_tq</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-53-1.png" width="80%" style="display: block; margin: auto;"></div>
<p><strong>Graphing different data from different companies</strong></p>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">concat1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">meta_price_yahoo</span>, <span class="va">aapl_price_yahoo</span><span class="op">)</span></span>
<span><span class="va">concat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">tsla_price_yahoo</span>, <span class="va">concat1</span><span class="op">)</span></span>
<span><span class="va">concat3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">uber_price_yahoo</span>, <span class="va">concat2</span><span class="op">)</span></span>
<span><span class="va">concat3</span></span></code></pre></div>
<pre><code>## # A tibble: 492 × 8
##    symbol date        open  high   low close   volume adjusted
##    &lt;chr&gt;  &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1 UBER   2022-01-03  42.5  44.4  41.9  44.0 26089000     44.0
##  2 UBER   2022-01-04  44.2  44.8  42.6  44.4 30845300     44.4
##  3 UBER   2022-01-05  44.3  45.9  42.9  43.2 28498700     43.2
##  4 UBER   2022-01-06  43.1  44.1  41.0  42.0 32434300     42.0
##  5 UBER   2022-01-07  42    42.7  41.2  41.5 24875800     41.5
##  6 UBER   2022-01-10  41.5  42.8  40.2  42.6 29783800     42.6
##  7 UBER   2022-01-11  42.4  44.2  42.2  43.6 22161000     43.6
##  8 UBER   2022-01-12  44.0  44.1  42.5  43.0 18993900     43.0
##  9 UBER   2022-01-13  43.3  43.9  42.7  42.9 17190100     42.9
## 10 UBER   2022-01-14  42.4  42.7  40.4  41.5 25817800     41.5
## # … with 482 more rows</code></pre>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">concat3</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">close</span>, group <span class="op">=</span> <span class="va">symbol</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_chart.html">geom_candlestick</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>open <span class="op">=</span> <span class="va">open</span>, high <span class="op">=</span> <span class="va">high</span>, low <span class="op">=</span> <span class="va">low</span>, close <span class="op">=</span> <span class="va">close</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Multiple Candlestick Charts"</span>,</span>
<span>         y <span class="op">=</span> <span class="st">"Price"</span>, x <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/coord_x_date.html">coord_x_date</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">start</span>, <span class="va">end</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">symbol</span>, ncol <span class="op">=</span> <span class="fl">2</span>, scale <span class="op">=</span> <span class="st">"free_y"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/theme_tq.html">theme_tq</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-55-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Instead of zooming into specific sections using coord_x_date, we could run scale_x_date instead, which removes out-of-bounds data from charting. There is a trade off between distorting the scale of the y-axis (removing too little) and not getting a moving average (removing too much). We may call the filter() function to remove an appropriate number of days to find a balance. Examples are included in the original documentation.</p>
<p><strong>Visualizing Moving Averages</strong></p>
<p>Moving averages help to evaluate time-series trends, and they are applied as an added layer to a chart with geom_ma function. Different types of moving averages are available: Simple moving averages(SMA), exponential moving averages (EMA), weighted moving averages(WMA), double exponential moving averages (DEMA), zero-lag exponential moving averages (ZLEMA), volume-weighted moving averages (VWMA), and elastic volume-weighted moving averages (EVWMA).</p>
<p>We adapted sample code from the original documentation. We can set ma_fun argument equal to the types of moving average we want to graph and adjust the appearance by adjusting linetype, size, color, etc.</p>
<ol style="list-style-type: lower-alpha">
<li>charting moving average (SMA) - identify the trend direction of a stock.<br>
Graph SMA over 20/40 days:</li>
</ol>
<div class="sourceCode" id="cb125"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_price_yahoo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">open</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_chart.html">geom_candlestick</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>open <span class="op">=</span> <span class="va">open</span>, high <span class="op">=</span> <span class="va">high</span>, low <span class="op">=</span> <span class="va">low</span>, close <span class="op">=</span> <span class="va">close</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_ma.html">geom_ma</a></span><span class="op">(</span>ma_fun <span class="op">=</span> <span class="va">SMA</span>, n <span class="op">=</span> <span class="fl">20</span>, linetype <span class="op">=</span> <span class="fl">5</span>, size <span class="op">=</span> <span class="fl">1.25</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_ma.html">geom_ma</a></span><span class="op">(</span>ma_fun <span class="op">=</span> <span class="va">SMA</span>, n <span class="op">=</span> <span class="fl">40</span>, color <span class="op">=</span> <span class="st">"red"</span>, size <span class="op">=</span> <span class="fl">1.25</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"META Candlestick Chart"</span>, </span>
<span>         subtitle <span class="op">=</span> <span class="st">"20 and 40-Day SMA"</span>, </span>
<span>         y <span class="op">=</span> <span class="st">"Price"</span>, x <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/coord_x_date.html">coord_x_date</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">start</span>, <span class="va">end</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">reset_y_range</span><span class="op">$</span><span class="va">min_low</span>, <span class="va">reset_y_range</span><span class="op">$</span><span class="va">max_high</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/theme_tq.html">theme_tq</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-56-1.png" width="80%" style="display: block; margin: auto;"></div>
<ol start="2" style="list-style-type: lower-alpha">
<li>charting exponential moving average (EMA) - determine entry and exit points of a trade.
formula: closing price * multiplier + EMA of the previous day * (1-multiplier)
multiplier formula: [2/(number of days of observation+1)]</li>
</ol>
<div class="sourceCode" id="cb126"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_price_yahoo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">open</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_chart.html">geom_candlestick</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>open <span class="op">=</span> <span class="va">open</span>, high <span class="op">=</span> <span class="va">high</span>, low <span class="op">=</span> <span class="va">low</span>, close <span class="op">=</span> <span class="va">close</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_ma.html">geom_ma</a></span><span class="op">(</span>ma_fun <span class="op">=</span> <span class="va">EMA</span>, n <span class="op">=</span> <span class="fl">20</span>, wilder <span class="op">=</span> <span class="cn">TRUE</span>, linetype <span class="op">=</span> <span class="fl">5</span>, size <span class="op">=</span> <span class="fl">1.25</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_ma.html">geom_ma</a></span><span class="op">(</span>ma_fun <span class="op">=</span> <span class="va">EMA</span>, n <span class="op">=</span> <span class="fl">40</span>, wilder <span class="op">=</span> <span class="cn">TRUE</span>, color <span class="op">=</span> <span class="st">"red"</span>, size <span class="op">=</span> <span class="fl">1.25</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"META Candlestick Chart"</span>, </span>
<span>         subtitle <span class="op">=</span> <span class="st">"20 and 40-Day EMA"</span>, </span>
<span>         y <span class="op">=</span> <span class="st">"Price"</span>, x <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/coord_x_date.html">coord_x_date</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">start</span>, <span class="va">end</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">reset_y_range</span><span class="op">$</span><span class="va">min_low</span>, <span class="va">reset_y_range</span><span class="op">$</span><span class="va">max_high</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/theme_tq.html">theme_tq</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-57-1.png" width="80%" style="display: block; margin: auto;"></div>
<ol start="3" style="list-style-type: lower-alpha">
<li>charting weighted moving averages (WMA) - determine trend directions and help see when to buy or sell stocks</li>
</ol>
<div class="sourceCode" id="cb127"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_price_yahoo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">open</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_chart.html">geom_candlestick</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>open <span class="op">=</span> <span class="va">open</span>, high <span class="op">=</span> <span class="va">high</span>, low <span class="op">=</span> <span class="va">low</span>, close <span class="op">=</span> <span class="va">close</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_ma.html">geom_ma</a></span><span class="op">(</span>ma_fun <span class="op">=</span> <span class="va">WMA</span>, n <span class="op">=</span> <span class="fl">20</span>, wilder <span class="op">=</span> <span class="cn">TRUE</span>, linetype <span class="op">=</span> <span class="fl">5</span>, size <span class="op">=</span> <span class="fl">1.25</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_ma.html">geom_ma</a></span><span class="op">(</span>ma_fun <span class="op">=</span> <span class="va">WMA</span>, n <span class="op">=</span> <span class="fl">40</span>, wilder <span class="op">=</span> <span class="cn">TRUE</span>, color <span class="op">=</span> <span class="st">"red"</span>, size <span class="op">=</span> <span class="fl">1.25</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"META Candlestick Chart"</span>, </span>
<span>         subtitle <span class="op">=</span> <span class="st">"20 and 40-Day WMA"</span>, </span>
<span>         y <span class="op">=</span> <span class="st">"Price"</span>, x <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/coord_x_date.html">coord_x_date</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">start</span>, <span class="va">end</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">reset_y_range</span><span class="op">$</span><span class="va">min_low</span>, <span class="va">reset_y_range</span><span class="op">$</span><span class="va">max_high</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/theme_tq.html">theme_tq</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-58-1.png" width="80%" style="display: block; margin: auto;"></div>
<ol start="4" style="list-style-type: lower-alpha">
<li>charting double exponential moving averages (DEMA) - improved EMA, which removes the lag associated with moving averages by placing more weights on recent values</li>
</ol>
<div class="sourceCode" id="cb128"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_price_yahoo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">open</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_chart.html">geom_candlestick</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>open <span class="op">=</span> <span class="va">open</span>, high <span class="op">=</span> <span class="va">high</span>, low <span class="op">=</span> <span class="va">low</span>, close <span class="op">=</span> <span class="va">close</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_ma.html">geom_ma</a></span><span class="op">(</span>ma_fun <span class="op">=</span> <span class="va">DEMA</span>, n <span class="op">=</span> <span class="fl">20</span>, wilder <span class="op">=</span> <span class="cn">TRUE</span>, linetype <span class="op">=</span> <span class="fl">5</span>, size <span class="op">=</span> <span class="fl">1.25</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_ma.html">geom_ma</a></span><span class="op">(</span>ma_fun <span class="op">=</span> <span class="va">DEMA</span>, n <span class="op">=</span> <span class="fl">40</span>, wilder <span class="op">=</span> <span class="cn">TRUE</span>, color <span class="op">=</span> <span class="st">"red"</span>, size <span class="op">=</span> <span class="fl">1.25</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"META Candlestick Chart"</span>, </span>
<span>         subtitle <span class="op">=</span> <span class="st">"20 and 40-Day DEMA"</span>, </span>
<span>         y <span class="op">=</span> <span class="st">"Price"</span>, x <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/coord_x_date.html">coord_x_date</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">start</span>, <span class="va">end</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">reset_y_range</span><span class="op">$</span><span class="va">min_low</span>, <span class="va">reset_y_range</span><span class="op">$</span><span class="va">max_high</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/theme_tq.html">theme_tq</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-59-1.png" width="80%" style="display: block; margin: auto;"></div>
<ol start="5" style="list-style-type: lower-alpha">
<li>charting zero-lag exponential moving averages (ZLEMA) - improved EMA, reduce lags with removed inherent lag by removing data from lag days ago</li>
</ol>
<div class="sourceCode" id="cb129"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_price_yahoo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">open</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_chart.html">geom_candlestick</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>open <span class="op">=</span> <span class="va">open</span>, high <span class="op">=</span> <span class="va">high</span>, low <span class="op">=</span> <span class="va">low</span>, close <span class="op">=</span> <span class="va">close</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_ma.html">geom_ma</a></span><span class="op">(</span>ma_fun <span class="op">=</span> <span class="va">ZLEMA</span>, n <span class="op">=</span> <span class="fl">20</span>, wilder <span class="op">=</span> <span class="cn">TRUE</span>, linetype <span class="op">=</span> <span class="fl">5</span>, size <span class="op">=</span> <span class="fl">1.25</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_ma.html">geom_ma</a></span><span class="op">(</span>ma_fun <span class="op">=</span> <span class="va">ZLEMA</span>, n <span class="op">=</span> <span class="fl">40</span>, wilder <span class="op">=</span> <span class="cn">TRUE</span>, color <span class="op">=</span> <span class="st">"red"</span>, size <span class="op">=</span> <span class="fl">1.25</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"META Candlestick Chart"</span>, </span>
<span>         subtitle <span class="op">=</span> <span class="st">"20 and 40-Day ZLEMA"</span>, </span>
<span>         y <span class="op">=</span> <span class="st">"Price"</span>, x <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/coord_x_date.html">coord_x_date</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">start</span>, <span class="va">end</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">reset_y_range</span><span class="op">$</span><span class="va">min_low</span>, <span class="va">reset_y_range</span><span class="op">$</span><span class="va">max_high</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/theme_tq.html">theme_tq</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-60-1.png" width="80%" style="display: block; margin: auto;"></div>
<ol start="6" style="list-style-type: lower-alpha">
<li>charting volume-weighted moving averages (VWMA) - weighting prices based on the amount of trading activity within the time window</li>
</ol>
<div class="sourceCode" id="cb130"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_price_yahoo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">open</span>, volume <span class="op">=</span> <span class="va">volume</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_chart.html">geom_candlestick</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>open <span class="op">=</span> <span class="va">open</span>, high <span class="op">=</span> <span class="va">high</span>, low <span class="op">=</span> <span class="va">low</span>, close <span class="op">=</span> <span class="va">close</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_ma.html">geom_ma</a></span><span class="op">(</span>ma_fun <span class="op">=</span> <span class="va">VWMA</span>, n <span class="op">=</span> <span class="fl">20</span>, wilder <span class="op">=</span> <span class="cn">TRUE</span>, linetype <span class="op">=</span> <span class="fl">5</span>, size <span class="op">=</span> <span class="fl">1.25</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_ma.html">geom_ma</a></span><span class="op">(</span>ma_fun <span class="op">=</span> <span class="va">VWMA</span>, n <span class="op">=</span> <span class="fl">40</span>, wilder <span class="op">=</span> <span class="cn">TRUE</span>, color <span class="op">=</span> <span class="st">"red"</span>, size <span class="op">=</span> <span class="fl">1.25</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"META Candlestick Chart"</span>, </span>
<span>         subtitle <span class="op">=</span> <span class="st">"20 and 40-Day VWMA"</span>, </span>
<span>         y <span class="op">=</span> <span class="st">"Price"</span>, x <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/coord_x_date.html">coord_x_date</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">start</span>, <span class="va">end</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">reset_y_range</span><span class="op">$</span><span class="va">min_low</span>, <span class="va">reset_y_range</span><span class="op">$</span><span class="va">max_high</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/theme_tq.html">theme_tq</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-61-1.png" width="80%" style="display: block; margin: auto;"></div>
<ol start="7" style="list-style-type: lower-alpha">
<li>elastic volume-weighted moving averages (EVWMA) - approximate the average price paid per share. Large gaps between price and EVWMA is a signal of overbought/sold</li>
</ol>
<div class="sourceCode" id="cb131"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_price_yahoo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">close</span>, volume <span class="op">=</span> <span class="va">volume</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_chart.html">geom_candlestick</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>open <span class="op">=</span> <span class="va">open</span>, high <span class="op">=</span> <span class="va">high</span>, low <span class="op">=</span> <span class="va">low</span>, close <span class="op">=</span> <span class="va">close</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_ma.html">geom_ma</a></span><span class="op">(</span>ma_fun <span class="op">=</span> <span class="va">EVWMA</span>, n <span class="op">=</span> <span class="fl">20</span>, wilder <span class="op">=</span> <span class="cn">TRUE</span>, linetype <span class="op">=</span> <span class="fl">5</span>, size <span class="op">=</span> <span class="fl">1.25</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_ma.html">geom_ma</a></span><span class="op">(</span>ma_fun <span class="op">=</span> <span class="va">EVWMA</span>, n <span class="op">=</span> <span class="fl">40</span>, wilder <span class="op">=</span> <span class="cn">TRUE</span>, color <span class="op">=</span> <span class="st">"red"</span>, size <span class="op">=</span> <span class="fl">1.25</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"META Candlestick Chart"</span>, </span>
<span>         subtitle <span class="op">=</span> <span class="st">"20 and 40-Day EVWMA"</span>, </span>
<span>         y <span class="op">=</span> <span class="st">"Price"</span>, x <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/coord_x_date.html">coord_x_date</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">start</span>, <span class="va">end</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">reset_y_range</span><span class="op">$</span><span class="va">min_low</span>, <span class="va">reset_y_range</span><span class="op">$</span><span class="va">max_high</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/theme_tq.html">theme_tq</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-62-1.png" width="80%" style="display: block; margin: auto;"></div>
<p><strong>Adding Bollinger Bands</strong></p>
<p>Bollinger bands are used to visualize volatility by plotting a range around a moving average two standard deviations up and down. Geom_bbands works almost identically to geom_ma. We can use color_ma, color_bands, alpha, and fill arguments to change the appearance of bollinger bands.</p>
<div class="sourceCode" id="cb132"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_price_yahoo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># high, low, and close information are required. </span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">close</span>, open <span class="op">=</span> <span class="va">open</span>, high <span class="op">=</span> <span class="va">high</span>, low <span class="op">=</span> <span class="va">low</span>, close <span class="op">=</span> <span class="va">close</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_chart.html">geom_candlestick</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># sd = 2 by default. </span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/geom_bbands.html">geom_bbands</a></span><span class="op">(</span>ma_fun <span class="op">=</span> <span class="va">SMA</span>, sd <span class="op">=</span> <span class="fl">2</span>, n <span class="op">=</span> <span class="fl">20</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"META Candlestick Chart"</span>, </span>
<span>         subtitle <span class="op">=</span> <span class="st">"BBands with SMA"</span>, </span>
<span>         y <span class="op">=</span> <span class="st">"Closing Price"</span>, x <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span> </span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/coord_x_date.html">coord_x_date</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">start</span>, <span class="va">end</span><span class="op">)</span>,</span>
<span>                       <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">reset_y_range</span><span class="op">$</span><span class="va">min_low</span>, <span class="va">reset_y_range</span><span class="op">$</span><span class="va">max_high</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidyquant/man/theme_tq.html">theme_tq</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="quantmod_and_tidyquant_tutorials_and_comparison_files/figure-html/unnamed-chunk-63-1.png" width="80%" style="display: block; margin: auto;"></div>
</div>
</div>
<div id="quantmod-vs.-tidyquant" class="section level2" number="15.4">
<h2>
<span class="header-section-number">15.4</span> Quantmod vs. Tidyquant<a class="anchor" aria-label="anchor" href="#quantmod-vs.-tidyquant"><i class="fas fa-link"></i></a>
</h2>
<div id="quantmod-1" class="section level3" number="15.4.1">
<h3>
<span class="header-section-number">15.4.1</span> Quantmod:<a class="anchor" aria-label="anchor" href="#quantmod-1"><i class="fas fa-link"></i></a>
</h3>
<p>Pros-<br>
1. Beginner friendly, no need to have knowledge of other R libraries/packages to create graphs<br>
2. Easy syntax<br>
3. Contains all the essential tools and indicators for traders</p>
<p>Cons-<br>
1. Not flexible (for example, cannot freely edit elements on the chart, like the caption and volume number)<br>
2. Limited functions (for example, cannot conduct data cleaning directly and cannot create multi-facet plot)<br>
3. Limited data source connections, currently only has 3 direct online data source connections (Yahoo Finance, FRED, oanda)</p>
</div>
<div id="tidyquant-1" class="section level3" number="15.4.2">
<h3>
<span class="header-section-number">15.4.2</span> Tidyquant:<a class="anchor" aria-label="anchor" href="#tidyquant-1"><i class="fas fa-link"></i></a>
</h3>
<p>Pros-<br>
1. Can use tidyverse and ggplot packages, which contains functions to clean data, make tidy graphs, and implement modeling and scaling analysis<br>
2. Contain all the quantitative analytical functions in Quantmod, xts, TTR, and PerformanceAnalytics<br>
3. Multiple data source connections available, currently has 6 connections (Yahoo Finance, FRED, Quandl, Tiingo, Alpha Vantage, Bloomberg)<br>
4. Flexible (since can use tidyverse and ggplot)</p>
<p>Cons-<br>
1. Not beginner friendly comparing with Quantmod<br>
2. Syntax can be complex</p>
</div>
</div>
<div id="sources-2" class="section level2" number="15.5">
<h2>
<span class="header-section-number">15.5</span> Sources:<a class="anchor" aria-label="anchor" href="#sources-2"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li>
<a href="https://cran.r-project.org/web/packages/quantmod/quantmod.pdf" class="uri">https://cran.r-project.org/web/packages/quantmod/quantmod.pdf</a><br>
</li>
<li>
<a href="https://www.rdocumentation.org/packages/quantmod/versions/0.4.20" class="uri">https://www.rdocumentation.org/packages/quantmod/versions/0.4.20</a><br>
</li>
<li>
<a href="https://www.quantmod.com/documentation/" class="uri">https://www.quantmod.com/documentation/</a><br>
</li>
<li><a href="https://rdrr.io/cran/quantmod/" class="uri">https://rdrr.io/cran/quantmod/</a></li>
<li><a href="https://cran.r-project.org/web/packages/tidyquant/vignettes/" class="uri">https://cran.r-project.org/web/packages/tidyquant/vignettes/</a></li>
<li><a href="https://data.nasdaq.com/data/FRED-federal-reserve-economic-data/documentation" class="uri">https://data.nasdaq.com/data/FRED-federal-reserve-economic-data/documentation</a></li>
<li><a href="https://www.analyticsvidhya.com/blog/2017/09/comparative-stock-analysis/" class="uri">https://www.analyticsvidhya.com/blog/2017/09/comparative-stock-analysis/</a></li>
<li><a href="https://www.business-science.io/code-tools/2017/03/19/tidyquant-quandl-integration.html" class="uri">https://www.business-science.io/code-tools/2017/03/19/tidyquant-quandl-integration.html</a></li>
</ol>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="introduction-of-machine-learning-in-r.html"><span class="header-section-number">14</span> Introduction of machine learning in R</a></div>
<div class="next"><a href="learning-echarts4r-with-shiny.html"><span class="header-section-number">16</span> Learning echarts4r with shiny</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#quantmod-tidyquant-tutorials-and-comparison"><span class="header-section-number">15</span> Quantmod &amp; Tidyquant Tutorials and Comparison</a></li>
<li><a class="nav-link" href="#motivation-1"><span class="header-section-number">15.1</span> Motivation:</a></li>
<li>
<a class="nav-link" href="#quantmod"><span class="header-section-number">15.2</span> Quantmod</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#getting-data"><span class="header-section-number">15.2.1</span> Getting Data:</a></li>
<li><a class="nav-link" href="#data-visualization"><span class="header-section-number">15.2.2</span> Data Visualization:</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#tidyquant"><span class="header-section-number">15.3</span> Tidyquant</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#before-getting-data"><span class="header-section-number">15.3.1</span> Before Getting Data</a></li>
<li><a class="nav-link" href="#getting-data-1"><span class="header-section-number">15.3.2</span> Getting Data</a></li>
<li><a class="nav-link" href="#data-handling"><span class="header-section-number">15.3.3</span> Data Handling</a></li>
<li><a class="nav-link" href="#charting-with-tidyquant"><span class="header-section-number">15.3.4</span> Charting with Tidyquant</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#quantmod-vs.-tidyquant"><span class="header-section-number">15.4</span> Quantmod vs. Tidyquant</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#quantmod-1"><span class="header-section-number">15.4.1</span> Quantmod:</a></li>
<li><a class="nav-link" href="#tidyquant-1"><span class="header-section-number">15.4.2</span> Tidyquant:</a></li>
</ul>
</li>
<li><a class="nav-link" href="#sources-2"><span class="header-section-number">15.5</span> Sources:</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/jtr13/cc22mw/blob/main/quantmod_and_tidyquant_tutorials_and_comparison.Rmd">View source <i class="fa-solid fa-chart-scatter"></i></a></li>
          <li><a id="book-edit" href="https://github.com/jtr13/cc22mw/edit/main/quantmod_and_tidyquant_tutorials_and_comparison.Rmd">Edit this page <i class="fa-solid fa-chart-scatter"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Community Contributions for EDAV Fall 2022 Mon/Wed</strong>" was written by . It was last built on 2022-11-18.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
