<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 5 Testing | Community Contributions for EDAV Fall 2022 Mon/Wed</title>
<meta name="description" content='# install.packages("ggmap") library(ggmap) # You will also need to activate an API key! Use a line like the following: # register_google("&lt;API KEY&gt;")  5.1 Link to Video Tutorial...'>
<meta name="generator" content="bookdown 0.29 with bs4_book()">
<meta property="og:title" content="Chapter 5 Testing | Community Contributions for EDAV Fall 2022 Mon/Wed">
<meta property="og:type" content="book">
<meta property="og:description" content='# install.packages("ggmap") library(ggmap) # You will also need to activate an API key! Use a line like the following: # register_google("&lt;API KEY&gt;")  5.1 Link to Video Tutorial...'>
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 5 Testing | Community Contributions for EDAV Fall 2022 Mon/Wed">
<meta name="twitter:description" content='# install.packages("ggmap") library(ggmap) # You will also need to activate an API key! Use a line like the following: # register_google("&lt;API KEY&gt;")  5.1 Link to Video Tutorial...'>
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Community Contributions for EDAV Fall 2022 Mon/Wed</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Welcome!</a></li>
<li><a class="" href="community-contribution.html"><span class="header-section-number">2</span> Community Contribution</a></li>
<li><a class="" href="github-submission-instructions.html"><span class="header-section-number">3</span> GitHub submission instructions</a></li>
<li><a class="" href="sample-project.html"><span class="header-section-number">4</span> Sample project</a></li>
<li><a class="active" href="testing.html"><span class="header-section-number">5</span> Testing</a></li>
<li class="book-part">Appendices</li>
<li><a class="" href="github-initial-setup.html"><span class="header-section-number">6</span> Github initial setup</a></li>
<li><a class="" href="tutorial-for-pull-request-mergers.html"><span class="header-section-number">7</span> Tutorial for pull request mergers</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/jtr13/cc22mw">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="testing" class="section level1">
<h1>
<span class="header-section-number">5</span> Testing<a class="anchor" aria-label="anchor" href="#testing"><i class="fas fa-link"></i></a>
</h1>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("ggmap")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dkahle/ggmap">ggmap</a></span><span class="op">)</span></span>
<span><span class="co"># You will also need to activate an API key! Use a line like the following:</span></span>
<span><span class="co"># register_google("&lt;API KEY&gt;")</span></span></code></pre></div>
<div id="link-to-video-tutorial" class="section level2">
<h2>
<span class="header-section-number">5.1</span> Link to Video Tutorial<a class="anchor" aria-label="anchor" href="#link-to-video-tutorial"><i class="fas fa-link"></i></a>
</h2>
<p><a href="https://www.youtube.com/watch?v=AKEEAaCbtog" class="uri">https://www.youtube.com/watch?v=AKEEAaCbtog</a></p>
</div>
<div id="getting-started" class="section level2">
<h2>
<span class="header-section-number">5.2</span> Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"><i class="fas fa-link"></i></a>
</h2>
<p>This demonstration will show you how to make static maps within the tidyverse framework using ggmap. Before we get started, make sure you have ggmap installed and ready to go, since you may not have it installed by default.</p>
<p>One thing that can be somewhat pesky when working with ggmap is Google maps. As of 2018, this service requires an API key to use. To access the full features of this demonstration, you will have to register a Google API key. Details on how to do this can be found in the help file for ‘register_google’.</p>
<p><strong>Note: If you wish to run the code found in this file, you will need to register a Google API key!</strong></p>
</div>
<div id="why-ggmap" class="section level2">
<h2>
<span class="header-section-number">5.3</span> Why ggmap?<a class="anchor" aria-label="anchor" href="#why-ggmap"><i class="fas fa-link"></i></a>
</h2>
<p>ggmap is useful for our demonstration, since it will use syntax that you may be familiar with already! ggmap is designed to be quite compatible with ggplot2 (in fact, Hadley Wickham, one of the authors of ggplot2, is a co-author!). In fact, much of ggmap is, under the hood, largely comprised of ggplot2 components. ggmap, however, features the added benefit of abstracting away from many of the more involved components of setting up a ggplot2 visual with maps, and will doubtless prove easier to use than base ggplot2 alone. ggmap also has many options for customizing its resulting visuals, though we will not explore many of these options in depth.</p>
<p>It should be noted that ggmap is an excellent tool for <em>static</em> maps. If you are looking more dynamic maps that provide more potential for user interaction, you may find other libraries, such as leaflet, that better suit your needs.</p>
</div>
<div id="dataset-for-demonstration" class="section level2">
<h2>
<span class="header-section-number">5.4</span> Dataset for Demonstration<a class="anchor" aria-label="anchor" href="#dataset-for-demonstration"><i class="fas fa-link"></i></a>
</h2>
<p>For our demonstration, we will utilize data on public WiFi locations in New York City. The dataset can be found here:
<a href="https://data.cityofnewyork.us/City-Government/NYC-Wi-Fi-Hotspot-Locations/yjub-udmw" class="uri">https://data.cityofnewyork.us/City-Government/NYC-Wi-Fi-Hotspot-Locations/yjub-udmw</a> . We will save this dataset to ‘wifi_data’:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wifi_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"https://data.cityofnewyork.us/api/views/yjub-udmw/rows.csv?accessType=DOWNLOAD"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">wifi_data</span><span class="op">)</span></span></code></pre></div>
<pre><code>##   OBJECTID Borough         Type          Provider                   Name
## 1    10604       4 Limited Free          SPECTRUM      Baisley Pond Park
## 2    10555       4 Limited Free          SPECTRUM           Kissena Park
## 3    12370       3         Free  Transit Wireless           Grand St (L)
## 4     9893       3         Free Downtown Brooklyn                       
## 5    10169       1         Free  Transit Wireless Lexington Av-63 St (F)
## 6    10880       4 Limited Free          SPECTRUM           Kissena Park
##                 Location Latitude Longitude         X        Y
## 1         Park Perimeter 40.67486 -73.78412 1044131.9 185219.9
## 2         Park Perimeter 40.74756 -73.81815 1034637.5 211685.2
## 3           Grand St (L) 40.71193 -73.94067 1000698.1 198655.9
## 4          125 Court St. 40.68999 -73.99200  986470.0 190656.7
## 5 Lexington Av-63 St (F) 40.76463 -73.96612  993636.6 217853.9
## 6         Park Perimeter 40.74243 -73.81151 1036481.4 209820.1
##           Location_T                Remarks     City                   SSID
## 1 Outdoor TWC Aerial 3 free 10 min sessions   Queens              GuestWiFi
## 2 Outdoor TWC Aerial 3 free 10 min sessions   Queens              GuestWiFi
## 3     Subway Station                 SN 123 Brooklyn    TransitWirelessWiFi
## 4            Outdoor                        Brooklyn Downtown Brooklyn WiFi
## 5     Subway Station                 SN 223 New York    TransitWirelessWiFi
## 6 Outdoor TWC Aerial 3 free 10 min sessions   Queens              GuestWiFi
##   SourceID  Activated BoroCode Borough.Name
## 1        0 09/09/9999        4       Queens
## 2        0 09/09/9999        4       Queens
## 3          09/09/9999        3     Brooklyn
## 4          09/09/9999        3     Brooklyn
## 5          09/09/9999        1    Manhattan
## 6        0 09/09/9999        4       Queens
##   Neighborhood.Tabulation.Area.Code..NTACODE.
## 1                                        QN02
## 2                                        QN22
## 3                                        BK90
## 4                                        BK09
## 5                                        MN40
## 6                                        QN62
##   Neighborhood.Tabulation.Area..NTA. Council.Distrcit Postcode BoroCD
## 1          Springfield Gardens North               28    11434    412
## 2                           Flushing               20    11355    407
## 3                  East Williamsburg               34    11206    301
## 4       Brooklyn Heights-Cobble Hill               33    11201    302
## 5      Upper East Side-Carnegie Hill                4    10065    108
## 6                    Queensboro Hill               20    11355    407
##   Census.Tract BCTCB2010     BIN        BBL DOITT_ID
## 1          294       294       0          0     1408
## 2          845       845       0          0     1359
## 3          495       495       0          0     1699
## 4            9         9 3388736 3002777501      298
## 5          120       120       0          0      599
## 6         1215      1215       0          0     1347
##              Location..Lat..Long.
## 1 (40.6748599999, -73.7841200005)
## 2 (40.7475599996, -73.8181499997)
## 3 (40.7119259997, -73.9406699994)
## 4 (40.6899850001, -73.9919950004)
## 5 (40.7646300002, -73.9661150001)
## 6 (40.7424300003, -73.8115100003)</code></pre>
</div>
<div id="creating-maps-no-plotting" class="section level2">
<h2>
<span class="header-section-number">5.5</span> Creating Maps (No plotting)<a class="anchor" aria-label="anchor" href="#creating-maps-no-plotting"><i class="fas fa-link"></i></a>
</h2>
<p>Before we dive into how to overlay datapoints and other visuals over our graphs, we’ll start by going over how to create maps in the first place.</p>
<div id="by-location-name" class="section level3">
<h3>
<span class="header-section-number">5.5.1</span> By location name<a class="anchor" aria-label="anchor" href="#by-location-name"><i class="fas fa-link"></i></a>
</h3>
<p>The first, and perhaps more approachable way we can plot a map is by simply specifying the name of the location we’d like to see. This works through the geocode function. Here is an example with the city of Paris, France:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/geocode.html">geocode</a></span><span class="op">(</span><span class="st">"Paris"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##     lon   lat
##   &lt;dbl&gt; &lt;dbl&gt;
## 1  2.35  48.9</code></pre>
<p>If you want to verify these coordinates, you can try for yourself! Simply plug 48.85661, 2.352222 into Google Maps, and you will see that this is indeed the location of Paris, France (or, a location roughly in the center of Paris). revgeocode and mapdist are two other useful functions to do the inverse of geocode and calculate distances, respectively.</p>
<p>To generate a map using a location name, we run two steps. First we use get_map(), specifying the location name. This gives a ggmap object. Second, we generate a ggplot2-compatible plot, using ggmap() and providing our ggmap object from step 1 as the input. To demonstrate our location lookup works with more abstract names, let us try finding the Parthenon, in Athens:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">parthenon</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/get_map.html">get_map</a></span><span class="op">(</span>location <span class="op">=</span> <span class="st">"parthenon, athens"</span><span class="op">)</span></span>
<span><span class="va">parthenon_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/ggmap.html">ggmap</a></span><span class="op">(</span><span class="va">parthenon</span><span class="op">)</span></span>
<span><span class="va">parthenon_map</span></span></code></pre></div>
<div class="inline-figure"><img src="sandbox_files/figure-html/unnamed-chunk-6-1.png" width="672" style="display: block; margin: auto;"></div>
<p>Clearly the Parthenon cannot be viewed from space. Let us adjust some variables to give us a clearer view. First, we will adjust the ‘zoom’ parameter. By default, get_map will select this for us, but we can specify it manually. Here, it is initially set to 10, which is about right for a city. Let us try 16 instead:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">parthenon</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/get_map.html">get_map</a></span><span class="op">(</span>location <span class="op">=</span> <span class="st">"parthenon, athens"</span>, zoom <span class="op">=</span> <span class="fl">16</span><span class="op">)</span></span>
<span><span class="va">parthenon_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/ggmap.html">ggmap</a></span><span class="op">(</span><span class="va">parthenon</span><span class="op">)</span></span>
<span><span class="va">parthenon_map</span></span></code></pre></div>
<div class="inline-figure"><img src="sandbox_files/figure-html/unnamed-chunk-7-1.png" width="672" style="display: block; margin: auto;"></div>
<p>That is better. The style of this map may be a little distracting, but we will show how to change this later.</p>
</div>
<div id="by-geographic-coordinates" class="section level3">
<h3>
<span class="header-section-number">5.5.2</span> By geographic coordinates<a class="anchor" aria-label="anchor" href="#by-geographic-coordinates"><i class="fas fa-link"></i></a>
</h3>
<p>Another way to plot a map is with geographic coordinates directly. Here, we will input the coordinates for the Grand Canyon:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">grand_canyon</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/get_map.html">get_map</a></span><span class="op">(</span>location <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">112</span>, <span class="fl">36.1</span><span class="op">)</span>, zoom <span class="op">=</span> <span class="fl">9</span><span class="op">)</span></span>
<span><span class="va">grand_canyon_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/ggmap.html">ggmap</a></span><span class="op">(</span><span class="va">grand_canyon</span><span class="op">)</span></span>
<span><span class="va">grand_canyon_map</span></span></code></pre></div>
<div class="inline-figure"><img src="sandbox_files/figure-html/unnamed-chunk-8-1.png" width="672" style="display: block; margin: auto;"></div>
</div>
<div id="using-shape-files" class="section level3">
<h3>
<span class="header-section-number">5.5.3</span> Using shape files<a class="anchor" aria-label="anchor" href="#using-shape-files"><i class="fas fa-link"></i></a>
</h3>
<p>Shape files are also an option for plotting maps with ggmap, but we will not cover them here.</p>
</div>
</div>
<div id="quick-map-plot" class="section level2">
<h2>
<span class="header-section-number">5.6</span> Quick Map Plot<a class="anchor" aria-label="anchor" href="#quick-map-plot"><i class="fas fa-link"></i></a>
</h2>
<p>In the event that you would like a quick visual plotted, given a set of latitude and longitude points that you would like to superimpose on a map, there is an easy option in the form of qmplot. Here is an example, using our sample dataset:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/qmplot.html">qmplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">wifi_data</span>, x <span class="op">=</span> <span class="va">Longitude</span>, y <span class="op">=</span> <span class="va">Latitude</span>, color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html">I</a></span><span class="op">(</span><span class="st">'Blue'</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html">I</a></span><span class="op">(</span><span class="fl">0.05</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="sandbox_files/figure-html/unnamed-chunk-9-1.png" width="672" style="display: block; margin: auto;"></div>
<p>If you are looking for a quick visual, this may suffice in some cases.</p>
</div>
<div id="plotting-by-overlaying-ggplot2-visuals" class="section level2">
<h2>
<span class="header-section-number">5.7</span> Plotting by Overlaying ggplot2 Visuals<a class="anchor" aria-label="anchor" href="#plotting-by-overlaying-ggplot2-visuals"><i class="fas fa-link"></i></a>
</h2>
<p>In most cases, you will want more elaborate visuals, which may be easier to accomplish with ggplot2 and ordinary ggmaps. Here are some examples:</p>
<div id="scatterplot" class="section level3">
<h3>
<span class="header-section-number">5.7.1</span> Scatterplot<a class="anchor" aria-label="anchor" href="#scatterplot"><i class="fas fa-link"></i></a>
</h3>
<p>Let us start with a basic plotting. Note that ‘lat’ and ‘lon’ are the expected names of the x and y values.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wifi_data_renamed</span> <span class="op">&lt;-</span> <span class="fu">mutate</span><span class="op">(</span><span class="va">wifi_data</span>, lat <span class="op">=</span> <span class="va">Latitude</span>, lon <span class="op">=</span> <span class="va">Longitude</span><span class="op">)</span></span>
<span><span class="va">nyc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/get_map.html">get_map</a></span><span class="op">(</span>location <span class="op">=</span> <span class="st">"manhattan"</span>, zoom <span class="op">=</span> <span class="fl">12</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/ggmap.html">ggmap</a></span><span class="op">(</span><span class="va">nyc</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">wifi_data_renamed</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">Type</span><span class="op">)</span>, alpha<span class="op">=</span><span class="fl">.2</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="sandbox_files/figure-html/unnamed-chunk-10-1.png" width="672" style="display: block; margin: auto;"></div>
<p>We see two issues. First, the legend could be inset at the top left. This can be modified within our ggmap. Second, our map colors may be confusing, given that parks and water are the same colors as several of our categories. Let us correct these issues:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nyc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/get_map.html">get_map</a></span><span class="op">(</span>location <span class="op">=</span> <span class="st">"manhattan"</span>, zoom <span class="op">=</span> <span class="fl">12</span>, source <span class="op">=</span> <span class="st">'stamen'</span>, maptype <span class="op">=</span> <span class="st">"toner"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/ggmap.html">ggmap</a></span><span class="op">(</span><span class="va">nyc</span>, extent <span class="op">=</span> <span class="st">'device'</span>, legend <span class="op">=</span> <span class="st">"topleft"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">wifi_data_renamed</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">Type</span><span class="op">)</span>, alpha<span class="op">=</span><span class="fl">.2</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="sandbox_files/figure-html/unnamed-chunk-11-1.png" width="672" style="display: block; margin: auto;"></div>
<p>We used arguments extent = ‘device’ and legend = “topleft” to move our legend, and source = ‘stamen’ and maptype = “toner” to adjust our map’s appearance.</p>
</div>
<div id="heatmap-with-rectangular-bins" class="section level3">
<h3>
<span class="header-section-number">5.7.2</span> Heatmap with Rectangular Bins<a class="anchor" aria-label="anchor" href="#heatmap-with-rectangular-bins"><i class="fas fa-link"></i></a>
</h3>
<p>In the event of overplotting, a rectangular heatmap can be used. The below graph shows a rectangular heatmap for the area of manhattan north of central park.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nyc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/get_map.html">get_map</a></span><span class="op">(</span>location <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">73.96</span>, <span class="fl">40.8</span><span class="op">)</span>, zoom <span class="op">=</span> <span class="fl">14</span>, source <span class="op">=</span> <span class="st">'stamen'</span>, maptype <span class="op">=</span> <span class="st">"toner"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/ggmap.html">ggmap</a></span><span class="op">(</span><span class="va">nyc</span>, extent <span class="op">=</span> <span class="st">'device'</span>, legend <span class="op">=</span> <span class="st">"topleft"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bin_2d.html">geom_bin_2d</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">wifi_data_renamed</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">Type</span>, fill <span class="op">=</span> <span class="va">Type</span><span class="op">)</span>, bins <span class="op">=</span> <span class="fl">40</span>, alpha<span class="op">=</span><span class="fl">.7</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="sandbox_files/figure-html/unnamed-chunk-12-1.png" width="672" style="display: block; margin: auto;"></div>
</div>
<div id="contour-plots" class="section level3">
<h3>
<span class="header-section-number">5.7.3</span> Contour Plots<a class="anchor" aria-label="anchor" href="#contour-plots"><i class="fas fa-link"></i></a>
</h3>
<p>One final visual of interest is the contour plot. Here is an example of one:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nyc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/get_map.html">get_map</a></span><span class="op">(</span>location <span class="op">=</span> <span class="st">"manhattan"</span>, zoom <span class="op">=</span> <span class="fl">12</span>, color <span class="op">=</span> <span class="st">'bw'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/ggmap.html">ggmap</a></span><span class="op">(</span><span class="va">nyc</span>, extent <span class="op">=</span> <span class="st">'device'</span>, legend <span class="op">=</span> <span class="st">"topleft"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density_2d.html">geom_density_2d_filled</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">wifi_data_renamed</span>, alpha <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="sandbox_files/figure-html/unnamed-chunk-13-1.png" width="672" style="display: block; margin: auto;"></div>
</div>
<div id="overlaying-routes" class="section level3">
<h3>
<span class="header-section-number">5.7.4</span> Overlaying Routes<a class="anchor" aria-label="anchor" href="#overlaying-routes"><i class="fas fa-link"></i></a>
</h3>
<p>One other neat feature of ggmap is the ability to superimpose routes. Here is a map that shows the available WiFi hotspots near a walking route from Columbia to Central Park:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">to_cp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/route.html">route</a></span><span class="op">(</span>from <span class="op">=</span> <span class="st">'Columbia University'</span>, to <span class="op">=</span> <span class="st">'Frederick Douglass Circle'</span>, mode <span class="op">=</span> <span class="st">'walking'</span><span class="op">)</span></span>
<span><span class="va">nyc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/get_map.html">get_map</a></span><span class="op">(</span>location <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">73.96</span>, <span class="fl">40.803</span><span class="op">)</span>, zoom <span class="op">=</span> <span class="fl">16</span>, color <span class="op">=</span> <span class="st">'bw'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/ggmap.html">ggmap</a></span><span class="op">(</span><span class="va">nyc</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/geom_leg.html">geom_leg</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">start_lon</span>, y <span class="op">=</span> <span class="va">start_lat</span>, xend <span class="op">=</span> <span class="va">end_lon</span>, yend <span class="op">=</span> <span class="va">end_lat</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">2</span>, color <span class="op">=</span> <span class="st">'blue'</span>, data<span class="op">=</span><span class="va">to_cp</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">wifi_data_renamed</span>, color <span class="op">=</span> <span class="st">'red'</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="sandbox_files/figure-html/unnamed-chunk-14-1.png" width="672" style="display: block; margin: auto;"></div>

</div>
</div>
</div>



<div class="chapter-nav">
<div class="prev"><a href="sample-project.html"><span class="header-section-number">4</span> Sample project</a></div>
<div class="next"><a href="github-initial-setup.html"><span class="header-section-number">6</span> Github initial setup</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#testing"><span class="header-section-number">5</span> Testing</a></li>
<li><a class="nav-link" href="#link-to-video-tutorial"><span class="header-section-number">5.1</span> Link to Video Tutorial</a></li>
<li><a class="nav-link" href="#getting-started"><span class="header-section-number">5.2</span> Getting Started</a></li>
<li><a class="nav-link" href="#why-ggmap"><span class="header-section-number">5.3</span> Why ggmap?</a></li>
<li><a class="nav-link" href="#dataset-for-demonstration"><span class="header-section-number">5.4</span> Dataset for Demonstration</a></li>
<li>
<a class="nav-link" href="#creating-maps-no-plotting"><span class="header-section-number">5.5</span> Creating Maps (No plotting)</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#by-location-name"><span class="header-section-number">5.5.1</span> By location name</a></li>
<li><a class="nav-link" href="#by-geographic-coordinates"><span class="header-section-number">5.5.2</span> By geographic coordinates</a></li>
<li><a class="nav-link" href="#using-shape-files"><span class="header-section-number">5.5.3</span> Using shape files</a></li>
</ul>
</li>
<li><a class="nav-link" href="#quick-map-plot"><span class="header-section-number">5.6</span> Quick Map Plot</a></li>
<li>
<a class="nav-link" href="#plotting-by-overlaying-ggplot2-visuals"><span class="header-section-number">5.7</span> Plotting by Overlaying ggplot2 Visuals</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#scatterplot"><span class="header-section-number">5.7.1</span> Scatterplot</a></li>
<li><a class="nav-link" href="#heatmap-with-rectangular-bins"><span class="header-section-number">5.7.2</span> Heatmap with Rectangular Bins</a></li>
<li><a class="nav-link" href="#contour-plots"><span class="header-section-number">5.7.3</span> Contour Plots</a></li>
<li><a class="nav-link" href="#overlaying-routes"><span class="header-section-number">5.7.4</span> Overlaying Routes</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/jtr13/cc22mw/blob/main/sandbox.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/jtr13/cc22mw/edit/main/sandbox.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>
</div>
  

  

</div>
 <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Community Contributions for EDAV Fall 2022 Mon/Wed</strong>" was written by . It was last built on 2022-10-19.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
