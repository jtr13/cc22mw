<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 46 Bubble chart — GPAs of Course at Columbia University | Community Contributions for EDAV Fall 2022 Mon/Wed</title>
<meta name="description" content="Longcong Xu library(ggplot2) library(dplyr) library(plotly)  46.1 Motivation for the project In just a few days it will be time for Columbia students to begin choosing their spring 2023 classes....">
<meta name="generator" content="bookdown 0.30 with bs4_book()">
<meta property="og:title" content="Chapter 46 Bubble chart — GPAs of Course at Columbia University | Community Contributions for EDAV Fall 2022 Mon/Wed">
<meta property="og:type" content="book">
<meta property="og:description" content="Longcong Xu library(ggplot2) library(dplyr) library(plotly)  46.1 Motivation for the project In just a few days it will be time for Columbia students to begin choosing their spring 2023 classes....">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 46 Bubble chart — GPAs of Course at Columbia University | Community Contributions for EDAV Fall 2022 Mon/Wed">
<meta name="twitter:description" content="Longcong Xu library(ggplot2) library(dplyr) library(plotly)  46.1 Motivation for the project In just a few days it will be time for Columbia students to begin choosing their spring 2023 classes....">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.1/transition.js"></script><script src="libs/bs3compat-0.4.1/tabs.js"></script><script src="libs/bs3compat-0.4.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="libs/proj4js-2.3.15/proj4.js"></script><link href="libs/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="libs/highcharts-9.3.1/highcharts.js"></script><script src="libs/highcharts-9.3.1/highcharts-3d.js"></script><script src="libs/highcharts-9.3.1/highcharts-more.js"></script><script src="libs/highcharts-9.3.1/modules/stock.js"></script><script src="libs/highcharts-9.3.1/modules/map.js"></script><script src="libs/highcharts-9.3.1/modules/data.js"></script><script src="libs/highcharts-9.3.1/modules/exporting.js"></script><script src="libs/highcharts-9.3.1/modules/offline-exporting.js"></script><script src="libs/highcharts-9.3.1/modules/drilldown.js"></script><script src="libs/highcharts-9.3.1/modules/item-series.js"></script><script src="libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script><script src="libs/highcharts-9.3.1/modules/annotations.js"></script><script src="libs/highcharts-9.3.1/modules/export-data.js"></script><script src="libs/highcharts-9.3.1/modules/funnel.js"></script><script src="libs/highcharts-9.3.1/modules/heatmap.js"></script><script src="libs/highcharts-9.3.1/modules/treemap.js"></script><script src="libs/highcharts-9.3.1/modules/sankey.js"></script><script src="libs/highcharts-9.3.1/modules/dependency-wheel.js"></script><script src="libs/highcharts-9.3.1/modules/organization.js"></script><script src="libs/highcharts-9.3.1/modules/solid-gauge.js"></script><script src="libs/highcharts-9.3.1/modules/streamgraph.js"></script><script src="libs/highcharts-9.3.1/modules/sunburst.js"></script><script src="libs/highcharts-9.3.1/modules/vector.js"></script><script src="libs/highcharts-9.3.1/modules/wordcloud.js"></script><script src="libs/highcharts-9.3.1/modules/xrange.js"></script><script src="libs/highcharts-9.3.1/modules/tilemap.js"></script><script src="libs/highcharts-9.3.1/modules/venn.js"></script><script src="libs/highcharts-9.3.1/modules/gantt.js"></script><script src="libs/highcharts-9.3.1/modules/timeline.js"></script><script src="libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script><script src="libs/highcharts-9.3.1/modules/bullet.js"></script><script src="libs/highcharts-9.3.1/modules/coloraxis.js"></script><script src="libs/highcharts-9.3.1/modules/dumbbell.js"></script><script src="libs/highcharts-9.3.1/modules/lollipop.js"></script><script src="libs/highcharts-9.3.1/modules/series-label.js"></script><script src="libs/highcharts-9.3.1/plugins/motion.js"></script><script src="libs/highcharts-9.3.1/custom/reset.js"></script><script src="libs/highcharts-9.3.1/modules/boost.js"></script><script src="libs/highchart-binding-0.9.4/highchart.js"></script><script src="libs/plotly-binding-4.10.1/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script><link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet">
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script><script src="libs/dygraphs-1.1.1/shapes.js"></script><script src="libs/moment-2.8.4/moment.js"></script><script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script><script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script><script src="libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script><script src="libs/Dygraph.Plotters.CandlestickPlotter-1.0/candlestick.js"></script><script src="libs/d3-4.13.0/d3.min.js"></script><link href="libs/profvis-0.3.6.9000/profvis.css" rel="stylesheet">
<script src="libs/profvis-0.3.6.9000/profvis.js"></script><script src="libs/profvis-0.3.6.9000/scroll.js"></script><link href="libs/highlight-6.2.0/textmate.css" rel="stylesheet">
<script src="libs/highlight-6.2.0/highlight.js"></script><script src="libs/profvis-binding-0.3.7/profvis.js"></script><link href="libs/collapsibleTree-0.1.6/collapsibleTree.css" rel="stylesheet">
<script src="libs/collapsibleTree-binding-0.1.7/collapsibleTree.js"></script><script src="libs/forceNetwork-binding-0.4/forceNetwork.js"></script><script src="libs/d3v3-3.5.3/./d3v3.min.js"></script><link href="libs/d3heatmapcore-0.0.0/heatmapcore.css" rel="stylesheet">
<script src="libs/d3heatmapcore-0.0.0/heatmapcore.js"></script><script src="libs/d3v3-tip-0.6.6/index.js"></script><script src="libs/d3heatmap-binding-0.9.0/d3heatmap.js"></script><script src="libs/d3-tip-0.8.1/index.js"></script><link href="libs/chorddiag-0.1.2.9000/chorddiag.css" rel="stylesheet">
<script src="libs/chorddiag-0.1.2.9000/chorddiag.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Community Contributions for EDAV Fall 2022 Mon/Wed</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Welcome!</a></li>
<li><a class="" href="community-contribution.html"><span class="header-section-number">2</span> Community Contribution</a></li>
<li><a class="" href="github-submission-instructions.html"><span class="header-section-number">3</span> GitHub submission instructions</a></li>
<li><a class="" href="sample-project.html"><span class="header-section-number">4</span> Sample project</a></li>
<li class="book-part">Cheatsheets</li>
<li><a class="" href="geographic-visualization-by-ggmap.html"><span class="header-section-number">5</span> Geographic visualization by ggmap</a></li>
<li><a class="" href="googlevis.html"><span class="header-section-number">6</span> googleVis</a></li>
<li><a class="" href="text-data-visualization-by-tidytext.html"><span class="header-section-number">7</span> Text data visualization by tidytext</a></li>
<li><a class="" href="cheatsheet-of-ggally-including-ggcoef_model-and-ggpairs.html"><span class="header-section-number">8</span> Cheatsheet of GGally (including ggcoef_model and ggpairs)</a></li>
<li><a class="" href="cheatsheet-for-data-science.html"><span class="header-section-number">9</span> Cheatsheet for data science</a></li>
<li><a class="" href="cheatsheet-for-plotly.html"><span class="header-section-number">10</span> Cheatsheet for Plotly</a></li>
<li><a class="" href="dataexplorer-cheatsheet-eda-made-easier.html"><span class="header-section-number">11</span> DataExplorer Cheatsheet, EDA made easier</a></li>
<li><a class="" href="data-visualization-with-ggplot2-r-and-matplotlib-python-cheat-sheet.html"><span class="header-section-number">12</span> Data Visualization with GGPlot2 (R) and MatPlotLib (Python) Cheat Sheet</a></li>
<li class="book-part">Tutorials</li>
<li><a class="" href="map-plots-with-highcharts.html"><span class="header-section-number">13</span> Map Plots with Highcharts</a></li>
<li><a class="" href="introduction-of-machine-learning-in-r.html"><span class="header-section-number">14</span> Introduction of machine learning in R</a></li>
<li><a class="" href="quantmod-tidyquant-tutorials-and-comparison.html"><span class="header-section-number">15</span> Quantmod &amp; Tidyquant Tutorials and Comparison</a></li>
<li><a class="" href="learning-echarts4r-with-shiny.html"><span class="header-section-number">16</span> Learning echarts4r with shiny</a></li>
<li><a class="" href="picturing-inflation-an-exercise-in-web-scraping-plotly-and-timeseries.html"><span class="header-section-number">17</span> Picturing Inflation: An Exercise in Web Scraping, Plotly and Timeseries</a></li>
<li><a class="" href="introcuction-to-dygraph-for-financial-analysis.html"><span class="header-section-number">18</span> Introcuction to Dygraph for Financial Analysis</a></li>
<li><a class="" href="two-interesting-r-packages.html"><span class="header-section-number">19</span> Two Interesting R packages</a></li>
<li><a class="" href="tutorial-for-wordcloud2-package.html"><span class="header-section-number">20</span> Tutorial for wordcloud2 package</a></li>
<li><a class="" href="effcient-r.html"><span class="header-section-number">21</span> Effcient R</a></li>
<li><a class="" href="color-vision-deficiency.html"><span class="header-section-number">22</span> Color vision deficiency</a></li>
<li><a class="" href="tutorials-for-ggfortify-and-autoplotly.html"><span class="header-section-number">23</span> Tutorials for ggfortify and autoplotly</a></li>
<li><a class="" href="becoming-a-better-business-analyst.html"><span class="header-section-number">24</span> Becoming a better business analyst</a></li>
<li><a class="" href="cheatsheet-of-ggstatsplot-in-r.html"><span class="header-section-number">25</span> Cheatsheet of ggstatsplot in R</a></li>
<li><a class="" href="best-parallel-coordinates-r-package.html"><span class="header-section-number">26</span> Best Parallel Coordinates R Package</a></li>
<li><a class="" href="hypothesis-testing-guide-in-r.html"><span class="header-section-number">27</span> Hypothesis Testing Guide in R</a></li>
<li><a class="" href="python-tutorial-gather-data-through-api-and-web-scraping.html"><span class="header-section-number">28</span> Python tutorial: gather data through API and web scraping</a></li>
<li><a class="" href="an-interactive-dashboard-covid-19-visualization-with-shiny-and-plotly.html"><span class="header-section-number">29</span> An Interactive Dashboard: COVID-19 Visualization with Shiny and Plotly</a></li>
<li><a class="" href="interactive-plots-for-different-types-of-graphs-in-r.html"><span class="header-section-number">30</span> Interactive plots for different types of graphs in R</a></li>
<li><a class="" href="introduction-to-plotly-in-r.html"><span class="header-section-number">31</span> Introduction to Plotly in R</a></li>
<li><a class="" href="machine-learning-interview-mindmap-and-commonly-asked-questions.html"><span class="header-section-number">32</span> Machine Learning Interview mindmap and commonly asked questions</a></li>
<li><a class="" href="data-visualization-with-seaborn.html"><span class="header-section-number">33</span> Data Visualization with Seaborn</a></li>
<li><a class="" href="tutorial-of-making-different-types-of-charts-interactive.html"><span class="header-section-number">34</span> Tutorial of making different types of charts interactive</a></li>
<li><a class="" href="cheatsheet-of-ggplot2-ggplot2-alluvial-heatmap.html"><span class="header-section-number">35</span> Cheatsheet of ggplot2 (ggplot2 &amp; alluvial &amp; heatmap)</a></li>
<li><a class="" href="chord-diagrams-using-circlize.html"><span class="header-section-number">36</span> Chord diagrams using circlize</a></li>
<li><a class="" href="video-guide-to-reigniting-your-creavite-spark-for-visualizations.html"><span class="header-section-number">37</span> Video guide to reigniting your creavite spark for visualizations</a></li>
<li><a class="" href="tutorial-on-machine-learning-in-r.html"><span class="header-section-number">38</span> Tutorial on Machine Learning in R</a></li>
<li><a class="" href="data-importance-visualization.html"><span class="header-section-number">39</span> Data importance &amp; visualization</a></li>
<li><a class="" href="time-series-visualization---r-tutorial.html"><span class="header-section-number">40</span> Time Series Visualization - R tutorial</a></li>
<li><a class="" href="introduction-6.html"><span class="header-section-number">41</span> Introduction</a></li>
<li><a class="" href="S3.html"><span class="header-section-number">42</span> Section 3.Time series visualization with ggplot and ggplot2</a></li>
<li><a class="" href="autocorrelation-plot.html"><span class="header-section-number">43</span> AutoCorrelation plot</a></li>
<li><a class="" href="S4.html"><span class="header-section-number">44</span> Section 4. Time series visualization with TSstudio: ts_plot</a></li>
<li><a class="" href="S5.html"><span class="header-section-number">45</span> Section 5. Time series visualization with Plotly</a></li>
<li><a class="active" href="bubble-chart-gpas-of-course-at-columbia-university.html"><span class="header-section-number">46</span> Bubble chart — GPAs of Course at Columbia University</a></li>
<li><a class="" href="edav-survey-and-analysis.html"><span class="header-section-number">47</span> EDAV Survey and Analysis</a></li>
<li><a class="" href="visualizing-graphs-and-networks.html"><span class="header-section-number">48</span> Visualizing graphs and networks</a></li>
<li><a class="" href="is-the-data-visualization-misleading-or-not---survey.html"><span class="header-section-number">49</span> Is the data visualization misleading or not - Survey</a></li>
<li class="book-part">Appendices</li>
<li><a class="" href="github-initial-setup.html"><span class="header-section-number">50</span> Github initial setup</a></li>
<li><a class="" href="tutorial-for-pull-request-mergers.html"><span class="header-section-number">51</span> Tutorial for pull request mergers</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/jtr13/cc22mw">View book source <i class="fa-solid fa-chart-scatter"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="bubble-chart-gpas-of-course-at-columbia-university" class="section level1" number="46">
<h1>
<span class="header-section-number">46</span> Bubble chart — <strong>GPAs of Course at Columbia University</strong><a class="anchor" aria-label="anchor" href="#bubble-chart-gpas-of-course-at-columbia-university"><i class="fas fa-link"></i></a>
</h1>
<p>Longcong Xu</p>
<div class="sourceCode" id="cb353"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://plotly-r.com">plotly</a></span><span class="op">)</span></span></code></pre></div>
<div id="motivation-for-the-project-1" class="section level2" number="46.1">
<h2>
<span class="header-section-number">46.1</span> Motivation for the project<a class="anchor" aria-label="anchor" href="#motivation-for-the-project-1"><i class="fas fa-link"></i></a>
</h2>
<p>In just a few days it will be time for Columbia students to begin choosing their spring 2023 classes. The University offers us a wealth of courses, and I am sure that many students, like me, are unsure of how to choose among the many courses of interest. Yet we don’t have a platform to disclose some of the information we care most about to help us make decisions. During my undergraduate years, there was a website that visually provided information about the courses, such as course name, course capacity size, average GPA of the course, etc. I borrowed the idea from <a href="https://waf.cs.illinois.edu/discovery/gpa_of_every_course_at_illinois/">UIUC Course evaluation</a> and hope to build a platform to showcase the courses that belong to Columbia University. If this platform can be built and made public, it can greatly help students in course selection.</p>
<p>On the University of Illinois at Urbana-Champaign website, the most dominant chart is the bubble chart. Therefore, I would also like to take this opportunity to supplement the EDAV course on bubble charts. The two remaining sections of the document on this page are: an introduction to bubble charts using the data mtcars built into R, and an introduction to plotly package. Although plotly package is briefly described on the EDAV website, I would like to give more examples and introduce how to scale bubble size, how to set pop up text in this package.</p>
</div>
<div id="two-methods-to-create-bubble-chart-example-of-mtcars" class="section level2" number="46.2">
<h2>
<span class="header-section-number">46.2</span> Two methods to create bubble chart — Example of mtcars<a class="anchor" aria-label="anchor" href="#two-methods-to-create-bubble-chart-example-of-mtcars"><i class="fas fa-link"></i></a>
</h2>
<p>The bubble chart is actually one of the scatter diagrams, except that the bubble chart adds two new dimensions to the scatter diagram. Scatter plots are mainly applicable to two-dimensional continuous variable data, while bubble plots can add categorical data to the plot. The bubble size of the bubble chart provides a new intuitive display perspective, and in addition, the bubble color shade provides another indicator of the data. Due to the limitation on the dataset, I chose the mtcars dataset for a simple interpretation of the bubble chart first.</p>
<div id="use-the-package-ggplot2" class="section level3" number="46.2.1">
<h3>
<span class="header-section-number">46.2.1</span> Use the package ggplot2<a class="anchor" aria-label="anchor" href="#use-the-package-ggplot2"><i class="fas fa-link"></i></a>
</h3>
<p>One of the most commonly used packages, ggplot2, extends the scatter plot to a bubble plot. In mtcar dataset, I choose wt(car weight (1000 lbs)), disp(displacement (cu.in.)), hp (Gross horsepower) and cyl (Number of cylinders) attributes. We first started with the simplest one, using Gross horsepower depict bubble size and using Number of cylinders distinct different color of bubbles. As for the alpha, it represent the transparency of air bubbles.</p>
<div class="sourceCode" id="cb354"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"mtcars"</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">mtcars</span></span>
<span></span>
<span><span class="va">g1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wt</span>, y <span class="op">=</span> <span class="va">disp</span>, size <span class="op">=</span> <span class="va">hp</span>, color <span class="op">=</span> <span class="va">cyl</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"Weight"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Displacement"</span><span class="op">)</span></span>
<span><span class="va">g1</span></span></code></pre></div>
<div class="inline-figure"><img src="bubble_chart_application_files/figure-html/unnamed-chunk-2-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>Since the type of Number of cylinders attribute is numeric originally, as the number of cylinders increases, we can see a change in color from dark to light. Although number of cylinders is numeric, there are only four values, so we present it after transforming it into factor to be able to better distinguish this indicator.</p>
<div class="sourceCode" id="cb355"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span><span class="op">$</span><span class="va">cyl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">cyl</span><span class="op">)</span></span>
<span><span class="va">g2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wt</span>, y <span class="op">=</span> <span class="va">disp</span>, size <span class="op">=</span> <span class="va">hp</span>, color <span class="op">=</span> <span class="va">cyl</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"Weight"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Displacement"</span><span class="op">)</span> </span>
<span><span class="va">g2</span></span></code></pre></div>
<div class="inline-figure"><img src="bubble_chart_application_files/figure-html/unnamed-chunk-3-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>It is clear from the graph that the displacement increases in a linear fashion as the number of cylinders increases.</p>
<p>In addition, we can set the color of the bubbles specifically and the scale the size of the bubbles. Furthermore, if you do not know how to match the color, you can refer <a href="https://hexcolorpedia.com/">color palette</a>.</p>
<div class="sourceCode" id="cb356"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">g3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wt</span>, y <span class="op">=</span> <span class="va">disp</span>, color <span class="op">=</span> <span class="va">cyl</span>, size <span class="op">=</span> <span class="va">hp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"#AA4371"</span>, <span class="st">"#E7B800"</span>, <span class="st">"#FC4E07"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_size.html">scale_size</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">13</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"Weight"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Displacement"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html">theme_set</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">g3</span></span></code></pre></div>
<div class="inline-figure"><img src="bubble_chart_application_files/figure-html/unnamed-chunk-4-1.png" width="80%" style="display: block; margin: auto;"></div>
</div>
<div id="the-package-plotly" class="section level3" number="46.2.2">
<h3>
<span class="header-section-number">46.2.2</span> The package plotly<a class="anchor" aria-label="anchor" href="#the-package-plotly"><i class="fas fa-link"></i></a>
</h3>
<p>The chart implemented by ggplot2 has an obvious drawback, although we can clearly see the difference between different vehicles and some relationships between indicators. But we can’t clearly see the brand of the car, since , and we don’t know how to choose it. plotly is a package that greatly improves the functionality of interactions in charts. When the mouse hovers over the bubble, the pop up content is generated.</p>
<div class="sourceCode" id="cb357"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">g4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/plotly/man/plot_ly.html">plot_ly</a></span><span class="op">(</span><span class="va">df</span>, x <span class="op">=</span> <span class="op">~</span><span class="va">wt</span>, y <span class="op">=</span> <span class="op">~</span><span class="va">disp</span>,</span>
<span>                      text <span class="op">=</span> <span class="op">~</span><span class="va">cyl</span>, size <span class="op">=</span> <span class="op">~</span><span class="va">qsec</span>,</span>
<span>                      color <span class="op">=</span> <span class="op">~</span><span class="va">cyl</span>, sizes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">50</span><span class="op">)</span>, </span>
<span>                      marker <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>opacity <span class="op">=</span> <span class="fl">0.7</span>, sizemode <span class="op">=</span> <span class="st">"diameter"</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/plotly/man/add_trace.html">add_markers</a></span><span class="op">(</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">layout</span><span class="op">(</span>xaxis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Weight"</span><span class="op">)</span>,yaxis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Displacement"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">g4</span></span></code></pre></div>
<div id="htmlwidget-a338ece958799e05d25d" style="width:80%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-a338ece958799e05d25d">{"x":{"visdat":{"53cc23ed1257":["function () ","plotlyVisDat"]},"cur_data":"53cc23ed1257","attrs":{"53cc23ed1257":{"x":{},"y":{},"text":{},"marker":{"opacity":0.7,"sizemode":"diameter"},"color":{},"size":{},"alpha_stroke":1,"sizes":[10,50],"spans":[1,20],"type":"scatter","mode":"markers","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"Weight"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Displacement"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[2.32,3.19,3.15,2.2,1.615,1.835,2.465,1.935,2.14,1.513,2.78],"y":[108,146.7,140.8,78.7,75.7,71.1,120.1,79,120.3,95.1,121],"text":["4","4","4","4","4","4","4","4","4","4","4"],"marker":{"color":"rgba(102,194,165,1)","size":[29.5714285714286,36.1904761904762,50,33.6666666666667,29.1428571428571,35.7142857142857,36.2380952380953,30.9523809523809,20.4761904761905,21.4285714285714,29.5238095238095],"sizemode":"diameter","opacity":0.7,"line":{"color":"rgba(102,194,165,1)"}},"type":"scatter","mode":"markers","name":"4","textfont":{"color":"rgba(102,194,165,1)","size":[29.5714285714286,36.1904761904762,50,33.6666666666667,29.1428571428571,35.7142857142857,36.2380952380953,30.9523809523809,20.4761904761905,21.4285714285714,29.5238095238095]},"error_y":{"color":"rgba(102,194,165,1)","width":[]},"error_x":{"color":"rgba(102,194,165,1)","width":[]},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2.62,2.875,3.215,3.46,3.44,3.44,2.77],"y":[160,160,258,225,167.6,167.6,145],"text":["6","6","6","6","6","6","6"],"marker":{"color":"rgba(252,141,98,1)","size":[19.3333333333333,22,33.5238095238095,37.2380952380952,28.0952380952381,30.9523809523809,14.7619047619048],"sizemode":"diameter","opacity":0.7,"line":{"color":"rgba(252,141,98,1)"}},"type":"scatter","mode":"markers","name":"6","textfont":{"color":"rgba(252,141,98,1)","size":[19.3333333333333,22,33.5238095238095,37.2380952380952,28.0952380952381,30.9523809523809,14.7619047619048]},"error_y":{"color":"rgba(252,141,98,1)","width":[]},"error_x":{"color":"rgba(252,141,98,1)","width":[]},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[3.44,3.57,4.07,3.73,3.78,5.25,5.424,5.345,3.52,3.435,3.84,3.845,3.17,3.57],"y":[360,360,275.8,275.8,275.8,472,460,440,318,304,350,400,351,301],"text":["8","8","8","8","8","8","8","8","8","8","8","8","8","8"],"marker":{"color":"rgba(141,160,203,1)","size":[22,16.3809523809524,23.8095238095238,24.7619047619048,26.6666666666667,26.5714285714286,25.8095238095238,23.9047619047619,21.2857142857143,23.3333333333333,14.3333333333333,22.1428571428571,10,10.4761904761905],"sizemode":"diameter","opacity":0.7,"line":{"color":"rgba(141,160,203,1)"}},"type":"scatter","mode":"markers","name":"8","textfont":{"color":"rgba(141,160,203,1)","size":[22,16.3809523809524,23.8095238095238,24.7619047619048,26.6666666666667,26.5714285714286,25.8095238095238,23.9047619047619,21.2857142857143,23.3333333333333,14.3333333333333,22.1428571428571,10,10.4761904761905]},"error_y":{"color":"rgba(141,160,203,1)","width":[]},"error_x":{"color":"rgba(141,160,203,1)","width":[]},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p>We can see that if we don’t set it, plotly defaults to displaying the horizontal and vertical values, but still doesn’t show the brand of the car we want. mtcar dataset shows the brand of the car as rowname, so I did it by adding a new column named Brand to store the brand of each car. The most important thing is to set the hovertemplate, paste function converts its arguments to character strings, and concatenates them.</p>
<p>We pass Brand into the function if we want to display the brand of the car. Also, in R, the &lt;br&gt; character is a line break. This way, we can customize, what we want to show in the pop up of the bubble chart. As you can see, hover is able to display not only the parameters used to draw the bubble chart, wt, disp, hp, etc., but also any other parameters in the dataset.</p>
<div class="sourceCode" id="cb358"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span><span class="op">[</span><span class="st">'Brand'</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/row.names.html">row.names</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="va">g5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/plotly/man/plot_ly.html">plot_ly</a></span><span class="op">(</span><span class="va">df</span>, x <span class="op">=</span> <span class="op">~</span><span class="va">wt</span>, y <span class="op">=</span> <span class="op">~</span><span class="va">disp</span>,</span>
<span>                      size <span class="op">=</span> <span class="op">~</span><span class="va">hp</span>, sizes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">50</span><span class="op">)</span>,</span>
<span>                      color <span class="op">=</span> <span class="op">~</span><span class="va">cyl</span>, </span>
<span>                      mode <span class="op">=</span> <span class="st">'markers'</span>,</span>
<span>                      hovertemplate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"Brand:"</span>,<span class="va">df</span><span class="op">$</span><span class="va">Brand</span>, <span class="st">"&lt;br&gt;Weight:"</span> ,<span class="va">df</span><span class="op">$</span><span class="va">wt</span>, <span class="st">"&lt;br&gt;"</span>, <span class="st">"Displacement:"</span>, <span class="va">df</span><span class="op">$</span><span class="va">disp</span><span class="op">)</span>,</span>
<span>                      marker <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>opacity <span class="op">=</span> <span class="fl">0.7</span>,sizemode <span class="op">=</span> <span class="st">"diameter"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/plotly/man/add_trace.html">add_markers</a></span><span class="op">(</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">layout</span><span class="op">(</span>xaxis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Weight"</span><span class="op">)</span>,yaxis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Displacement"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">g5</span></span></code></pre></div>
<div id="htmlwidget-f04ec47128ffe1d6b11f" style="width:80%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-f04ec47128ffe1d6b11f">{"x":{"visdat":{"53cc6207c5ce":["function () ","plotlyVisDat"]},"cur_data":"53cc6207c5ce","attrs":{"53cc6207c5ce":{"x":{},"y":{},"mode":"markers","hovertemplate":["Brand: Mazda RX4 <br>Weight: 2.62 <br> Displacement: 160","Brand: Mazda RX4 Wag <br>Weight: 2.875 <br> Displacement: 160","Brand: Datsun 710 <br>Weight: 2.32 <br> Displacement: 108","Brand: Hornet 4 Drive <br>Weight: 3.215 <br> Displacement: 258","Brand: Hornet Sportabout <br>Weight: 3.44 <br> Displacement: 360","Brand: Valiant <br>Weight: 3.46 <br> Displacement: 225","Brand: Duster 360 <br>Weight: 3.57 <br> Displacement: 360","Brand: Merc 240D <br>Weight: 3.19 <br> Displacement: 146.7","Brand: Merc 230 <br>Weight: 3.15 <br> Displacement: 140.8","Brand: Merc 280 <br>Weight: 3.44 <br> Displacement: 167.6","Brand: Merc 280C <br>Weight: 3.44 <br> Displacement: 167.6","Brand: Merc 450SE <br>Weight: 4.07 <br> Displacement: 275.8","Brand: Merc 450SL <br>Weight: 3.73 <br> Displacement: 275.8","Brand: Merc 450SLC <br>Weight: 3.78 <br> Displacement: 275.8","Brand: Cadillac Fleetwood <br>Weight: 5.25 <br> Displacement: 472","Brand: Lincoln Continental <br>Weight: 5.424 <br> Displacement: 460","Brand: Chrysler Imperial <br>Weight: 5.345 <br> Displacement: 440","Brand: Fiat 128 <br>Weight: 2.2 <br> Displacement: 78.7","Brand: Honda Civic <br>Weight: 1.615 <br> Displacement: 75.7","Brand: Toyota Corolla <br>Weight: 1.835 <br> Displacement: 71.1","Brand: Toyota Corona <br>Weight: 2.465 <br> Displacement: 120.1","Brand: Dodge Challenger <br>Weight: 3.52 <br> Displacement: 318","Brand: AMC Javelin <br>Weight: 3.435 <br> Displacement: 304","Brand: Camaro Z28 <br>Weight: 3.84 <br> Displacement: 350","Brand: Pontiac Firebird <br>Weight: 3.845 <br> Displacement: 400","Brand: Fiat X1-9 <br>Weight: 1.935 <br> Displacement: 79","Brand: Porsche 914-2 <br>Weight: 2.14 <br> Displacement: 120.3","Brand: Lotus Europa <br>Weight: 1.513 <br> Displacement: 95.1","Brand: Ford Pantera L <br>Weight: 3.17 <br> Displacement: 351","Brand: Ferrari Dino <br>Weight: 2.77 <br> Displacement: 145","Brand: Maserati Bora <br>Weight: 3.57 <br> Displacement: 301","Brand: Volvo 142E <br>Weight: 2.78 <br> Displacement: 121"],"marker":{"opacity":0.7,"sizemode":"diameter"},"color":{},"size":{},"alpha_stroke":1,"sizes":[10,50],"spans":[1,20],"type":"scatter","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"Weight"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Displacement"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[2.32,3.19,3.15,2.2,1.615,1.835,2.465,1.935,2.14,1.513,2.78],"y":[108,146.7,140.8,78.7,75.7,71.1,120.1,79,120.3,95.1,121],"mode":"markers","hovertemplate":["Brand: Datsun 710 <br>Weight: 2.32 <br> Displacement: 108","Brand: Merc 240D <br>Weight: 3.19 <br> Displacement: 146.7","Brand: Merc 230 <br>Weight: 3.15 <br> Displacement: 140.8","Brand: Fiat 128 <br>Weight: 2.2 <br> Displacement: 78.7","Brand: Honda Civic <br>Weight: 1.615 <br> Displacement: 75.7","Brand: Toyota Corolla <br>Weight: 1.835 <br> Displacement: 71.1","Brand: Toyota Corona <br>Weight: 2.465 <br> Displacement: 120.1","Brand: Fiat X1-9 <br>Weight: 1.935 <br> Displacement: 79","Brand: Porsche 914-2 <br>Weight: 2.14 <br> Displacement: 120.3","Brand: Lotus Europa <br>Weight: 1.513 <br> Displacement: 95.1","Brand: Volvo 142E <br>Weight: 2.78 <br> Displacement: 121"],"marker":{"color":"rgba(102,194,165,1)","size":[15.7950530035336,11.4134275618375,16.0777385159011,11.9787985865724,10,11.8374558303887,16.3604240282686,11.9787985865724,15.5123674911661,18.6219081272085,18.0565371024735],"sizemode":"diameter","opacity":0.7,"line":{"color":"rgba(102,194,165,1)"}},"type":"scatter","name":"4","textfont":{"color":"rgba(102,194,165,1)","size":[15.7950530035336,11.4134275618375,16.0777385159011,11.9787985865724,10,11.8374558303887,16.3604240282686,11.9787985865724,15.5123674911661,18.6219081272085,18.0565371024735]},"error_y":{"color":"rgba(102,194,165,1)","width":[]},"error_x":{"color":"rgba(102,194,165,1)","width":[]},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2.62,2.875,3.215,3.46,3.44,3.44,2.77],"y":[160,160,258,225,167.6,167.6,145],"mode":"markers","hovertemplate":["Brand: Mazda RX4 <br>Weight: 2.62 <br> Displacement: 160","Brand: Mazda RX4 Wag <br>Weight: 2.875 <br> Displacement: 160","Brand: Hornet 4 Drive <br>Weight: 3.215 <br> Displacement: 258","Brand: Valiant <br>Weight: 3.46 <br> Displacement: 225","Brand: Merc 280 <br>Weight: 3.44 <br> Displacement: 167.6","Brand: Merc 280C <br>Weight: 3.44 <br> Displacement: 167.6","Brand: Ferrari Dino <br>Weight: 2.77 <br> Displacement: 145"],"marker":{"color":"rgba(252,141,98,1)","size":[18.1978798586572,18.1978798586572,18.1978798586572,17.4911660777385,20.0353356890459,20.0353356890459,27.3851590106007],"sizemode":"diameter","opacity":0.7,"line":{"color":"rgba(252,141,98,1)"}},"type":"scatter","name":"6","textfont":{"color":"rgba(252,141,98,1)","size":[18.1978798586572,18.1978798586572,18.1978798586572,17.4911660777385,20.0353356890459,20.0353356890459,27.3851590106007]},"error_y":{"color":"rgba(252,141,98,1)","width":[]},"error_x":{"color":"rgba(252,141,98,1)","width":[]},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[3.44,3.57,4.07,3.73,3.78,5.25,5.424,5.345,3.52,3.435,3.84,3.845,3.17,3.57],"y":[360,360,275.8,275.8,275.8,472,460,440,318,304,350,400,351,301],"mode":"markers","hovertemplate":["Brand: Hornet Sportabout <br>Weight: 3.44 <br> Displacement: 360","Brand: Duster 360 <br>Weight: 3.57 <br> Displacement: 360","Brand: Merc 450SE <br>Weight: 4.07 <br> Displacement: 275.8","Brand: Merc 450SL <br>Weight: 3.73 <br> Displacement: 275.8","Brand: Merc 450SLC <br>Weight: 3.78 <br> Displacement: 275.8","Brand: Cadillac Fleetwood <br>Weight: 5.25 <br> Displacement: 472","Brand: Lincoln Continental <br>Weight: 5.424 <br> Displacement: 460","Brand: Chrysler Imperial <br>Weight: 5.345 <br> Displacement: 440","Brand: Dodge Challenger <br>Weight: 3.52 <br> Displacement: 318","Brand: AMC Javelin <br>Weight: 3.435 <br> Displacement: 304","Brand: Camaro Z28 <br>Weight: 3.84 <br> Displacement: 350","Brand: Pontiac Firebird <br>Weight: 3.845 <br> Displacement: 400","Brand: Ford Pantera L <br>Weight: 3.17 <br> Displacement: 351","Brand: Maserati Bora <br>Weight: 3.57 <br> Displacement: 301"],"marker":{"color":"rgba(141,160,203,1)","size":[27.3851590106007,37.2791519434629,28.0918727915194,28.0918727915194,28.0918727915194,31.6254416961131,33.0388692579505,35.1590106007067,23.8515901060071,23.8515901060071,37.2791519434629,27.3851590106007,39.9646643109541,50],"sizemode":"diameter","opacity":0.7,"line":{"color":"rgba(141,160,203,1)"}},"type":"scatter","name":"8","textfont":{"color":"rgba(141,160,203,1)","size":[27.3851590106007,37.2791519434629,28.0918727915194,28.0918727915194,28.0918727915194,31.6254416961131,33.0388692579505,35.1590106007067,23.8515901060071,23.8515901060071,37.2791519434629,27.3851590106007,39.9646643109541,50]},"error_y":{"color":"rgba(141,160,203,1)","width":[]},"error_x":{"color":"rgba(141,160,203,1)","width":[]},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="application-of-bubble-chart-gpas-of-courses-at-columbia-university" class="section level2" number="46.3">
<h2>
<span class="header-section-number">46.3</span> Application of bubble chart — GPAs of Courses at Columbia University<a class="anchor" aria-label="anchor" href="#application-of-bubble-chart-gpas-of-courses-at-columbia-university"><i class="fas fa-link"></i></a>
</h2>
<p>Next, we applied the bubble chart to something more useful, showing information about Columbia’s courses. Due to limitations on the data and my lack of access to the data, I am getting basic course data from the website <a href="http://www.columbia.edu/cu/bulletin/uwb/home.html">CU Class Directory</a>, like course department, course name, enrollment for the fall 2022 semester, etc. The data regarding average gpa is not accurate enough. If anyone know how to get authoritative average gpa data for each course, please feel free to contact me at lx2305@columbia.edu.</p>
<p>To avoid a lot of repetitive drawing code, I used for loop iterator for each college, because of the difficulty of collecting data, I chose part of courses in 4 colleges as examples. The data needs to be fetched directly from the web page, so I have stored it in my own public GitHub file.</p>
<div class="sourceCode" id="cb359"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/RicoXu727/Leetcode-Note/main/ccData.csv"</span>, show_col_types <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">schools</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Engineering"</span>, <span class="st">"Law"</span>,<span class="st">"Teachers College"</span>,<span class="st">"Professional Studies"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">l</span> <span class="op">&lt;-</span> <span class="fu">htmltools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/tagList.html">tagList</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">school</span> <span class="kw">in</span> <span class="va">schools</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">d</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="va">data</span><span class="op">$</span><span class="va">School</span> <span class="op">==</span> <span class="va">school</span>,<span class="op">]</span> </span>
<span>  <span class="va">l</span><span class="op">[[</span><span class="va">school</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/plotly/man/plot_ly.html">plot_ly</a></span><span class="op">(</span><span class="va">d</span>, x <span class="op">=</span> <span class="op">~</span><span class="va">CourseNumber</span>, y <span class="op">=</span> <span class="op">~</span><span class="va">Department</span>,</span>
<span>                      size <span class="op">=</span> <span class="op">~</span><span class="va">ClassSize</span>, sizes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">30</span><span class="op">)</span>,</span>
<span>                      color <span class="op">=</span> <span class="op">~</span><span class="va">Average_GPA</span>, </span>
<span>                      mode <span class="op">=</span> <span class="st">'markers'</span>,</span>
<span>                      hovertemplate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">CourseTitle</span>, <span class="st">"&lt;br&gt;Class ize:"</span>,<span class="va">d</span><span class="op">$</span><span class="va">ClassSize</span>, <span class="st">"&lt;br&gt;"</span>, <span class="st">"Average gpa:"</span>, <span class="va">d</span><span class="op">$</span><span class="va">Average_GPA</span><span class="op">)</span>,</span>
<span>                      marker <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>opacity <span class="op">=</span> <span class="fl">0.7</span>,sizemode <span class="op">=</span> <span class="st">"diameter"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/plotly/man/add_trace.html">add_markers</a></span><span class="op">(</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span><span class="fu">layout</span><span class="op">(</span>title <span class="op">=</span> <span class="va">school</span>, xaxis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">'Course Number'</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span></span>
<span><span class="va">l</span></span></code></pre></div>
<div id="htmlwidget-fa67451a7da5b2db1855" style="width:100%;height:400px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-fa67451a7da5b2db1855">{"x":{"visdat":{"53cc71b80f56":["function () ","plotlyVisDat"]},"cur_data":"53cc71b80f56","attrs":{"53cc71b80f56":{"x":{},"y":{},"mode":"markers","hovertemplate":["INTRODUCTION TO DATABASES <br>Class ize: 653 <br> Average gpa: 3.58","Computer Vision I: First Principles <br>Class ize: 78 <br> Average gpa: 3.76","TOPICS IN SOFTWARE ENGINEERING <br>Class ize: 395 <br> Average gpa: 3.22","PROBABILITY STAT & SIMULATION <br>Class ize: 271 <br> Average gpa: 3.19","STOCHASTIC MODELS <br>Class ize: 110 <br> Average gpa: 3.25","MSFE Quantitative and Computational Boot <br>Class ize: 95 <br> Average gpa: 3.66","COMPUTER NETWORKS <br>Class ize: 156 <br> Average gpa: 3.57","SYSTEM-ON-CHIP PLATFORMS <br>Class ize: 73 <br> Average gpa: 3.48","FORMAL VERIF HW SW SYSTEMS <br>Class ize: 53 <br> Average gpa: 3.77"],"marker":{"opacity":0.7,"sizemode":"diameter"},"color":{},"size":{},"alpha_stroke":1,"sizes":[10,30],"spans":[1,20],"type":"scatter","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Engineering","xaxis":{"domain":[0,1],"automargin":true,"title":"Course Number"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Department","type":"category","categoryorder":"array","categoryarray":["CS","CSEE","IEOR"]},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[4111,4731,6156,4101,4106,4799,4119,4868,6863],"y":["CS","CS","CS","IEOR","IEOR","IEOR","CSEE","CSEE","CSEE"],"mode":"markers","hovertemplate":["INTRODUCTION TO DATABASES <br>Class ize: 653 <br> Average gpa: 3.58","Computer Vision I: First Principles <br>Class ize: 78 <br> Average gpa: 3.76","TOPICS IN SOFTWARE ENGINEERING <br>Class ize: 395 <br> Average gpa: 3.22","PROBABILITY STAT & SIMULATION <br>Class ize: 271 <br> Average gpa: 3.19","STOCHASTIC MODELS <br>Class ize: 110 <br> Average gpa: 3.25","MSFE Quantitative and Computational Boot <br>Class ize: 95 <br> Average gpa: 3.66","COMPUTER NETWORKS <br>Class ize: 156 <br> Average gpa: 3.57","SYSTEM-ON-CHIP PLATFORMS <br>Class ize: 73 <br> Average gpa: 3.48","FORMAL VERIF HW SW SYSTEMS <br>Class ize: 53 <br> Average gpa: 3.77"],"marker":{"colorbar":{"title":"Average_GPA","ticklen":2},"cmin":3.19,"cmax":3.77,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666663","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333334","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666666","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333334","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[3.58,3.76,3.22,3.19,3.25,3.66,3.57,3.48,3.77],"size":[30,10.8333333333333,21.4,17.2666666666667,11.9,11.4,13.4333333333333,10.6666666666667,10],"sizemode":"diameter","opacity":0.7,"line":{"colorbar":{"title":"","ticklen":2},"cmin":3.19,"cmax":3.77,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666663","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333334","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666666","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333334","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[3.58,3.76,3.22,3.19,3.25,3.66,3.57,3.48,3.77]}},"type":"scatter","textfont":{"size":[30,10.8333333333333,21.4,17.2666666666667,11.9,11.4,13.4333333333333,10.6666666666667,10]},"error_y":{"width":[]},"error_x":{"width":[]},"xaxis":"x","yaxis":"y","frame":null},{"x":[4101,6863],"y":["CS","IEOR"],"type":"scatter","mode":"markers","opacity":0,"hoverinfo":"none","showlegend":false,"marker":{"colorbar":{"title":"Average_GPA","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"cmin":3.19,"cmax":3.77,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666663","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333334","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666666","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333334","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":true,"color":[3.19,3.77],"line":{"color":"rgba(255,127,14,1)"}},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><div id="htmlwidget-126933127a1d7008f6c9" style="width:100%;height:400px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-126933127a1d7008f6c9">{"x":{"visdat":{"53cc4d114474":["function () ","plotlyVisDat"]},"cur_data":"53cc4d114474","attrs":{"53cc4d114474":{"x":{},"y":{},"mode":"markers","hovertemplate":["ADVANCED FAMILY LAW <br>Class ize: 16 <br> Average gpa: 3.33","CONSTITUTIONAL LAW <br>Class ize: 103 <br> Average gpa: 3.64","LAW OF THE POLITICAL PROCESS <br>Class ize: 61 <br> Average gpa: 3.44"],"marker":{"opacity":0.7,"sizemode":"diameter"},"color":{},"size":{},"alpha_stroke":1,"sizes":[10,30],"spans":[1,20],"type":"scatter","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Law","xaxis":{"domain":[0,1],"automargin":true,"title":"Course Number"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Department","type":"category","categoryorder":"array","categoryarray":["LAW"]},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[6581,6133,6474],"y":["LAW","LAW","LAW"],"mode":"markers","hovertemplate":["ADVANCED FAMILY LAW <br>Class ize: 16 <br> Average gpa: 3.33","CONSTITUTIONAL LAW <br>Class ize: 103 <br> Average gpa: 3.64","LAW OF THE POLITICAL PROCESS <br>Class ize: 61 <br> Average gpa: 3.44"],"marker":{"colorbar":{"title":"Average_GPA","ticklen":2},"cmin":3.33,"cmax":3.64,"colorscale":[["0","rgba(68,1,84,1)"],["0.041666666666666","rgba(70,19,97,1)"],["0.0833333333333335","rgba(72,32,111,1)"],["0.124999999999999","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666666","rgba(56,93,140,1)"],["0.333333333333334","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.500000000000001","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666666","rgba(53,183,121,1)"],["0.708333333333334","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875000000000001","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[3.33,3.64,3.44],"size":[10,30,20.3448275862069],"sizemode":"diameter","opacity":0.7,"line":{"colorbar":{"title":"","ticklen":2},"cmin":3.33,"cmax":3.64,"colorscale":[["0","rgba(68,1,84,1)"],["0.041666666666666","rgba(70,19,97,1)"],["0.0833333333333335","rgba(72,32,111,1)"],["0.124999999999999","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666666","rgba(56,93,140,1)"],["0.333333333333334","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.500000000000001","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666666","rgba(53,183,121,1)"],["0.708333333333334","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875000000000001","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[3.33,3.64,3.44]}},"type":"scatter","textfont":{"size":[10,30,20.3448275862069]},"error_y":{"width":[]},"error_x":{"width":[]},"xaxis":"x","yaxis":"y","frame":null},{"x":[6133,6581],"y":["LAW","LAW"],"type":"scatter","mode":"markers","opacity":0,"hoverinfo":"none","showlegend":false,"marker":{"colorbar":{"title":"Average_GPA","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"cmin":3.33,"cmax":3.64,"colorscale":[["0","rgba(68,1,84,1)"],["0.041666666666666","rgba(70,19,97,1)"],["0.0833333333333335","rgba(72,32,111,1)"],["0.124999999999999","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666666","rgba(56,93,140,1)"],["0.333333333333334","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.500000000000001","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666666","rgba(53,183,121,1)"],["0.708333333333334","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875000000000001","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":true,"color":[3.33,3.64],"line":{"color":"rgba(255,127,14,1)"}},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><div id="htmlwidget-b0609c65ef51d2992cf6" style="width:100%;height:400px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-b0609c65ef51d2992cf6">{"x":{"visdat":{"53cc646250b2":["function () ","plotlyVisDat"]},"cur_data":"53cc646250b2","attrs":{"53cc646250b2":{"x":{},"y":{},"mode":"markers","hovertemplate":["Inclusion and Participation in the Arts for Children with Disabilities <br>Class ize: 38 <br> Average gpa: 2.99","Media and Gender <br>Class ize: 16 <br> Average gpa: 3.15","Adv Rsrch: Arts & Humanities <br>Class ize: 47 <br> Average gpa: 3.64","Master's Seminar in Art Education <br>Class ize: 17 <br> Average gpa: 3.84","Neuroscience of Speech and Language <br>Class ize: 60 <br> Average gpa: 3.21","Human Functional Neuroanatomy <br>Class ize: 34 <br> Average gpa: 3.54","Practicum in school speech-language pathology <br>Class ize: 67 <br> Average gpa: 3","Understanding Race Education: From Racial Hierarchy to Racial Literacy <br>Class ize: 28 <br> Average gpa: 3.27","Data Analysis for Policy and Decision Making I <br>Class ize: 63 <br> Average gpa: 3.51","Federal Policy Institute <br>Class ize: 28 <br> Average gpa: 3.6","Economics of Education <br>Class ize: 33 <br> Average gpa: 3.64"],"marker":{"opacity":0.7,"sizemode":"diameter"},"color":{},"size":{},"alpha_stroke":1,"sizes":[10,30],"spans":[1,20],"type":"scatter","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Teachers College","xaxis":{"domain":[0,1],"automargin":true,"title":"Course Number"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Department","type":"category","categoryorder":"array","categoryarray":["A&H","BS","EDP"]},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[4003,4065,6900,5922,4032,5019,5210,4026,4002,4899,4050],"y":["A&H","A&H","A&H","A&H","BS","BS","BS","EDP","EDP","EDP","EDP"],"mode":"markers","hovertemplate":["Inclusion and Participation in the Arts for Children with Disabilities <br>Class ize: 38 <br> Average gpa: 2.99","Media and Gender <br>Class ize: 16 <br> Average gpa: 3.15","Adv Rsrch: Arts & Humanities <br>Class ize: 47 <br> Average gpa: 3.64","Master's Seminar in Art Education <br>Class ize: 17 <br> Average gpa: 3.84","Neuroscience of Speech and Language <br>Class ize: 60 <br> Average gpa: 3.21","Human Functional Neuroanatomy <br>Class ize: 34 <br> Average gpa: 3.54","Practicum in school speech-language pathology <br>Class ize: 67 <br> Average gpa: 3","Understanding Race Education: From Racial Hierarchy to Racial Literacy <br>Class ize: 28 <br> Average gpa: 3.27","Data Analysis for Policy and Decision Making I <br>Class ize: 63 <br> Average gpa: 3.51","Federal Policy Institute <br>Class ize: 28 <br> Average gpa: 3.6","Economics of Education <br>Class ize: 33 <br> Average gpa: 3.64"],"marker":{"colorbar":{"title":"Average_GPA","ticklen":2},"cmin":2.99,"cmax":3.84,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666664","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333334","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666666","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333334","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[2.99,3.15,3.64,3.84,3.21,3.54,3,3.27,3.51,3.6,3.64],"size":[18.6274509803922,10,22.156862745098,10.3921568627451,27.2549019607843,17.0588235294118,30,14.7058823529412,28.4313725490196,14.7058823529412,16.6666666666667],"sizemode":"diameter","opacity":0.7,"line":{"colorbar":{"title":"","ticklen":2},"cmin":2.99,"cmax":3.84,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666664","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333334","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666666","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333334","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[2.99,3.15,3.64,3.84,3.21,3.54,3,3.27,3.51,3.6,3.64]}},"type":"scatter","textfont":{"size":[18.6274509803922,10,22.156862745098,10.3921568627451,27.2549019607843,17.0588235294118,30,14.7058823529412,28.4313725490196,14.7058823529412,16.6666666666667]},"error_y":{"width":[]},"error_x":{"width":[]},"xaxis":"x","yaxis":"y","frame":null},{"x":[4002,6900],"y":["A&H","EDP"],"type":"scatter","mode":"markers","opacity":0,"hoverinfo":"none","showlegend":false,"marker":{"colorbar":{"title":"Average_GPA","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"cmin":2.99,"cmax":3.84,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666664","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333334","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666666","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333334","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":true,"color":[2.99,3.84],"line":{"color":"rgba(255,127,14,1)"}},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><div id="htmlwidget-0bf41426197ef5ad316a" style="width:100%;height:400px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-0bf41426197ef5ad316a">{"x":{"visdat":{"53cc23863dd9":["function () ","plotlyVisDat"]},"cur_data":"53cc23863dd9","attrs":{"53cc23863dd9":{"x":{},"y":{},"mode":"markers","hovertemplate":["APPLIED ANALYTICS IN ORGANIZATIONAL CONT <br>Class ize: 57 <br> Average gpa: 3.8","PYTHON FOR DATA ANALYSIS <br>Class ize: 71 <br> Average gpa: 3.7","SQL <br>Class ize: 77 <br> Average gpa: 3.66","CLOUD COMPUTING <br>Class ize: 57 <br> Average gpa: 3.55","ANALYTICS & LEADING CHANGE <br>Class ize: 326 <br> Average gpa: 3.44","STORYTELLING WITH DATA <br>Class ize: 608 <br> Average gpa: 3.88","INTRODUCTION TO HUMAN CAPITAL MANAGEMENT <br>Class ize: 40 <br> Average gpa: 3.46","PEOPLE ANALYTICS & DECISION MAKING <br>Class ize: 32 <br> Average gpa: 3.79","TRANSFORMING TOTAL REWARDS <br>Class ize: 43 <br> Average gpa: 3.31","FOUNDATIONS OF SPORTS MANAGEMENT <br>Class ize: 42 <br> Average gpa: 3.56","SPORTS LAW AND ETHICS <br>Class ize: 46 <br> Average gpa: 3.76"],"marker":{"opacity":0.7,"sizemode":"diameter"},"color":{},"size":{},"alpha_stroke":1,"sizes":[10,30],"spans":[1,20],"type":"scatter","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Professional Studies","xaxis":{"domain":[0,1],"automargin":true,"title":"Course Number"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Department","type":"category","categoryorder":"array","categoryarray":["AA","HCM","SM"]},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[5100,5210,5310,5450,5700,5800,5100,5160,5270,5220,5460],"y":["AA","AA","AA","AA","AA","AA","HCM","HCM","HCM","SM","SM"],"mode":"markers","hovertemplate":["APPLIED ANALYTICS IN ORGANIZATIONAL CONT <br>Class ize: 57 <br> Average gpa: 3.8","PYTHON FOR DATA ANALYSIS <br>Class ize: 71 <br> Average gpa: 3.7","SQL <br>Class ize: 77 <br> Average gpa: 3.66","CLOUD COMPUTING <br>Class ize: 57 <br> Average gpa: 3.55","ANALYTICS & LEADING CHANGE <br>Class ize: 326 <br> Average gpa: 3.44","STORYTELLING WITH DATA <br>Class ize: 608 <br> Average gpa: 3.88","INTRODUCTION TO HUMAN CAPITAL MANAGEMENT <br>Class ize: 40 <br> Average gpa: 3.46","PEOPLE ANALYTICS & DECISION MAKING <br>Class ize: 32 <br> Average gpa: 3.79","TRANSFORMING TOTAL REWARDS <br>Class ize: 43 <br> Average gpa: 3.31","FOUNDATIONS OF SPORTS MANAGEMENT <br>Class ize: 42 <br> Average gpa: 3.56","SPORTS LAW AND ETHICS <br>Class ize: 46 <br> Average gpa: 3.76"],"marker":{"colorbar":{"title":"Average_GPA","ticklen":2},"cmin":3.31,"cmax":3.88,"colorscale":[["0","rgba(68,1,84,1)"],["0.041666666666667","rgba(70,19,97,1)"],["0.0833333333333331","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666666","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666666","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333334","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333334","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333334","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[3.8,3.7,3.66,3.55,3.44,3.88,3.46,3.79,3.31,3.56,3.76],"size":[10.8680555555556,11.3541666666667,11.5625,10.8680555555556,20.2083333333333,30,10.2777777777778,10,10.3819444444444,10.3472222222222,10.4861111111111],"sizemode":"diameter","opacity":0.7,"line":{"colorbar":{"title":"","ticklen":2},"cmin":3.31,"cmax":3.88,"colorscale":[["0","rgba(68,1,84,1)"],["0.041666666666667","rgba(70,19,97,1)"],["0.0833333333333331","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666666","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666666","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333334","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333334","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333334","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[3.8,3.7,3.66,3.55,3.44,3.88,3.46,3.79,3.31,3.56,3.76]}},"type":"scatter","textfont":{"size":[10.8680555555556,11.3541666666667,11.5625,10.8680555555556,20.2083333333333,30,10.2777777777778,10,10.3819444444444,10.3472222222222,10.4861111111111]},"error_y":{"width":[]},"error_x":{"width":[]},"xaxis":"x","yaxis":"y","frame":null},{"x":[5100,5800],"y":["AA","SM"],"type":"scatter","mode":"markers","opacity":0,"hoverinfo":"none","showlegend":false,"marker":{"colorbar":{"title":"Average_GPA","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"cmin":3.31,"cmax":3.88,"colorscale":[["0","rgba(68,1,84,1)"],["0.041666666666667","rgba(70,19,97,1)"],["0.0833333333333331","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666666","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666666","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333334","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333334","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333334","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":true,"color":[3.31,3.88],"line":{"color":"rgba(255,127,14,1)"}},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="differently-next-time" class="section level2" number="46.4">
<h2>
<span class="header-section-number">46.4</span> Differently next time<a class="anchor" aria-label="anchor" href="#differently-next-time"><i class="fas fa-link"></i></a>
</h2>
<p>Since we learned how to implement bubble charts and know how to customizely set pop up, the most important thing for the application is to get reliable data. If you have a way to get accurate data like average gpa, or if you are familiar with crawlers and are interested in contributing to this course GPA sharing platform, you are welcome to contact me at lx2305@columbia.edu.</p>
<p>If our platform is implemented, students will have more active access to information about all Columbia courses, not just their own college. Perhaps it would also be more helpful to students in choosing courses across colleges and in choosing their majors. The maintainers of the platform will also update as much accurate data as possible.</p>
<p>In addition, each course may be taught by many professors, and if possible, we can also expand a new board on the platform to show different section workload sizes and average GPAs.</p>
<div id="sourses" class="section level3" number="46.4.1">
<h3>
<span class="header-section-number">46.4.1</span> Sourses:<a class="anchor" aria-label="anchor" href="#sourses"><i class="fas fa-link"></i></a>
</h3>
<p><a href="https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/mtcars.html" class="uri">https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/mtcars.html</a></p>
<p><a href="https://waf.cs.illinois.edu/discovery/gpa_of_every_course_at_illinois/" class="uri">https://waf.cs.illinois.edu/discovery/gpa_of_every_course_at_illinois/</a></p>
<p><a href="http://www.columbia.edu/cu/bulletin/uwb/home.html" class="uri">http://www.columbia.edu/cu/bulletin/uwb/home.html</a></p>
<p><a href="https://hexcolorpedia.com/" class="uri">https://hexcolorpedia.com/</a></p>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="S5.html"><span class="header-section-number">45</span> Section 5. Time series visualization with Plotly</a></div>
<div class="next"><a href="edav-survey-and-analysis.html"><span class="header-section-number">47</span> EDAV Survey and Analysis</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#bubble-chart-gpas-of-course-at-columbia-university"><span class="header-section-number">46</span> Bubble chart — GPAs of Course at Columbia University</a></li>
<li><a class="nav-link" href="#motivation-for-the-project-1"><span class="header-section-number">46.1</span> Motivation for the project</a></li>
<li>
<a class="nav-link" href="#two-methods-to-create-bubble-chart-example-of-mtcars"><span class="header-section-number">46.2</span> Two methods to create bubble chart — Example of mtcars</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#use-the-package-ggplot2"><span class="header-section-number">46.2.1</span> Use the package ggplot2</a></li>
<li><a class="nav-link" href="#the-package-plotly"><span class="header-section-number">46.2.2</span> The package plotly</a></li>
</ul>
</li>
<li><a class="nav-link" href="#application-of-bubble-chart-gpas-of-courses-at-columbia-university"><span class="header-section-number">46.3</span> Application of bubble chart — GPAs of Courses at Columbia University</a></li>
<li>
<a class="nav-link" href="#differently-next-time"><span class="header-section-number">46.4</span> Differently next time</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#sourses"><span class="header-section-number">46.4.1</span> Sourses:</a></li></ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/jtr13/cc22mw/blob/main/bubble_chart_application.Rmd">View source <i class="fa-solid fa-chart-scatter"></i></a></li>
          <li><a id="book-edit" href="https://github.com/jtr13/cc22mw/edit/main/bubble_chart_application.Rmd">Edit this page <i class="fa-solid fa-chart-scatter"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Community Contributions for EDAV Fall 2022 Mon/Wed</strong>" was written by . It was last built on 2022-11-18.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
